<!DOCTYPE html>
<html>
<head>
  
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="js/Chart.min.js"></script>
<script type="text/javascript" src="js/moment.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>

<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css"/>
<link rel="stylesheet" href="css/cucumber.css" type="text/css"/>
<link rel="stylesheet" href="css/font-awesome.min.css"/>
<link rel="shortcut icon" href="images/favicon.png"/>

<script type="text/javascript">
$(document).ready(function() {
    // this will tell tablesorter to try looking for the data-value attribute
    // if present, it'll sort by that instead
    // otherwise, it'll sort by the text content of the table cell
    $("#tablesorter").tablesorter({
        textAttribute: 'data-value',
        // ignores the first row of the header, the 'scenario', 'steps', since
        // sorting those doesn't make sense
        selectorHeaders: '> thead tr:not(.dont-sort) th',
        // use a stable sort
        sortStable: true
    });
});
</script>











  
<title>Cucumber Reports  - Feature: download/T07_DeltaCustomUpdate.feature</title>

</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top" id="navigation">
  <div class="container-fluid">
    <div class="collapse navbar-collapse">
      <p class="navbar-text navbar-left">Cucumber Report</p>
      <ul class="nav navbar-nav navbar-right">
                <li role="presentation" ><a href="overview-features.html">Features</a></li>
        <li role="presentation" ><a href="overview-tags.html">Tags</a></li>
        <li role="presentation" ><a href="overview-steps.html">Steps</a></li>
                <li role="presentation" ><a href="overview-failures.html">Failures</a></li>
      </ul>
    </div>
  </div>
</nav>


<div class="container-fluid">
  <div class="col-md-5 col-md-offset-1">
    
<table class="table table-bordered" id="build-info">
  <thead>
    <tr>
      <th>Project</th>
            <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <tr class="info">
      <td>DKK API TEST</td>
            <td>15 Jun 2021, 02:31</td>
    </tr>
  </tbody>
</table>

  </div>
  <div class="col-md-3 col-md-offset-2">
      </div>
</div>


<div id="report-lead" class="container-fluid">
  <div class="col-md-10 col-md-offset-1">
    <h2>Feature Report</h2>
      </div>
</div>


<div class="container-fluid" id="report">
  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <table class="stats-table">

        
<thead>
  <tr class="header dont-sort">
        <th></th>
    <th colspan="6">Steps</th>
    <th colspan="3">Scenarios</th>
    <th colspan="2">Features</th>
  </tr>
  <tr>
    <th>Feature</th>
        <th class="passed">Passed</th>
    <th class="failed">Failed</th>
    <th class="skipped">Skipped</th>
    <th class="pending">Pending</th>
    <th class="undefined">Undefined</th>
    <th class="total">Total</th>

    <th class="passed">Passed</th>
    <th class="failed">Failed</th>
    <th class="total">Total</th>

    <th>Duration</th>
    <th>Status</th>
  </tr>
</thead>


        <tbody>
        <tr>
          <td class="tagname">download/T07_DeltaCustomUpdate.feature</td>
                    <td      class="passed"    >3195</td>
          <td >0</td>
          <td >0</td>
          <td >0</td>
          <td >0</td>
          <td class="total">3195</td>

          <td  class="passed"    >3</td>
          <td >0</td>
          <td class="total">3</td>

          <td class="duration" data-value="481452541497">8:1.452</td>
          <td class="passed">Passed</td>
        </tr>
        </tbody>

      </table>
    </div>
  </div>
</div>



<div class="container-fluid">
  <div class="row">
    <div class="col-md-10 col-md-offset-10">
      <i class="fa fa-chevron-circle-down fa-2x collapsable-control"
        onClick="javascript:$('#report .collapsable-details').collapse('show')"></i>
      <i class="fa fa-chevron-circle-up fa-2x collapsable-control"
        onClick="javascript:$('#report .collapsable-details').collapse('hide')"></i>
    </div>
  </div>
</div>


<div class="container-fluid" id="report">
  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <div class="feature">
        
<div class="tags indention">
      <b>Tags:</b>
           <a href="report-tag_SMOKE.html">@SMOKE</a>
      </div>

        
<div class="brief passed">
  <span class="keyword indention">Feature</span>
  <span class="name">download/T07_DeltaCustomUpdate.feature</span>
  

  </div>

        <div class="description indention">DKK Api geeft Custom delta request voor alle leveringen na TODO b2219778-e94c-40b0-92bd-95e3491af2bb
Dit feature test alle deltas voor alle leveringen voor een specifiek interessegebied</div>

        <div class="elements inner-level">
                      
<div class="element">
  
  
<div class="tags indention">
  </div>

  
  <span class="lead-duration duration">2:25.779</span>


    <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-1">
    
<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">downoad deltas op locatie buitenhof perceel</span>
  

       <i class="chevron fa fa-fw"></i>
  </div>

  </span>
  <div class="description indention"></div>

  <div id="element-1" class="collapse collapsable-details ">
    


    
<div class="steps inner-level">
    <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-2">
    
<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>
  

       <i class="chevron fa fa-fw"></i>
  </div>

  </div>

  <div id="steps-2" class="inner-level collapse collapsable-details ">
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;bepaal een delta ids &quot;</span>
  
  <span class="lead-duration duration">0.035</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-3">
          <a>Doc string</a>
      </div>
      <div id="msg-3" class="collapse collapsable-details">
        <pre>02:29:04.017 base url : {
  &quot;apiBaseUrl&quot;: &quot;https://downloads.pdok.nl/&quot;
}
 
02:29:04.049 [print] bepaal een delta ids</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">Given</span>
  <span class="name">url apiBaseUrl + 'kadastralekaart/api/v4_0/delta'</span>
  
  <span class="lead-duration duration">0.017</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">And</span>
  <span class="name">param count = 1000</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">And</span>
  <span class="name">param after-delta-id = &quot;b2219778-e94c-40b0-92bd-95e3491af2bb&quot;</span>
  
  <span class="lead-duration duration">0.016</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.625</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-4">
          <a>Doc string</a>
      </div>
      <div id="msg-4" class="collapse collapsable-details">
        <pre>02:29:04.096 request:
1 &gt; GET https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta?count=1000&amp;after-delta-id=b2219778-e94c-40b0-92bd-95e3491af2bb
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:04.714 response time in milliseconds: 615.84
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:04 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Cnection: [close, close]
{&quot;deltas&quot;:[{&quot;id&quot;:&quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-15T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-16T21:59:59Z&quot;}},{&quot;id&quot;:&quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-16T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-17T21:59:59Z&quot;}},{&quot;id&quot;:&quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-17T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-18T21:59:59Z&quot;}},{&quot;id&quot;:&quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-18T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-19T21:59:59Z&quot;}},{&quot;id&quot;:&quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-19T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-20T21:59:59Z&quot;}},{&quot;id&quot;:&quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-20T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-21T21:59:59Z&quot;}},{&quot;id&quot;:&quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-21T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-22T21:59:59Z&quot;}},{&quot;id&quot;:&quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-22T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-23T21:59:59Z&quot;}},{&quot;id&quot;:&quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-23T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-24T21:59:59Z&quot;}},{&quot;id&quot;:&quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-24T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-25T21:59:59Z&quot;}},{&quot;id&quot;:&quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-25T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-26T21:59:59Z&quot;}},{&quot;id&quot;:&quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-26T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-27T21:59:59Z&quot;}},{&quot;id&quot;:&quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-27T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-28T21:59:59Z&quot;}},{&quot;id&quot;:&quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-28T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-29T21:59:59Z&quot;}},{&quot;id&quot;:&quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-29T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-30T21:59:59Z&quot;}},{&quot;id&quot;:&quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-30T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-31T21:59:59Z&quot;}},{&quot;id&quot;:&quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-31T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-01T21:59:59Z&quot;}},{&quot;id&quot;:&quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-01T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-02T21:59:59Z&quot;}},{&quot;id&quot;:&quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-02T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-03T21:59:59Z&quot;}},{&quot;id&quot;:&quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-03T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-04T21:59:59Z&quot;}},{&quot;id&quot;:&quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-04T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-05T21:59:59Z&quot;}},{&quot;id&quot;:&quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-05T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-06T21:59:59Z&quot;}},{&quot;id&quot;:&quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-06T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-07T21:59:59Z&quot;}},{&quot;id&quot;:&quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-07T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-08T21:59:59Z&quot;}},{&quot;id&quot;:&quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-08T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-09T21:59:59Z&quot;}},{&quot;id&quot;:&quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-09T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-10T21:59:59Z&quot;}},{&quot;id&quot;:&quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-10T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-11T21:59:59Z&quot;}},{&quot;id&quot;:&quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-11T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-12T21:59:59Z&quot;}},{&quot;id&quot;:&quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-12T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-13T21:59:59Z&quot;}},{&quot;id&quot;:&quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-13T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-14T21:59:59Z&quot;}}],&quot;_links&quot;:[]}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">And</span>
  <span class="name">def alldelta = response.deltas</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;alldelta:&quot;, alldelta</span>
  
  <span class="lead-duration duration">0.020</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-5">
          <a>Doc string</a>
      </div>
      <div id="msg-5" class="collapse collapsable-details">
        <pre>02:29:04.741 [print] alldelta: [
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-15T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-16T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-16T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-17T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-17T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-18T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-18T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-19T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-19T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-20T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-20T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-21T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-21T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-22T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-22T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-23T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-23T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-24T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-24T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-25T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-25T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-26T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-26T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-27T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-27T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-28T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-28T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-29T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-29T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-30T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-30T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-31T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-31T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-01T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-01T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-02T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-02T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-03T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-03T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-04T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-04T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-05T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-05T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-06T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-06T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-07T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-07T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-08T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-08T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-09T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-09T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-10T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-10T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-11T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-11T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-12T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-12T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-13T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-13T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-14T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;
  }
]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def pararray = []</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def featureslist = [&quot;perceel&quot;]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def fun =</span>
  
  <span class="lead-duration duration">0.012</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-6">
          <a>Doc string</a>
      </div>
      <div id="msg-6" class="collapse collapsable-details">
        <pre>function(delta) {
req = { format: &quot;gml&quot;, geofilter: 'POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))' };
req[&quot;deltaId&quot;] = delta[&quot;id&quot;];
req[&quot;featuretypes&quot;] = featureslist;
pararray.add (req);
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">eval karate.forEach(alldelta, fun)</span>
  
  <span class="lead-duration duration">0.099</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;array:&quot;, pararray</span>
  
  <span class="lead-duration duration">0.030</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-7">
          <a>Doc string</a>
      </div>
      <div id="msg-7" class="collapse collapsable-details">
        <pre>02:29:04.885 [print] array: [
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,
    &quot;featuretypes&quot;: [
      &quot;perceel&quot;
    ]
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  }
]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;done&quot;</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-8">
          <a>Doc string</a>
      </div>
      <div id="msg-8" class="collapse collapsable-details">
        <pre>02:29:04.886 [print] done</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def dodelta = call read('DeltaCustomargs.feature') pararray</span>
  
  <span class="lead-duration duration">1:12.604</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[0] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-9">
          <a>Doc string</a>
      </div>
      <div id="msg-9" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.048</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.043</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-10">
          <a>Doc string</a>
      </div>
      <div id="msg-10" class="collapse collapsable-details">
        <pre>02:29:05.069 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.597</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-11">
          <a>Doc string</a>
      </div>
      <div id="msg-11" class="collapse collapsable-details">
        <pre>02:29:05.149 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:05.667 response time in milliseconds: 516.99
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:05 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/c6e3039e-9001-4276-6513-d25c67f9bed2/status&quot;}},&quot;downloadRequestId&quot;:&quot;c6e3039e-9001-4276-6513-d25c67f9bed2&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.043</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-12">
          <a>Doc string</a>
      </div>
      <div id="msg-12" class="collapse collapsable-details">
        <pre>02:29:05.717 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.016</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-13">
          <a>Doc string</a>
      </div>
      <div id="msg-13" class="collapse collapsable-details">
        <pre>02:29:05.741 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c6e3039e-9001-4276-6513-d25c67f9bed2/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.509</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-14">
          <a>Doc string</a>
      </div>
      <div id="msg-14" class="collapse collapsable-details">
        <pre>02:29:05.744 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c6e3039e-9001-4276-6513-d25c67f9bed2/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:06.250 response time in milliseconds: 505.01
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:06 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/1e7e5b35-96c2-4a9f-bf1d-b57fa68ef2cc/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.550</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-15">
          <a>Doc string</a>
      </div>
      <div id="msg-15" class="collapse collapsable-details">
        <pre>02:29:06.256 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c6e3039e-9001-4276-6513-d25c67f9bed2/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:06.761 response time in milliseconds: 504.41
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:06 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/1e7e5b35-96c2-4a9f-bf1d-b57fa68ef2cc/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.018</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-16">
          <a>Doc string</a>
      </div>
      <div id="msg-16" class="collapse collapsable-details">
        <pre>02:29:06.822 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/1e7e5b35-96c2-4a9f-bf1d-b57fa68ef2cc/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.008</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.529</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-17">
          <a>Doc string</a>
      </div>
      <div id="msg-17" class="collapse collapsable-details">
        <pre>02:29:06.834 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/1e7e5b35-96c2-4a9f-bf1d-b57fa68ef2cc/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:07.360 response time in milliseconds: 526.05
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:07 GMT
4 &lt; Etag: &quot;9bd59fe38fc0598bd58c721084f4cc8a-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:05 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08254984041
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.009</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-18">
          <a>Doc string</a>
      </div>
      <div id="msg-18" class="collapse collapsable-details">
        <pre>02:29:07.375 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-19">
          <a>Doc string</a>
      </div>
      <div id="msg-19" class="collapse collapsable-details">
        <pre>02:29:07.378 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/1e7e5b35-96c2-4a9f-bf1d-b57fa68ef2cc/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-20">
          <a>Doc string</a>
      </div>
      <div id="msg-20" class="collapse collapsable-details">
        <pre>02:29:07.386 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.016</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[1] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-21">
          <a>Doc string</a>
      </div>
      <div id="msg-21" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.016</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-22">
          <a>Doc string</a>
      </div>
      <div id="msg-22" class="collapse collapsable-details">
        <pre>02:29:07.459 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.559</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-23">
          <a>Doc string</a>
      </div>
      <div id="msg-23" class="collapse collapsable-details">
        <pre>02:29:07.460 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:08.016 response time in milliseconds: 555.55
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:07 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/295ca6c3-25c0-4156-4386-d17903aa718c/status&quot;}},&quot;downloadRequestId&quot;:&quot;295ca6c3-25c0-4156-4386-d17903aa718c&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.018</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-24">
          <a>Doc string</a>
      </div>
      <div id="msg-24" class="collapse collapsable-details">
        <pre>02:29:08.043 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-25">
          <a>Doc string</a>
      </div>
      <div id="msg-25" class="collapse collapsable-details">
        <pre>02:29:08.054 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/295ca6c3-25c0-4156-4386-d17903aa718c/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.509</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-26">
          <a>Doc string</a>
      </div>
      <div id="msg-26" class="collapse collapsable-details">
        <pre>02:29:08.063 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/295ca6c3-25c0-4156-4386-d17903aa718c/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:08.572 response time in milliseconds: 508.12
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:08 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/2f9d2a85-9306-4428-9f7a-1cf50593501d/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.548</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-27">
          <a>Doc string</a>
      </div>
      <div id="msg-27" class="collapse collapsable-details">
        <pre>02:29:08.574 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/295ca6c3-25c0-4156-4386-d17903aa718c/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:09.118 response time in milliseconds: 543.71
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:09 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/2f9d2a85-9306-4428-9f7a-1cf50593501d/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-28">
          <a>Doc string</a>
      </div>
      <div id="msg-28" class="collapse collapsable-details">
        <pre>02:29:09.125 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/2f9d2a85-9306-4428-9f7a-1cf50593501d/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.701</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-29">
          <a>Doc string</a>
      </div>
      <div id="msg-29" class="collapse collapsable-details">
        <pre>02:29:09.133 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/2f9d2a85-9306-4428-9f7a-1cf50593501d/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:09.829 response time in milliseconds: 692.81
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 646
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:09 GMT
4 &lt; Etag: &quot;35bf684c465bd73a7de6ff200881a770-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:08 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A082E2053616
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-30">
          <a>Doc string</a>
      </div>
      <div id="msg-30" class="collapse collapsable-details">
        <pre>02:29:09.835 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.020</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-31">
          <a>Doc string</a>
      </div>
      <div id="msg-31" class="collapse collapsable-details">
        <pre>02:29:09.856 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/2f9d2a85-9306-4428-9f7a-1cf50593501d/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-32">
          <a>Doc string</a>
      </div>
      <div id="msg-32" class="collapse collapsable-details">
        <pre>02:29:09.857 [print] size 646</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.014</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[2] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-33">
          <a>Doc string</a>
      </div>
      <div id="msg-33" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-34">
          <a>Doc string</a>
      </div>
      <div id="msg-34" class="collapse collapsable-details">
        <pre>02:29:09.887 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.126</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-35">
          <a>Doc string</a>
      </div>
      <div id="msg-35" class="collapse collapsable-details">
        <pre>02:29:09.888 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:12.014 response time in milliseconds: 2125.25
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:11 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/750697fd-06f2-45eb-6c18-235fad4461af/status&quot;}},&quot;downloadRequestId&quot;:&quot;750697fd-06f2-45eb-6c18-235fad4461af&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-36">
          <a>Doc string</a>
      </div>
      <div id="msg-36" class="collapse collapsable-details">
        <pre>02:29:12.020 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.025</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-37">
          <a>Doc string</a>
      </div>
      <div id="msg-37" class="collapse collapsable-details">
        <pre>02:29:12.047 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/750697fd-06f2-45eb-6c18-235fad4461af/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.516</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-38">
          <a>Doc string</a>
      </div>
      <div id="msg-38" class="collapse collapsable-details">
        <pre>02:29:12.065 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/750697fd-06f2-45eb-6c18-235fad4461af/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:12.562 response time in milliseconds: 496.70
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:12 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d181a0bf-886a-4340-a7b8-31e1c8f3239a/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.499</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-39">
          <a>Doc string</a>
      </div>
      <div id="msg-39" class="collapse collapsable-details">
        <pre>02:29:12.567 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/750697fd-06f2-45eb-6c18-235fad4461af/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:13.056 response time in milliseconds: 487.70
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:12 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d181a0bf-886a-4340-a7b8-31e1c8f3239a/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.018</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-40">
          <a>Doc string</a>
      </div>
      <div id="msg-40" class="collapse collapsable-details">
        <pre>02:29:13.084 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/d181a0bf-886a-4340-a7b8-31e1c8f3239a/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.552</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-41">
          <a>Doc string</a>
      </div>
      <div id="msg-41" class="collapse collapsable-details">
        <pre>02:29:13.093 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d181a0bf-886a-4340-a7b8-31e1c8f3239a/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:13.644 response time in milliseconds: 551.24
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:13 GMT
4 &lt; Etag: &quot;92be2c83e50ed7e7d55805c2ff47a531-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:12 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A083CA1990DC
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-42">
          <a>Doc string</a>
      </div>
      <div id="msg-42" class="collapse collapsable-details">
        <pre>02:29:13.646 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-43">
          <a>Doc string</a>
      </div>
      <div id="msg-43" class="collapse collapsable-details">
        <pre>02:29:13.646 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d181a0bf-886a-4340-a7b8-31e1c8f3239a/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-44">
          <a>Doc string</a>
      </div>
      <div id="msg-44" class="collapse collapsable-details">
        <pre>02:29:13.647 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[3] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-45">
          <a>Doc string</a>
      </div>
      <div id="msg-45" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-46">
          <a>Doc string</a>
      </div>
      <div id="msg-46" class="collapse collapsable-details">
        <pre>02:29:13.662 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.525</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-47">
          <a>Doc string</a>
      </div>
      <div id="msg-47" class="collapse collapsable-details">
        <pre>02:29:13.676 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:14.187 response time in milliseconds: 510.25
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:14 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/2a6fc076-9af3-4090-69a3-d2b80d96a505/status&quot;}},&quot;downloadRequestId&quot;:&quot;2a6fc076-9af3-4090-69a3-d2b80d96a505&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-48">
          <a>Doc string</a>
      </div>
      <div id="msg-48" class="collapse collapsable-details">
        <pre>02:29:14.190 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-49">
          <a>Doc string</a>
      </div>
      <div id="msg-49" class="collapse collapsable-details">
        <pre>02:29:14.190 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2a6fc076-9af3-4090-69a3-d2b80d96a505/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.503</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-50">
          <a>Doc string</a>
      </div>
      <div id="msg-50" class="collapse collapsable-details">
        <pre>02:29:14.191 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2a6fc076-9af3-4090-69a3-d2b80d96a505/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:14.694 response time in milliseconds: 502.31
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:14 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/64037bcb-8b3f-42e7-9791-895c7d2678df/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.511</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-51">
          <a>Doc string</a>
      </div>
      <div id="msg-51" class="collapse collapsable-details">
        <pre>02:29:14.695 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2a6fc076-9af3-4090-69a3-d2b80d96a505/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:15.204 response time in milliseconds: 507.70
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:15 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/64037bcb-8b3f-42e7-9791-895c7d2678df/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-52">
          <a>Doc string</a>
      </div>
      <div id="msg-52" class="collapse collapsable-details">
        <pre>02:29:15.207 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/64037bcb-8b3f-42e7-9791-895c7d2678df/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.507</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-53">
          <a>Doc string</a>
      </div>
      <div id="msg-53" class="collapse collapsable-details">
        <pre>02:29:15.216 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/64037bcb-8b3f-42e7-9791-895c7d2678df/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:15.721 response time in milliseconds: 499.50
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 648
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:15 GMT
4 &lt; Etag: &quot;a3af6f222dd0398d318456bfd9ef0e84-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:14 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0844640A9FB
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-54">
          <a>Doc string</a>
      </div>
      <div id="msg-54" class="collapse collapsable-details">
        <pre>02:29:15.723 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-55">
          <a>Doc string</a>
      </div>
      <div id="msg-55" class="collapse collapsable-details">
        <pre>02:29:15.723 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/64037bcb-8b3f-42e7-9791-895c7d2678df/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-56">
          <a>Doc string</a>
      </div>
      <div id="msg-56" class="collapse collapsable-details">
        <pre>02:29:15.724 [print] size 648</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[4] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-57">
          <a>Doc string</a>
      </div>
      <div id="msg-57" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-58">
          <a>Doc string</a>
      </div>
      <div id="msg-58" class="collapse collapsable-details">
        <pre>02:29:15.736 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.511</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-59">
          <a>Doc string</a>
      </div>
      <div id="msg-59" class="collapse collapsable-details">
        <pre>02:29:15.739 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:16.248 response time in milliseconds: 508.54
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:16 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/1098e73a-b6e5-4994-7de0-95f250075427/status&quot;}},&quot;downloadRequestId&quot;:&quot;1098e73a-b6e5-4994-7de0-95f250075427&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-60">
          <a>Doc string</a>
      </div>
      <div id="msg-60" class="collapse collapsable-details">
        <pre>02:29:16.250 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-61">
          <a>Doc string</a>
      </div>
      <div id="msg-61" class="collapse collapsable-details">
        <pre>02:29:16.250 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/1098e73a-b6e5-4994-7de0-95f250075427/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.492</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-62">
          <a>Doc string</a>
      </div>
      <div id="msg-62" class="collapse collapsable-details">
        <pre>02:29:16.251 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/1098e73a-b6e5-4994-7de0-95f250075427/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:16.740 response time in milliseconds: 488.81
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:16 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/8955f067-2a39-40a6-98b3-2bca0134d921/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.505</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-63">
          <a>Doc string</a>
      </div>
      <div id="msg-63" class="collapse collapsable-details">
        <pre>02:29:16.744 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/1098e73a-b6e5-4994-7de0-95f250075427/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:17.248 response time in milliseconds: 503.66
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:17 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/8955f067-2a39-40a6-98b3-2bca0134d921/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-64">
          <a>Doc string</a>
      </div>
      <div id="msg-64" class="collapse collapsable-details">
        <pre>02:29:17.250 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/8955f067-2a39-40a6-98b3-2bca0134d921/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.530</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-65">
          <a>Doc string</a>
      </div>
      <div id="msg-65" class="collapse collapsable-details">
        <pre>02:29:17.252 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/8955f067-2a39-40a6-98b3-2bca0134d921/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:17.781 response time in milliseconds: 528.70
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 646
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:17 GMT
4 &lt; Etag: &quot;adccec1203fc01c85380595b5fd92660-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:16 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A084BFA160D7
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-66">
          <a>Doc string</a>
      </div>
      <div id="msg-66" class="collapse collapsable-details">
        <pre>02:29:17.782 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-67">
          <a>Doc string</a>
      </div>
      <div id="msg-67" class="collapse collapsable-details">
        <pre>02:29:17.783 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/8955f067-2a39-40a6-98b3-2bca0134d921/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-68">
          <a>Doc string</a>
      </div>
      <div id="msg-68" class="collapse collapsable-details">
        <pre>02:29:17.783 [print] size 646</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[5] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-69">
          <a>Doc string</a>
      </div>
      <div id="msg-69" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-70">
          <a>Doc string</a>
      </div>
      <div id="msg-70" class="collapse collapsable-details">
        <pre>02:29:17.802 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.880</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-71">
          <a>Doc string</a>
      </div>
      <div id="msg-71" class="collapse collapsable-details">
        <pre>02:29:17.803 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:19.682 response time in milliseconds: 1878.50
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:19 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/6e498fd5-2dd6-4806-7b62-78995ab74be3/status&quot;}},&quot;downloadRequestId&quot;:&quot;6e498fd5-2dd6-4806-7b62-78995ab74be3&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-72">
          <a>Doc string</a>
      </div>
      <div id="msg-72" class="collapse collapsable-details">
        <pre>02:29:19.684 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-73">
          <a>Doc string</a>
      </div>
      <div id="msg-73" class="collapse collapsable-details">
        <pre>02:29:19.685 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/6e498fd5-2dd6-4806-7b62-78995ab74be3/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-74">
          <a>Doc string</a>
      </div>
      <div id="msg-74" class="collapse collapsable-details">
        <pre>02:29:19.686 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/6e498fd5-2dd6-4806-7b62-78995ab74be3/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:20.178 response time in milliseconds: 491.77
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:20 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e80f0dec-5fe0-4d14-b24e-1723821ae3e3/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.511</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-75">
          <a>Doc string</a>
      </div>
      <div id="msg-75" class="collapse collapsable-details">
        <pre>02:29:20.179 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/6e498fd5-2dd6-4806-7b62-78995ab74be3/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:20.689 response time in milliseconds: 509.63
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:20 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e80f0dec-5fe0-4d14-b24e-1723821ae3e3/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-76">
          <a>Doc string</a>
      </div>
      <div id="msg-76" class="collapse collapsable-details">
        <pre>02:29:20.690 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/e80f0dec-5fe0-4d14-b24e-1723821ae3e3/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.507</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-77">
          <a>Doc string</a>
      </div>
      <div id="msg-77" class="collapse collapsable-details">
        <pre>02:29:20.692 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e80f0dec-5fe0-4d14-b24e-1723821ae3e3/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:21.199 response time in milliseconds: 506.78
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:21 GMT
4 &lt; Etag: &quot;dc67a4a81b65cbea52533484f8ed1073-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:19 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0858D682BD9
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-78">
          <a>Doc string</a>
      </div>
      <div id="msg-78" class="collapse collapsable-details">
        <pre>02:29:21.210 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-79">
          <a>Doc string</a>
      </div>
      <div id="msg-79" class="collapse collapsable-details">
        <pre>02:29:21.210 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e80f0dec-5fe0-4d14-b24e-1723821ae3e3/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-80">
          <a>Doc string</a>
      </div>
      <div id="msg-80" class="collapse collapsable-details">
        <pre>02:29:21.211 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[6] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-81">
          <a>Doc string</a>
      </div>
      <div id="msg-81" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-82">
          <a>Doc string</a>
      </div>
      <div id="msg-82" class="collapse collapsable-details">
        <pre>02:29:21.222 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.496</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-83">
          <a>Doc string</a>
      </div>
      <div id="msg-83" class="collapse collapsable-details">
        <pre>02:29:21.234 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:21.719 response time in milliseconds: 484.22
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:21 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/1e1688fb-fb99-4bed-7fe3-215d327afcec/status&quot;}},&quot;downloadRequestId&quot;:&quot;1e1688fb-fb99-4bed-7fe3-215d327afcec&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-84">
          <a>Doc string</a>
      </div>
      <div id="msg-84" class="collapse collapsable-details">
        <pre>02:29:21.725 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-85">
          <a>Doc string</a>
      </div>
      <div id="msg-85" class="collapse collapsable-details">
        <pre>02:29:21.737 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/1e1688fb-fb99-4bed-7fe3-215d327afcec/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-86">
          <a>Doc string</a>
      </div>
      <div id="msg-86" class="collapse collapsable-details">
        <pre>02:29:21.748 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/1e1688fb-fb99-4bed-7fe3-215d327afcec/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:22.236 response time in milliseconds: 487.31
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:22 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/4af853bb-59e0-4dca-a906-af1ec1b2eb04/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.506</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-87">
          <a>Doc string</a>
      </div>
      <div id="msg-87" class="collapse collapsable-details">
        <pre>02:29:22.237 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/1e1688fb-fb99-4bed-7fe3-215d327afcec/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:22.736 response time in milliseconds: 498.53
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:22 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/4af853bb-59e0-4dca-a906-af1ec1b2eb04/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-88">
          <a>Doc string</a>
      </div>
      <div id="msg-88" class="collapse collapsable-details">
        <pre>02:29:22.743 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/4af853bb-59e0-4dca-a906-af1ec1b2eb04/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.575</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-89">
          <a>Doc string</a>
      </div>
      <div id="msg-89" class="collapse collapsable-details">
        <pre>02:29:22.746 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/4af853bb-59e0-4dca-a906-af1ec1b2eb04/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:23.321 response time in milliseconds: 574.51
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 648
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:23 GMT
4 &lt; Etag: &quot;bbda8b0a7d4d74afb54e7730469aec6f-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:22 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A086089861F9
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-90">
          <a>Doc string</a>
      </div>
      <div id="msg-90" class="collapse collapsable-details">
        <pre>02:29:23.327 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.011</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-91">
          <a>Doc string</a>
      </div>
      <div id="msg-91" class="collapse collapsable-details">
        <pre>02:29:23.339 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/4af853bb-59e0-4dca-a906-af1ec1b2eb04/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-92">
          <a>Doc string</a>
      </div>
      <div id="msg-92" class="collapse collapsable-details">
        <pre>02:29:23.339 [print] size 648</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[7] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-93">
          <a>Doc string</a>
      </div>
      <div id="msg-93" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-94">
          <a>Doc string</a>
      </div>
      <div id="msg-94" class="collapse collapsable-details">
        <pre>02:29:23.354 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-95">
          <a>Doc string</a>
      </div>
      <div id="msg-95" class="collapse collapsable-details">
        <pre>02:29:23.357 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:23.857 response time in milliseconds: 500.07
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:23 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/ec52537d-7df0-4a20-7a78-b8b6a961fe92/status&quot;}},&quot;downloadRequestId&quot;:&quot;ec52537d-7df0-4a20-7a78-b8b6a961fe92&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-96">
          <a>Doc string</a>
      </div>
      <div id="msg-96" class="collapse collapsable-details">
        <pre>02:29:23.861 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-97">
          <a>Doc string</a>
      </div>
      <div id="msg-97" class="collapse collapsable-details">
        <pre>02:29:23.868 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ec52537d-7df0-4a20-7a78-b8b6a961fe92/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-98">
          <a>Doc string</a>
      </div>
      <div id="msg-98" class="collapse collapsable-details">
        <pre>02:29:23.869 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ec52537d-7df0-4a20-7a78-b8b6a961fe92/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:24.363 response time in milliseconds: 493.06
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:24 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/bd60ac74-563e-4632-a8aa-faeb82f683bd/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-99">
          <a>Doc string</a>
      </div>
      <div id="msg-99" class="collapse collapsable-details">
        <pre>02:29:24.364 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ec52537d-7df0-4a20-7a78-b8b6a961fe92/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:24.855 response time in milliseconds: 489.99
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:24 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/bd60ac74-563e-4632-a8aa-faeb82f683bd/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-100">
          <a>Doc string</a>
      </div>
      <div id="msg-100" class="collapse collapsable-details">
        <pre>02:29:24.865 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/bd60ac74-563e-4632-a8aa-faeb82f683bd/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.605</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-101">
          <a>Doc string</a>
      </div>
      <div id="msg-101" class="collapse collapsable-details">
        <pre>02:29:24.875 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/bd60ac74-563e-4632-a8aa-faeb82f683bd/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:25.474 response time in milliseconds: 598.85
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:25 GMT
4 &lt; Etag: &quot;9ec220cfb43dd890bb2e210a7eca439e-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:23 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0868BB30760
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-102">
          <a>Doc string</a>
      </div>
      <div id="msg-102" class="collapse collapsable-details">
        <pre>02:29:25.486 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-103">
          <a>Doc string</a>
      </div>
      <div id="msg-103" class="collapse collapsable-details">
        <pre>02:29:25.489 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/bd60ac74-563e-4632-a8aa-faeb82f683bd/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-104">
          <a>Doc string</a>
      </div>
      <div id="msg-104" class="collapse collapsable-details">
        <pre>02:29:25.491 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[8] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-105">
          <a>Doc string</a>
      </div>
      <div id="msg-105" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-106">
          <a>Doc string</a>
      </div>
      <div id="msg-106" class="collapse collapsable-details">
        <pre>02:29:25.505 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-107">
          <a>Doc string</a>
      </div>
      <div id="msg-107" class="collapse collapsable-details">
        <pre>02:29:25.510 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:26.000 response time in milliseconds: 490.30
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:25 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/f998b70e-8e05-44b7-7998-ead8574592bb/status&quot;}},&quot;downloadRequestId&quot;:&quot;f998b70e-8e05-44b7-7998-ead8574592bb&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-108">
          <a>Doc string</a>
      </div>
      <div id="msg-108" class="collapse collapsable-details">
        <pre>02:29:26.002 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-109">
          <a>Doc string</a>
      </div>
      <div id="msg-109" class="collapse collapsable-details">
        <pre>02:29:26.003 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f998b70e-8e05-44b7-7998-ead8574592bb/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.487</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-110">
          <a>Doc string</a>
      </div>
      <div id="msg-110" class="collapse collapsable-details">
        <pre>02:29:26.004 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f998b70e-8e05-44b7-7998-ead8574592bb/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:26.491 response time in milliseconds: 486.28
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:26 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3495b6c5-cefc-4cdb-bd06-0a42e8656f1c/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.525</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-111">
          <a>Doc string</a>
      </div>
      <div id="msg-111" class="collapse collapsable-details">
        <pre>02:29:26.499 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f998b70e-8e05-44b7-7998-ead8574592bb/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:27.017 response time in milliseconds: 517.68
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:26 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3495b6c5-cefc-4cdb-bd06-0a42e8656f1c/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-112">
          <a>Doc string</a>
      </div>
      <div id="msg-112" class="collapse collapsable-details">
        <pre>02:29:27.019 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/3495b6c5-cefc-4cdb-bd06-0a42e8656f1c/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.537</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-113">
          <a>Doc string</a>
      </div>
      <div id="msg-113" class="collapse collapsable-details">
        <pre>02:29:27.021 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3495b6c5-cefc-4cdb-bd06-0a42e8656f1c/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:27.556 response time in milliseconds: 534.79
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 649
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:27 GMT
4 &lt; Etag: &quot;148536b4e63d01a35e6bc88e541de8f4-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:26 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08707F16938
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-114">
          <a>Doc string</a>
      </div>
      <div id="msg-114" class="collapse collapsable-details">
        <pre>02:29:27.558 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-115">
          <a>Doc string</a>
      </div>
      <div id="msg-115" class="collapse collapsable-details">
        <pre>02:29:27.559 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3495b6c5-cefc-4cdb-bd06-0a42e8656f1c/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-116">
          <a>Doc string</a>
      </div>
      <div id="msg-116" class="collapse collapsable-details">
        <pre>02:29:27.559 [print] size 649</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[9] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-117">
          <a>Doc string</a>
      </div>
      <div id="msg-117" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-118">
          <a>Doc string</a>
      </div>
      <div id="msg-118" class="collapse collapsable-details">
        <pre>02:29:27.564 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.518</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-119">
          <a>Doc string</a>
      </div>
      <div id="msg-119" class="collapse collapsable-details">
        <pre>02:29:27.565 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:28.083 response time in milliseconds: 516.62
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:28 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/8b8bc3a2-2af3-4e7b-62fa-3c3a3ad4a5db/status&quot;}},&quot;downloadRequestId&quot;:&quot;8b8bc3a2-2af3-4e7b-62fa-3c3a3ad4a5db&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-120">
          <a>Doc string</a>
      </div>
      <div id="msg-120" class="collapse collapsable-details">
        <pre>02:29:28.087 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-121">
          <a>Doc string</a>
      </div>
      <div id="msg-121" class="collapse collapsable-details">
        <pre>02:29:28.092 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/8b8bc3a2-2af3-4e7b-62fa-3c3a3ad4a5db/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.545</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-122">
          <a>Doc string</a>
      </div>
      <div id="msg-122" class="collapse collapsable-details">
        <pre>02:29:28.100 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/8b8bc3a2-2af3-4e7b-62fa-3c3a3ad4a5db/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:28.638 response time in milliseconds: 537.79
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:28 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3a4dd7ff-3f43-4d3a-bca5-43ca354b9d9f/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.483</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-123">
          <a>Doc string</a>
      </div>
      <div id="msg-123" class="collapse collapsable-details">
        <pre>02:29:28.639 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/8b8bc3a2-2af3-4e7b-62fa-3c3a3ad4a5db/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:29.122 response time in milliseconds: 482.46
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:29 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3a4dd7ff-3f43-4d3a-bca5-43ca354b9d9f/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-124">
          <a>Doc string</a>
      </div>
      <div id="msg-124" class="collapse collapsable-details">
        <pre>02:29:29.123 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/3a4dd7ff-3f43-4d3a-bca5-43ca354b9d9f/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.541</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-125">
          <a>Doc string</a>
      </div>
      <div id="msg-125" class="collapse collapsable-details">
        <pre>02:29:29.124 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3a4dd7ff-3f43-4d3a-bca5-43ca354b9d9f/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:29.665 response time in milliseconds: 540.17
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 645
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:29 GMT
4 &lt; Etag: &quot;18e51b9bdb78075877a878a25b377209-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:28 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08784137CA7
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-126">
          <a>Doc string</a>
      </div>
      <div id="msg-126" class="collapse collapsable-details">
        <pre>02:29:29.665 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-127">
          <a>Doc string</a>
      </div>
      <div id="msg-127" class="collapse collapsable-details">
        <pre>02:29:29.666 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3a4dd7ff-3f43-4d3a-bca5-43ca354b9d9f/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-128">
          <a>Doc string</a>
      </div>
      <div id="msg-128" class="collapse collapsable-details">
        <pre>02:29:29.666 [print] size 645</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[10] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-129">
          <a>Doc string</a>
      </div>
      <div id="msg-129" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-130">
          <a>Doc string</a>
      </div>
      <div id="msg-130" class="collapse collapsable-details">
        <pre>02:29:29.685 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.490</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-131">
          <a>Doc string</a>
      </div>
      <div id="msg-131" class="collapse collapsable-details">
        <pre>02:29:29.688 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:30.175 response time in milliseconds: 486.28
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:30 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/ed07d173-2134-4ef5-5c18-58763ec09dae/status&quot;}},&quot;downloadRequestId&quot;:&quot;ed07d173-2134-4ef5-5c18-58763ec09dae&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-132">
          <a>Doc string</a>
      </div>
      <div id="msg-132" class="collapse collapsable-details">
        <pre>02:29:30.176 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-133">
          <a>Doc string</a>
      </div>
      <div id="msg-133" class="collapse collapsable-details">
        <pre>02:29:30.177 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ed07d173-2134-4ef5-5c18-58763ec09dae/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.631</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-134">
          <a>Doc string</a>
      </div>
      <div id="msg-134" class="collapse collapsable-details">
        <pre>02:29:30.178 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ed07d173-2134-4ef5-5c18-58763ec09dae/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:30.808 response time in milliseconds: 630.08
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:30 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/8e9030a9-a3fe-4063-a005-dd85ae31c2e0/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.546</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-135">
          <a>Doc string</a>
      </div>
      <div id="msg-135" class="collapse collapsable-details">
        <pre>02:29:30.809 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ed07d173-2134-4ef5-5c18-58763ec09dae/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:31.355 response time in milliseconds: 545.23
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:31 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/8e9030a9-a3fe-4063-a005-dd85ae31c2e0/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-136">
          <a>Doc string</a>
      </div>
      <div id="msg-136" class="collapse collapsable-details">
        <pre>02:29:31.356 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/8e9030a9-a3fe-4063-a005-dd85ae31c2e0/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.513</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-137">
          <a>Doc string</a>
      </div>
      <div id="msg-137" class="collapse collapsable-details">
        <pre>02:29:31.357 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/8e9030a9-a3fe-4063-a005-dd85ae31c2e0/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:31.869 response time in milliseconds: 512.26
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 648
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:31 GMT
4 &lt; Etag: &quot;5aac022dd4b540bb985b9d456ac242f9-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:30 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0880888D529
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-138">
          <a>Doc string</a>
      </div>
      <div id="msg-138" class="collapse collapsable-details">
        <pre>02:29:31.870 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.016</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-139">
          <a>Doc string</a>
      </div>
      <div id="msg-139" class="collapse collapsable-details">
        <pre>02:29:31.887 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/8e9030a9-a3fe-4063-a005-dd85ae31c2e0/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-140">
          <a>Doc string</a>
      </div>
      <div id="msg-140" class="collapse collapsable-details">
        <pre>02:29:31.887 [print] size 648</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[11] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-141">
          <a>Doc string</a>
      </div>
      <div id="msg-141" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-142">
          <a>Doc string</a>
      </div>
      <div id="msg-142" class="collapse collapsable-details">
        <pre>02:29:31.897 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.505</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-143">
          <a>Doc string</a>
      </div>
      <div id="msg-143" class="collapse collapsable-details">
        <pre>02:29:31.900 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:32.403 response time in milliseconds: 502.52
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:32 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/3215fdce-0ecc-44fb-5c2c-514f338946b9/status&quot;}},&quot;downloadRequestId&quot;:&quot;3215fdce-0ecc-44fb-5c2c-514f338946b9&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-144">
          <a>Doc string</a>
      </div>
      <div id="msg-144" class="collapse collapsable-details">
        <pre>02:29:32.404 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-145">
          <a>Doc string</a>
      </div>
      <div id="msg-145" class="collapse collapsable-details">
        <pre>02:29:32.405 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3215fdce-0ecc-44fb-5c2c-514f338946b9/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-146">
          <a>Doc string</a>
      </div>
      <div id="msg-146" class="collapse collapsable-details">
        <pre>02:29:32.406 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3215fdce-0ecc-44fb-5c2c-514f338946b9/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:32.899 response time in milliseconds: 493.42
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:32 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e674f245-5755-4260-99b4-32d2e7d133d6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.495</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-147">
          <a>Doc string</a>
      </div>
      <div id="msg-147" class="collapse collapsable-details">
        <pre>02:29:32.900 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3215fdce-0ecc-44fb-5c2c-514f338946b9/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:33.395 response time in milliseconds: 494.20
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:33 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e674f245-5755-4260-99b4-32d2e7d133d6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-148">
          <a>Doc string</a>
      </div>
      <div id="msg-148" class="collapse collapsable-details">
        <pre>02:29:33.396 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/e674f245-5755-4260-99b4-32d2e7d133d6/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.507</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-149">
          <a>Doc string</a>
      </div>
      <div id="msg-149" class="collapse collapsable-details">
        <pre>02:29:33.397 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e674f245-5755-4260-99b4-32d2e7d133d6/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:33.905 response time in milliseconds: 506.99
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 12062
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:33 GMT
4 &lt; Etag: &quot;6e8415e0e940d65a3873fa1a7f9643b6-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:32 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0888218B275
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-150">
          <a>Doc string</a>
      </div>
      <div id="msg-150" class="collapse collapsable-details">
        <pre>02:29:33.905 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-151">
          <a>Doc string</a>
      </div>
      <div id="msg-151" class="collapse collapsable-details">
        <pre>02:29:33.912 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e674f245-5755-4260-99b4-32d2e7d133d6/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-152">
          <a>Doc string</a>
      </div>
      <div id="msg-152" class="collapse collapsable-details">
        <pre>02:29:33.913 [print] size 12062</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[12] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-153">
          <a>Doc string</a>
      </div>
      <div id="msg-153" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-154">
          <a>Doc string</a>
      </div>
      <div id="msg-154" class="collapse collapsable-details">
        <pre>02:29:33.919 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.584</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-155">
          <a>Doc string</a>
      </div>
      <div id="msg-155" class="collapse collapsable-details">
        <pre>02:29:33.923 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:35.503 response time in milliseconds: 1579.89
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:35 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/2b72365b-f226-489d-74c6-fa97bc1eb245/status&quot;}},&quot;downloadRequestId&quot;:&quot;2b72365b-f226-489d-74c6-fa97bc1eb245&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-156">
          <a>Doc string</a>
      </div>
      <div id="msg-156" class="collapse collapsable-details">
        <pre>02:29:35.505 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-157">
          <a>Doc string</a>
      </div>
      <div id="msg-157" class="collapse collapsable-details">
        <pre>02:29:35.506 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2b72365b-f226-489d-74c6-fa97bc1eb245/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.484</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-158">
          <a>Doc string</a>
      </div>
      <div id="msg-158" class="collapse collapsable-details">
        <pre>02:29:35.507 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2b72365b-f226-489d-74c6-fa97bc1eb245/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:35.990 response time in milliseconds: 483.39
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:35 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/57854703-b5fd-45fd-b400-4d78cf263291/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-159">
          <a>Doc string</a>
      </div>
      <div id="msg-159" class="collapse collapsable-details">
        <pre>02:29:35.991 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2b72365b-f226-489d-74c6-fa97bc1eb245/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:36.480 response time in milliseconds: 488.33
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:36 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/57854703-b5fd-45fd-b400-4d78cf263291/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-160">
          <a>Doc string</a>
      </div>
      <div id="msg-160" class="collapse collapsable-details">
        <pre>02:29:36.484 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/57854703-b5fd-45fd-b400-4d78cf263291/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.513</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-161">
          <a>Doc string</a>
      </div>
      <div id="msg-161" class="collapse collapsable-details">
        <pre>02:29:36.485 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/57854703-b5fd-45fd-b400-4d78cf263291/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:36.998 response time in milliseconds: 512.66
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:36 GMT
4 &lt; Etag: &quot;78b04ed2ab8b9dffa9e1df5e881ce6b2-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:35 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08939F89C73
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-162">
          <a>Doc string</a>
      </div>
      <div id="msg-162" class="collapse collapsable-details">
        <pre>02:29:37.000 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-163">
          <a>Doc string</a>
      </div>
      <div id="msg-163" class="collapse collapsable-details">
        <pre>02:29:37.000 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/57854703-b5fd-45fd-b400-4d78cf263291/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-164">
          <a>Doc string</a>
      </div>
      <div id="msg-164" class="collapse collapsable-details">
        <pre>02:29:37.002 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[13] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-165">
          <a>Doc string</a>
      </div>
      <div id="msg-165" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-166">
          <a>Doc string</a>
      </div>
      <div id="msg-166" class="collapse collapsable-details">
        <pre>02:29:37.012 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.511</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-167">
          <a>Doc string</a>
      </div>
      <div id="msg-167" class="collapse collapsable-details">
        <pre>02:29:37.014 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:37.523 response time in milliseconds: 508.16
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:37 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/7248926a-2fc4-472f-47ce-281b5cf3daa7/status&quot;}},&quot;downloadRequestId&quot;:&quot;7248926a-2fc4-472f-47ce-281b5cf3daa7&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-168">
          <a>Doc string</a>
      </div>
      <div id="msg-168" class="collapse collapsable-details">
        <pre>02:29:37.530 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-169">
          <a>Doc string</a>
      </div>
      <div id="msg-169" class="collapse collapsable-details">
        <pre>02:29:37.530 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7248926a-2fc4-472f-47ce-281b5cf3daa7/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.487</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-170">
          <a>Doc string</a>
      </div>
      <div id="msg-170" class="collapse collapsable-details">
        <pre>02:29:37.531 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7248926a-2fc4-472f-47ce-281b5cf3daa7/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:38.017 response time in milliseconds: 485.69
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:37 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/47ab3b40-517c-4174-8fab-d7e82e034c91/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.512</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-171">
          <a>Doc string</a>
      </div>
      <div id="msg-171" class="collapse collapsable-details">
        <pre>02:29:38.021 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7248926a-2fc4-472f-47ce-281b5cf3daa7/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:38.529 response time in milliseconds: 508.14
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:38 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/47ab3b40-517c-4174-8fab-d7e82e034c91/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-172">
          <a>Doc string</a>
      </div>
      <div id="msg-172" class="collapse collapsable-details">
        <pre>02:29:38.530 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/47ab3b40-517c-4174-8fab-d7e82e034c91/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.505</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-173">
          <a>Doc string</a>
      </div>
      <div id="msg-173" class="collapse collapsable-details">
        <pre>02:29:38.531 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/47ab3b40-517c-4174-8fab-d7e82e034c91/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:39.035 response time in milliseconds: 503.99
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:38 GMT
4 &lt; Etag: &quot;a25a0dbd96d79fd305a5d83a8c9e8991-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:37 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A089B4101D7A
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-174">
          <a>Doc string</a>
      </div>
      <div id="msg-174" class="collapse collapsable-details">
        <pre>02:29:39.036 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-175">
          <a>Doc string</a>
      </div>
      <div id="msg-175" class="collapse collapsable-details">
        <pre>02:29:39.037 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/47ab3b40-517c-4174-8fab-d7e82e034c91/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-176">
          <a>Doc string</a>
      </div>
      <div id="msg-176" class="collapse collapsable-details">
        <pre>02:29:39.043 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[14] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-177">
          <a>Doc string</a>
      </div>
      <div id="msg-177" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-178">
          <a>Doc string</a>
      </div>
      <div id="msg-178" class="collapse collapsable-details">
        <pre>02:29:39.050 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-179">
          <a>Doc string</a>
      </div>
      <div id="msg-179" class="collapse collapsable-details">
        <pre>02:29:39.054 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:39.539 response time in milliseconds: 484.32
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:39 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/e9ae0160-6d1b-4ea2-53c7-b66ebdc24030/status&quot;}},&quot;downloadRequestId&quot;:&quot;e9ae0160-6d1b-4ea2-53c7-b66ebdc24030&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-180">
          <a>Doc string</a>
      </div>
      <div id="msg-180" class="collapse collapsable-details">
        <pre>02:29:39.540 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-181">
          <a>Doc string</a>
      </div>
      <div id="msg-181" class="collapse collapsable-details">
        <pre>02:29:39.540 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e9ae0160-6d1b-4ea2-53c7-b66ebdc24030/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.506</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-182">
          <a>Doc string</a>
      </div>
      <div id="msg-182" class="collapse collapsable-details">
        <pre>02:29:39.541 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e9ae0160-6d1b-4ea2-53c7-b66ebdc24030/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:40.046 response time in milliseconds: 505.06
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:39 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/91c3f7c6-cc2d-4407-9c50-e535ee8e7392/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.505</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-183">
          <a>Doc string</a>
      </div>
      <div id="msg-183" class="collapse collapsable-details">
        <pre>02:29:40.047 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e9ae0160-6d1b-4ea2-53c7-b66ebdc24030/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:40.551 response time in milliseconds: 503.86
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:40 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/91c3f7c6-cc2d-4407-9c50-e535ee8e7392/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-184">
          <a>Doc string</a>
      </div>
      <div id="msg-184" class="collapse collapsable-details">
        <pre>02:29:40.556 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/91c3f7c6-cc2d-4407-9c50-e535ee8e7392/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.492</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-185">
          <a>Doc string</a>
      </div>
      <div id="msg-185" class="collapse collapsable-details">
        <pre>02:29:40.557 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/91c3f7c6-cc2d-4407-9c50-e535ee8e7392/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:41.048 response time in milliseconds: 491.05
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 646
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:40 GMT
4 &lt; Etag: &quot;8b990ce3263c1e70d0728bec9587e057-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:39 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08A2CC6C67E
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-186">
          <a>Doc string</a>
      </div>
      <div id="msg-186" class="collapse collapsable-details">
        <pre>02:29:41.055 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-187">
          <a>Doc string</a>
      </div>
      <div id="msg-187" class="collapse collapsable-details">
        <pre>02:29:41.056 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/91c3f7c6-cc2d-4407-9c50-e535ee8e7392/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-188">
          <a>Doc string</a>
      </div>
      <div id="msg-188" class="collapse collapsable-details">
        <pre>02:29:41.057 [print] size 646</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[15] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-189">
          <a>Doc string</a>
      </div>
      <div id="msg-189" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-190">
          <a>Doc string</a>
      </div>
      <div id="msg-190" class="collapse collapsable-details">
        <pre>02:29:41.061 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-191">
          <a>Doc string</a>
      </div>
      <div id="msg-191" class="collapse collapsable-details">
        <pre>02:29:41.064 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:41.555 response time in milliseconds: 490.55
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:41 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/3969a179-fc1d-4e9d-740e-e29a23b606ea/status&quot;}},&quot;downloadRequestId&quot;:&quot;3969a179-fc1d-4e9d-740e-e29a23b606ea&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-192">
          <a>Doc string</a>
      </div>
      <div id="msg-192" class="collapse collapsable-details">
        <pre>02:29:41.561 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-193">
          <a>Doc string</a>
      </div>
      <div id="msg-193" class="collapse collapsable-details">
        <pre>02:29:41.562 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3969a179-fc1d-4e9d-740e-e29a23b606ea/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.495</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-194">
          <a>Doc string</a>
      </div>
      <div id="msg-194" class="collapse collapsable-details">
        <pre>02:29:41.563 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3969a179-fc1d-4e9d-740e-e29a23b606ea/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:42.057 response time in milliseconds: 488.01
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:41 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/7904a36b-92ae-4c62-934b-ad6d6d05ea32/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.507</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-195">
          <a>Doc string</a>
      </div>
      <div id="msg-195" class="collapse collapsable-details">
        <pre>02:29:42.061 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3969a179-fc1d-4e9d-740e-e29a23b606ea/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:42.564 response time in milliseconds: 503.05
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:42 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/7904a36b-92ae-4c62-934b-ad6d6d05ea32/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-196">
          <a>Doc string</a>
      </div>
      <div id="msg-196" class="collapse collapsable-details">
        <pre>02:29:42.568 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/7904a36b-92ae-4c62-934b-ad6d6d05ea32/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.528</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-197">
          <a>Doc string</a>
      </div>
      <div id="msg-197" class="collapse collapsable-details">
        <pre>02:29:42.571 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/7904a36b-92ae-4c62-934b-ad6d6d05ea32/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:43.097 response time in milliseconds: 525.62
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:43 GMT
4 &lt; Etag: &quot;417007145eab17996b2c8150bddb2829-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:41 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08AA6696E0B
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.009</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-198">
          <a>Doc string</a>
      </div>
      <div id="msg-198" class="collapse collapsable-details">
        <pre>02:29:43.110 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-199">
          <a>Doc string</a>
      </div>
      <div id="msg-199" class="collapse collapsable-details">
        <pre>02:29:43.111 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/7904a36b-92ae-4c62-934b-ad6d6d05ea32/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-200">
          <a>Doc string</a>
      </div>
      <div id="msg-200" class="collapse collapsable-details">
        <pre>02:29:43.112 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[16] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-201">
          <a>Doc string</a>
      </div>
      <div id="msg-201" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-202">
          <a>Doc string</a>
      </div>
      <div id="msg-202" class="collapse collapsable-details">
        <pre>02:29:43.119 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.594</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-203">
          <a>Doc string</a>
      </div>
      <div id="msg-203" class="collapse collapsable-details">
        <pre>02:29:43.124 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:44.715 response time in milliseconds: 1590.77
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:44 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/d58f4161-d662-4290-7f42-71bb24c40146/status&quot;}},&quot;downloadRequestId&quot;:&quot;d58f4161-d662-4290-7f42-71bb24c40146&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-204">
          <a>Doc string</a>
      </div>
      <div id="msg-204" class="collapse collapsable-details">
        <pre>02:29:44.722 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-205">
          <a>Doc string</a>
      </div>
      <div id="msg-205" class="collapse collapsable-details">
        <pre>02:29:44.722 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/d58f4161-d662-4290-7f42-71bb24c40146/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.564</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-206">
          <a>Doc string</a>
      </div>
      <div id="msg-206" class="collapse collapsable-details">
        <pre>02:29:44.723 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/d58f4161-d662-4290-7f42-71bb24c40146/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:45.287 response time in milliseconds: 563.37
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:45 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/8976d67b-8b75-47ec-947b-5387760471bf/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.514</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-207">
          <a>Doc string</a>
      </div>
      <div id="msg-207" class="collapse collapsable-details">
        <pre>02:29:45.288 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/d58f4161-d662-4290-7f42-71bb24c40146/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:45.798 response time in milliseconds: 509.67
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:45 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/8976d67b-8b75-47ec-947b-5387760471bf/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-208">
          <a>Doc string</a>
      </div>
      <div id="msg-208" class="collapse collapsable-details">
        <pre>02:29:45.802 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/8976d67b-8b75-47ec-947b-5387760471bf/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.522</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-209">
          <a>Doc string</a>
      </div>
      <div id="msg-209" class="collapse collapsable-details">
        <pre>02:29:45.803 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/8976d67b-8b75-47ec-947b-5387760471bf/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:46.325 response time in milliseconds: 521.31
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:46 GMT
4 &lt; Etag: &quot;b6d54bba3957ba4f26283dd007c58bdf-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:45 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08B65E6B09F
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-210">
          <a>Doc string</a>
      </div>
      <div id="msg-210" class="collapse collapsable-details">
        <pre>02:29:46.331 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-211">
          <a>Doc string</a>
      </div>
      <div id="msg-211" class="collapse collapsable-details">
        <pre>02:29:46.332 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/8976d67b-8b75-47ec-947b-5387760471bf/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-212">
          <a>Doc string</a>
      </div>
      <div id="msg-212" class="collapse collapsable-details">
        <pre>02:29:46.332 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[17] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-213">
          <a>Doc string</a>
      </div>
      <div id="msg-213" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-214">
          <a>Doc string</a>
      </div>
      <div id="msg-214" class="collapse collapsable-details">
        <pre>02:29:46.336 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-215">
          <a>Doc string</a>
      </div>
      <div id="msg-215" class="collapse collapsable-details">
        <pre>02:29:46.337 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:46.830 response time in milliseconds: 492.69
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:46 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/9a2cc01b-05a4-4ec7-5cae-bec5c851e595/status&quot;}},&quot;downloadRequestId&quot;:&quot;9a2cc01b-05a4-4ec7-5cae-bec5c851e595&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-216">
          <a>Doc string</a>
      </div>
      <div id="msg-216" class="collapse collapsable-details">
        <pre>02:29:46.831 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-217">
          <a>Doc string</a>
      </div>
      <div id="msg-217" class="collapse collapsable-details">
        <pre>02:29:46.831 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/9a2cc01b-05a4-4ec7-5cae-bec5c851e595/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.566</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-218">
          <a>Doc string</a>
      </div>
      <div id="msg-218" class="collapse collapsable-details">
        <pre>02:29:46.832 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/9a2cc01b-05a4-4ec7-5cae-bec5c851e595/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:47.398 response time in milliseconds: 565.34
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:47 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/c1b29ad8-bbdc-4c8b-b9e7-b2f2f24f4aab/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.495</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-219">
          <a>Doc string</a>
      </div>
      <div id="msg-219" class="collapse collapsable-details">
        <pre>02:29:47.398 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/9a2cc01b-05a4-4ec7-5cae-bec5c851e595/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:47.889 response time in milliseconds: 490.59
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:47 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/c1b29ad8-bbdc-4c8b-b9e7-b2f2f24f4aab/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-220">
          <a>Doc string</a>
      </div>
      <div id="msg-220" class="collapse collapsable-details">
        <pre>02:29:47.893 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/c1b29ad8-bbdc-4c8b-b9e7-b2f2f24f4aab/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.532</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-221">
          <a>Doc string</a>
      </div>
      <div id="msg-221" class="collapse collapsable-details">
        <pre>02:29:47.895 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/c1b29ad8-bbdc-4c8b-b9e7-b2f2f24f4aab/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:48.426 response time in milliseconds: 530.31
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 648
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:48 GMT
4 &lt; Etag: &quot;6d57a6d0b095c73a38c1e5cb98bc89bf-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:46 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08BE27BFA03
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-222">
          <a>Doc string</a>
      </div>
      <div id="msg-222" class="collapse collapsable-details">
        <pre>02:29:48.429 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-223">
          <a>Doc string</a>
      </div>
      <div id="msg-223" class="collapse collapsable-details">
        <pre>02:29:48.429 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/c1b29ad8-bbdc-4c8b-b9e7-b2f2f24f4aab/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-224">
          <a>Doc string</a>
      </div>
      <div id="msg-224" class="collapse collapsable-details">
        <pre>02:29:48.429 [print] size 648</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[18] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-225">
          <a>Doc string</a>
      </div>
      <div id="msg-225" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-226">
          <a>Doc string</a>
      </div>
      <div id="msg-226" class="collapse collapsable-details">
        <pre>02:29:48.436 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.486</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-227">
          <a>Doc string</a>
      </div>
      <div id="msg-227" class="collapse collapsable-details">
        <pre>02:29:48.437 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:48.920 response time in milliseconds: 481.88
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:48 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/258a1bef-838d-425b-6cee-33aae50828f0/status&quot;}},&quot;downloadRequestId&quot;:&quot;258a1bef-838d-425b-6cee-33aae50828f0&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-228">
          <a>Doc string</a>
      </div>
      <div id="msg-228" class="collapse collapsable-details">
        <pre>02:29:48.924 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-229">
          <a>Doc string</a>
      </div>
      <div id="msg-229" class="collapse collapsable-details">
        <pre>02:29:48.926 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/258a1bef-838d-425b-6cee-33aae50828f0/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.483</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-230">
          <a>Doc string</a>
      </div>
      <div id="msg-230" class="collapse collapsable-details">
        <pre>02:29:48.929 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/258a1bef-838d-425b-6cee-33aae50828f0/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:49.410 response time in milliseconds: 480.98
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:49 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/837f44df-2ca7-49bb-95d6-f1421971aa99/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.499</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-231">
          <a>Doc string</a>
      </div>
      <div id="msg-231" class="collapse collapsable-details">
        <pre>02:29:49.412 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/258a1bef-838d-425b-6cee-33aae50828f0/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:49.910 response time in milliseconds: 497.93
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:49 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/837f44df-2ca7-49bb-95d6-f1421971aa99/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-232">
          <a>Doc string</a>
      </div>
      <div id="msg-232" class="collapse collapsable-details">
        <pre>02:29:49.910 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/837f44df-2ca7-49bb-95d6-f1421971aa99/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.499</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-233">
          <a>Doc string</a>
      </div>
      <div id="msg-233" class="collapse collapsable-details">
        <pre>02:29:49.911 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/837f44df-2ca7-49bb-95d6-f1421971aa99/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:50.410 response time in milliseconds: 498.88
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:50 GMT
4 &lt; Etag: &quot;f996ab173a9cc9b6e614d6241ebb36be-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:49 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08C5A4A0223
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-234">
          <a>Doc string</a>
      </div>
      <div id="msg-234" class="collapse collapsable-details">
        <pre>02:29:50.418 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-235">
          <a>Doc string</a>
      </div>
      <div id="msg-235" class="collapse collapsable-details">
        <pre>02:29:50.418 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/837f44df-2ca7-49bb-95d6-f1421971aa99/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-236">
          <a>Doc string</a>
      </div>
      <div id="msg-236" class="collapse collapsable-details">
        <pre>02:29:50.419 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[19] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-237">
          <a>Doc string</a>
      </div>
      <div id="msg-237" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-238">
          <a>Doc string</a>
      </div>
      <div id="msg-238" class="collapse collapsable-details">
        <pre>02:29:50.426 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.770</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-239">
          <a>Doc string</a>
      </div>
      <div id="msg-239" class="collapse collapsable-details">
        <pre>02:29:50.426 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:52.196 response time in milliseconds: 1768.98
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:52 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/db407a7d-08a4-4b73-50bf-655d3a551c17/status&quot;}},&quot;downloadRequestId&quot;:&quot;db407a7d-08a4-4b73-50bf-655d3a551c17&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-240">
          <a>Doc string</a>
      </div>
      <div id="msg-240" class="collapse collapsable-details">
        <pre>02:29:52.201 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-241">
          <a>Doc string</a>
      </div>
      <div id="msg-241" class="collapse collapsable-details">
        <pre>02:29:52.205 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/db407a7d-08a4-4b73-50bf-655d3a551c17/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-242">
          <a>Doc string</a>
      </div>
      <div id="msg-242" class="collapse collapsable-details">
        <pre>02:29:52.207 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/db407a7d-08a4-4b73-50bf-655d3a551c17/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:52.692 response time in milliseconds: 484.49
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:52 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e915dc7c-d20d-4dd0-aac0-10b57895dd5b/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.484</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-243">
          <a>Doc string</a>
      </div>
      <div id="msg-243" class="collapse collapsable-details">
        <pre>02:29:52.697 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/db407a7d-08a4-4b73-50bf-655d3a551c17/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:53.179 response time in milliseconds: 482.52
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:53 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e915dc7c-d20d-4dd0-aac0-10b57895dd5b/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-244">
          <a>Doc string</a>
      </div>
      <div id="msg-244" class="collapse collapsable-details">
        <pre>02:29:53.185 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/e915dc7c-d20d-4dd0-aac0-10b57895dd5b/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.008</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.503</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-245">
          <a>Doc string</a>
      </div>
      <div id="msg-245" class="collapse collapsable-details">
        <pre>02:29:53.194 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e915dc7c-d20d-4dd0-aac0-10b57895dd5b/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:53.696 response time in milliseconds: 501.47
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 3662
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:53 GMT
4 &lt; Etag: &quot;f5b6f691234ebd6eef6158db183ddde0-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:52 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08D1E669D43
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-246">
          <a>Doc string</a>
      </div>
      <div id="msg-246" class="collapse collapsable-details">
        <pre>02:29:53.701 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-247">
          <a>Doc string</a>
      </div>
      <div id="msg-247" class="collapse collapsable-details">
        <pre>02:29:53.707 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e915dc7c-d20d-4dd0-aac0-10b57895dd5b/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-248">
          <a>Doc string</a>
      </div>
      <div id="msg-248" class="collapse collapsable-details">
        <pre>02:29:53.708 [print] size 3662</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.014</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[20] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-249">
          <a>Doc string</a>
      </div>
      <div id="msg-249" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.008</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-250">
          <a>Doc string</a>
      </div>
      <div id="msg-250" class="collapse collapsable-details">
        <pre>02:29:53.747 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.490</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-251">
          <a>Doc string</a>
      </div>
      <div id="msg-251" class="collapse collapsable-details">
        <pre>02:29:53.753 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:54.239 response time in milliseconds: 484.98
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:54 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/b413d43b-48e0-42b3-6d4f-5e1204648950/status&quot;}},&quot;downloadRequestId&quot;:&quot;b413d43b-48e0-42b3-6d4f-5e1204648950&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-252">
          <a>Doc string</a>
      </div>
      <div id="msg-252" class="collapse collapsable-details">
        <pre>02:29:54.243 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-253">
          <a>Doc string</a>
      </div>
      <div id="msg-253" class="collapse collapsable-details">
        <pre>02:29:54.244 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/b413d43b-48e0-42b3-6d4f-5e1204648950/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.482</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-254">
          <a>Doc string</a>
      </div>
      <div id="msg-254" class="collapse collapsable-details">
        <pre>02:29:54.245 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/b413d43b-48e0-42b3-6d4f-5e1204648950/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:54.726 response time in milliseconds: 480.86
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:54 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/6d8a1322-819b-42ba-8114-f1a720b276d1/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-255">
          <a>Doc string</a>
      </div>
      <div id="msg-255" class="collapse collapsable-details">
        <pre>02:29:54.732 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/b413d43b-48e0-42b3-6d4f-5e1204648950/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:55.219 response time in milliseconds: 486.47
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:55 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/6d8a1322-819b-42ba-8114-f1a720b276d1/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-256">
          <a>Doc string</a>
      </div>
      <div id="msg-256" class="collapse collapsable-details">
        <pre>02:29:55.220 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/6d8a1322-819b-42ba-8114-f1a720b276d1/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.518</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-257">
          <a>Doc string</a>
      </div>
      <div id="msg-257" class="collapse collapsable-details">
        <pre>02:29:55.222 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/6d8a1322-819b-42ba-8114-f1a720b276d1/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:55.739 response time in milliseconds: 516.99
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:55 GMT
4 &lt; Etag: &quot;b32cda4760eafa078cc86bc60e0a9c51-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:54 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08D96FD1FAE
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-258">
          <a>Doc string</a>
      </div>
      <div id="msg-258" class="collapse collapsable-details">
        <pre>02:29:55.740 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-259">
          <a>Doc string</a>
      </div>
      <div id="msg-259" class="collapse collapsable-details">
        <pre>02:29:55.740 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/6d8a1322-819b-42ba-8114-f1a720b276d1/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-260">
          <a>Doc string</a>
      </div>
      <div id="msg-260" class="collapse collapsable-details">
        <pre>02:29:55.740 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.008</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[21] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-261">
          <a>Doc string</a>
      </div>
      <div id="msg-261" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-262">
          <a>Doc string</a>
      </div>
      <div id="msg-262" class="collapse collapsable-details">
        <pre>02:29:55.758 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.481</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-263">
          <a>Doc string</a>
      </div>
      <div id="msg-263" class="collapse collapsable-details">
        <pre>02:29:55.759 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:56.240 response time in milliseconds: 480.73
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:56 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/367ba3a6-75ea-4d8c-6139-aa6a51385e33/status&quot;}},&quot;downloadRequestId&quot;:&quot;367ba3a6-75ea-4d8c-6139-aa6a51385e33&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-264">
          <a>Doc string</a>
      </div>
      <div id="msg-264" class="collapse collapsable-details">
        <pre>02:29:56.241 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-265">
          <a>Doc string</a>
      </div>
      <div id="msg-265" class="collapse collapsable-details">
        <pre>02:29:56.241 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/367ba3a6-75ea-4d8c-6139-aa6a51385e33/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.480</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-266">
          <a>Doc string</a>
      </div>
      <div id="msg-266" class="collapse collapsable-details">
        <pre>02:29:56.242 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/367ba3a6-75ea-4d8c-6139-aa6a51385e33/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:56.722 response time in milliseconds: 479.93
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:56 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/6d5572b8-d4c5-4294-a299-01b8a5ae2090/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.492</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-267">
          <a>Doc string</a>
      </div>
      <div id="msg-267" class="collapse collapsable-details">
        <pre>02:29:56.729 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/367ba3a6-75ea-4d8c-6139-aa6a51385e33/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:57.209 response time in milliseconds: 479.40
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:57 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/6d5572b8-d4c5-4294-a299-01b8a5ae2090/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-268">
          <a>Doc string</a>
      </div>
      <div id="msg-268" class="collapse collapsable-details">
        <pre>02:29:57.216 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/6d5572b8-d4c5-4294-a299-01b8a5ae2090/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.495</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-269">
          <a>Doc string</a>
      </div>
      <div id="msg-269" class="collapse collapsable-details">
        <pre>02:29:57.218 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/6d5572b8-d4c5-4294-a299-01b8a5ae2090/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:57.711 response time in milliseconds: 493.25
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:57 GMT
4 &lt; Etag: &quot;219d99bea4564b3b6e1b3409cee9467a-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:56 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08E0DE42F02
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-270">
          <a>Doc string</a>
      </div>
      <div id="msg-270" class="collapse collapsable-details">
        <pre>02:29:57.713 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-271">
          <a>Doc string</a>
      </div>
      <div id="msg-271" class="collapse collapsable-details">
        <pre>02:29:57.713 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/6d5572b8-d4c5-4294-a299-01b8a5ae2090/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-272">
          <a>Doc string</a>
      </div>
      <div id="msg-272" class="collapse collapsable-details">
        <pre>02:29:57.714 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[22] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-273">
          <a>Doc string</a>
      </div>
      <div id="msg-273" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-274">
          <a>Doc string</a>
      </div>
      <div id="msg-274" class="collapse collapsable-details">
        <pre>02:29:57.721 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.832</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-275">
          <a>Doc string</a>
      </div>
      <div id="msg-275" class="collapse collapsable-details">
        <pre>02:29:57.722 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:29:59.553 response time in milliseconds: 1830.88
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:59 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/7d15b398-d542-440c-6e44-86a57e21b566/status&quot;}},&quot;downloadRequestId&quot;:&quot;7d15b398-d542-440c-6e44-86a57e21b566&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-276">
          <a>Doc string</a>
      </div>
      <div id="msg-276" class="collapse collapsable-details">
        <pre>02:29:59.560 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-277">
          <a>Doc string</a>
      </div>
      <div id="msg-277" class="collapse collapsable-details">
        <pre>02:29:59.560 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7d15b398-d542-440c-6e44-86a57e21b566/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-278">
          <a>Doc string</a>
      </div>
      <div id="msg-278" class="collapse collapsable-details">
        <pre>02:29:59.561 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7d15b398-d542-440c-6e44-86a57e21b566/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:00.061 response time in milliseconds: 500.42
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:59 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d500d085-66e1-4211-a03e-48c5b6b3cec1/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.500</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-279">
          <a>Doc string</a>
      </div>
      <div id="msg-279" class="collapse collapsable-details">
        <pre>02:30:00.062 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7d15b398-d542-440c-6e44-86a57e21b566/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:00.562 response time in milliseconds: 499.44
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:00 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d500d085-66e1-4211-a03e-48c5b6b3cec1/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-280">
          <a>Doc string</a>
      </div>
      <div id="msg-280" class="collapse collapsable-details">
        <pre>02:30:00.563 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/d500d085-66e1-4211-a03e-48c5b6b3cec1/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.508</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-281">
          <a>Doc string</a>
      </div>
      <div id="msg-281" class="collapse collapsable-details">
        <pre>02:30:00.564 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d500d085-66e1-4211-a03e-48c5b6b3cec1/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:01.072 response time in milliseconds: 508.06
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 5140
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:01 GMT
4 &lt; Etag: &quot;963068884df1168ec0f1d0c109c19883-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:59 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08ED5E25F61
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-282">
          <a>Doc string</a>
      </div>
      <div id="msg-282" class="collapse collapsable-details">
        <pre>02:30:01.073 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-283">
          <a>Doc string</a>
      </div>
      <div id="msg-283" class="collapse collapsable-details">
        <pre>02:30:01.073 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d500d085-66e1-4211-a03e-48c5b6b3cec1/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-284">
          <a>Doc string</a>
      </div>
      <div id="msg-284" class="collapse collapsable-details">
        <pre>02:30:01.073 [print] size 5140</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[23] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-285">
          <a>Doc string</a>
      </div>
      <div id="msg-285" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-286">
          <a>Doc string</a>
      </div>
      <div id="msg-286" class="collapse collapsable-details">
        <pre>02:30:01.077 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.512</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-287">
          <a>Doc string</a>
      </div>
      <div id="msg-287" class="collapse collapsable-details">
        <pre>02:30:01.078 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:30:01.585 response time in milliseconds: 506.81
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:01 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/3f66f15d-de7e-4dba-73d8-fe27c039218b/status&quot;}},&quot;downloadRequestId&quot;:&quot;3f66f15d-de7e-4dba-73d8-fe27c039218b&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-288">
          <a>Doc string</a>
      </div>
      <div id="msg-288" class="collapse collapsable-details">
        <pre>02:30:01.592 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-289">
          <a>Doc string</a>
      </div>
      <div id="msg-289" class="collapse collapsable-details">
        <pre>02:30:01.593 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3f66f15d-de7e-4dba-73d8-fe27c039218b/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.504</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-290">
          <a>Doc string</a>
      </div>
      <div id="msg-290" class="collapse collapsable-details">
        <pre>02:30:01.597 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3f66f15d-de7e-4dba-73d8-fe27c039218b/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:02.098 response time in milliseconds: 500.94
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:02 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/6281997c-07ac-4f0c-a203-7329d4348a56/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.479</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-291">
          <a>Doc string</a>
      </div>
      <div id="msg-291" class="collapse collapsable-details">
        <pre>02:30:02.099 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3f66f15d-de7e-4dba-73d8-fe27c039218b/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:02.577 response time in milliseconds: 477.90
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:02 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/6281997c-07ac-4f0c-a203-7329d4348a56/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-292">
          <a>Doc string</a>
      </div>
      <div id="msg-292" class="collapse collapsable-details">
        <pre>02:30:02.585 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/6281997c-07ac-4f0c-a203-7329d4348a56/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.508</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-293">
          <a>Doc string</a>
      </div>
      <div id="msg-293" class="collapse collapsable-details">
        <pre>02:30:02.586 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/6281997c-07ac-4f0c-a203-7329d4348a56/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:03.094 response time in milliseconds: 507.29
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 3799
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:03 GMT
4 &lt; Etag: &quot;367772b872e3861ca9001268608723b3-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:01 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08F4EAD518F
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-294">
          <a>Doc string</a>
      </div>
      <div id="msg-294" class="collapse collapsable-details">
        <pre>02:30:03.095 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-295">
          <a>Doc string</a>
      </div>
      <div id="msg-295" class="collapse collapsable-details">
        <pre>02:30:03.096 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/6281997c-07ac-4f0c-a203-7329d4348a56/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-296">
          <a>Doc string</a>
      </div>
      <div id="msg-296" class="collapse collapsable-details">
        <pre>02:30:03.096 [print] size 3799</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[24] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-297">
          <a>Doc string</a>
      </div>
      <div id="msg-297" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-298">
          <a>Doc string</a>
      </div>
      <div id="msg-298" class="collapse collapsable-details">
        <pre>02:30:03.100 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-299">
          <a>Doc string</a>
      </div>
      <div id="msg-299" class="collapse collapsable-details">
        <pre>02:30:03.101 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:30:03.593 response time in milliseconds: 491.87
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:03 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/e3611f65-419c-4ca1-5c55-8f8158e40a2b/status&quot;}},&quot;downloadRequestId&quot;:&quot;e3611f65-419c-4ca1-5c55-8f8158e40a2b&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-300">
          <a>Doc string</a>
      </div>
      <div id="msg-300" class="collapse collapsable-details">
        <pre>02:30:03.594 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-301">
          <a>Doc string</a>
      </div>
      <div id="msg-301" class="collapse collapsable-details">
        <pre>02:30:03.595 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e3611f65-419c-4ca1-5c55-8f8158e40a2b/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-302">
          <a>Doc string</a>
      </div>
      <div id="msg-302" class="collapse collapsable-details">
        <pre>02:30:03.595 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e3611f65-419c-4ca1-5c55-8f8158e40a2b/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:04.086 response time in milliseconds: 490.81
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 161
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:04 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/e3611f65-419c-4ca1-5c55-8f8158e40a2b/status&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;RUNNING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.519</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-303">
          <a>Doc string</a>
      </div>
      <div id="msg-303" class="collapse collapsable-details">
        <pre>02:30:04.093 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e3611f65-419c-4ca1-5c55-8f8158e40a2b/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:04.606 response time in milliseconds: 512.42
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:04 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/dd3bb7c1-1fc8-4adb-adbc-4eb56081e7bf/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-304">
          <a>Doc string</a>
      </div>
      <div id="msg-304" class="collapse collapsable-details">
        <pre>02:30:04.607 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/dd3bb7c1-1fc8-4adb-adbc-4eb56081e7bf/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.523</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-305">
          <a>Doc string</a>
      </div>
      <div id="msg-305" class="collapse collapsable-details">
        <pre>02:30:04.608 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/dd3bb7c1-1fc8-4adb-adbc-4eb56081e7bf/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:05.131 response time in milliseconds: 522.26
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:05 GMT
4 &lt; Etag: &quot;92a31e4c408834196cb17f0575b62e90-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:04 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08FC6B8BC1C
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-306">
          <a>Doc string</a>
      </div>
      <div id="msg-306" class="collapse collapsable-details">
        <pre>02:30:05.133 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-307">
          <a>Doc string</a>
      </div>
      <div id="msg-307" class="collapse collapsable-details">
        <pre>02:30:05.134 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/dd3bb7c1-1fc8-4adb-adbc-4eb56081e7bf/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-308">
          <a>Doc string</a>
      </div>
      <div id="msg-308" class="collapse collapsable-details">
        <pre>02:30:05.134 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.009</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[25] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-309">
          <a>Doc string</a>
      </div>
      <div id="msg-309" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-310">
          <a>Doc string</a>
      </div>
      <div id="msg-310" class="collapse collapsable-details">
        <pre>02:30:05.153 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.484</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-311">
          <a>Doc string</a>
      </div>
      <div id="msg-311" class="collapse collapsable-details">
        <pre>02:30:05.154 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:30:05.638 response time in milliseconds: 483.57
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:05 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/514f8c2c-2a67-4cec-51cb-a61efb014133/status&quot;}},&quot;downloadRequestId&quot;:&quot;514f8c2c-2a67-4cec-51cb-a61efb014133&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-312">
          <a>Doc string</a>
      </div>
      <div id="msg-312" class="collapse collapsable-details">
        <pre>02:30:05.640 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-313">
          <a>Doc string</a>
      </div>
      <div id="msg-313" class="collapse collapsable-details">
        <pre>02:30:05.640 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/514f8c2c-2a67-4cec-51cb-a61efb014133/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.489</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-314">
          <a>Doc string</a>
      </div>
      <div id="msg-314" class="collapse collapsable-details">
        <pre>02:30:05.641 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/514f8c2c-2a67-4cec-51cb-a61efb014133/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:06.130 response time in milliseconds: 488.49
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:06 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/bb4a0d1d-9ad2-4ced-9925-e6874b5432b9/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-315">
          <a>Doc string</a>
      </div>
      <div id="msg-315" class="collapse collapsable-details">
        <pre>02:30:06.131 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/514f8c2c-2a67-4cec-51cb-a61efb014133/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:06.628 response time in milliseconds: 496.70
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:06 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/bb4a0d1d-9ad2-4ced-9925-e6874b5432b9/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-316">
          <a>Doc string</a>
      </div>
      <div id="msg-316" class="collapse collapsable-details">
        <pre>02:30:06.629 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/bb4a0d1d-9ad2-4ced-9925-e6874b5432b9/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-317">
          <a>Doc string</a>
      </div>
      <div id="msg-317" class="collapse collapsable-details">
        <pre>02:30:06.630 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/bb4a0d1d-9ad2-4ced-9925-e6874b5432b9/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:07.131 response time in milliseconds: 500.44
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:07 GMT
4 &lt; Etag: &quot;c8f2175def4cc3b38c3303512dfa1088-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:05 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0903F5A9585
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-318">
          <a>Doc string</a>
      </div>
      <div id="msg-318" class="collapse collapsable-details">
        <pre>02:30:07.132 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-319">
          <a>Doc string</a>
      </div>
      <div id="msg-319" class="collapse collapsable-details">
        <pre>02:30:07.132 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/bb4a0d1d-9ad2-4ced-9925-e6874b5432b9/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-320">
          <a>Doc string</a>
      </div>
      <div id="msg-320" class="collapse collapsable-details">
        <pre>02:30:07.132 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[26] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-321">
          <a>Doc string</a>
      </div>
      <div id="msg-321" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-322">
          <a>Doc string</a>
      </div>
      <div id="msg-322" class="collapse collapsable-details">
        <pre>02:30:07.138 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.513</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-323">
          <a>Doc string</a>
      </div>
      <div id="msg-323" class="collapse collapsable-details">
        <pre>02:30:07.139 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:30:07.652 response time in milliseconds: 511.91
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:07 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/0ed46d2e-e940-4147-7188-ee4a4e033ace/status&quot;}},&quot;downloadRequestId&quot;:&quot;0ed46d2e-e940-4147-7188-ee4a4e033ace&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-324">
          <a>Doc string</a>
      </div>
      <div id="msg-324" class="collapse collapsable-details">
        <pre>02:30:07.653 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-325">
          <a>Doc string</a>
      </div>
      <div id="msg-325" class="collapse collapsable-details">
        <pre>02:30:07.653 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/0ed46d2e-e940-4147-7188-ee4a4e033ace/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.481</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-326">
          <a>Doc string</a>
      </div>
      <div id="msg-326" class="collapse collapsable-details">
        <pre>02:30:07.654 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/0ed46d2e-e940-4147-7188-ee4a4e033ace/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:08.135 response time in milliseconds: 480.73
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:08 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/efb25065-f0ce-4ea0-a766-b11b1759e1c5/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-327">
          <a>Doc string</a>
      </div>
      <div id="msg-327" class="collapse collapsable-details">
        <pre>02:30:08.141 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/0ed46d2e-e940-4147-7188-ee4a4e033ace/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:08.621 response time in milliseconds: 478.97
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:08 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/efb25065-f0ce-4ea0-a766-b11b1759e1c5/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-328">
          <a>Doc string</a>
      </div>
      <div id="msg-328" class="collapse collapsable-details">
        <pre>02:30:08.622 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/efb25065-f0ce-4ea0-a766-b11b1759e1c5/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.507</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-329">
          <a>Doc string</a>
      </div>
      <div id="msg-329" class="collapse collapsable-details">
        <pre>02:30:08.623 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/efb25065-f0ce-4ea0-a766-b11b1759e1c5/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:09.130 response time in milliseconds: 507.00
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 648
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:09 GMT
4 &lt; Etag: &quot;b0a16c2ffb0434982c113c496bffdecf-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:07 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A090B5BAECE0
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-330">
          <a>Doc string</a>
      </div>
      <div id="msg-330" class="collapse collapsable-details">
        <pre>02:30:09.133 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-331">
          <a>Doc string</a>
      </div>
      <div id="msg-331" class="collapse collapsable-details">
        <pre>02:30:09.133 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/efb25065-f0ce-4ea0-a766-b11b1759e1c5/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-332">
          <a>Doc string</a>
      </div>
      <div id="msg-332" class="collapse collapsable-details">
        <pre>02:30:09.133 [print] size 648</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[27] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-333">
          <a>Doc string</a>
      </div>
      <div id="msg-333" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-334">
          <a>Doc string</a>
      </div>
      <div id="msg-334" class="collapse collapsable-details">
        <pre>02:30:09.145 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.612</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-335">
          <a>Doc string</a>
      </div>
      <div id="msg-335" class="collapse collapsable-details">
        <pre>02:30:09.146 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:30:09.757 response time in milliseconds: 611.04
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:09 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/e6d00f47-46e5-425c-6aff-d0083c42214a/status&quot;}},&quot;downloadRequestId&quot;:&quot;e6d00f47-46e5-425c-6aff-d0083c42214a&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-336">
          <a>Doc string</a>
      </div>
      <div id="msg-336" class="collapse collapsable-details">
        <pre>02:30:09.758 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-337">
          <a>Doc string</a>
      </div>
      <div id="msg-337" class="collapse collapsable-details">
        <pre>02:30:09.759 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e6d00f47-46e5-425c-6aff-d0083c42214a/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.528</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-338">
          <a>Doc string</a>
      </div>
      <div id="msg-338" class="collapse collapsable-details">
        <pre>02:30:09.760 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e6d00f47-46e5-425c-6aff-d0083c42214a/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:10.287 response time in milliseconds: 527.41
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:10 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e778c952-98f1-408d-a076-93e6932d77f1/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.618</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-339">
          <a>Doc string</a>
      </div>
      <div id="msg-339" class="collapse collapsable-details">
        <pre>02:30:10.288 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e6d00f47-46e5-425c-6aff-d0083c42214a/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:10.906 response time in milliseconds: 617.25
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:10 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e778c952-98f1-408d-a076-93e6932d77f1/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-340">
          <a>Doc string</a>
      </div>
      <div id="msg-340" class="collapse collapsable-details">
        <pre>02:30:10.907 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/e778c952-98f1-408d-a076-93e6932d77f1/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.595</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-341">
          <a>Doc string</a>
      </div>
      <div id="msg-341" class="collapse collapsable-details">
        <pre>02:30:10.908 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e778c952-98f1-408d-a076-93e6932d77f1/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:11.503 response time in milliseconds: 594.53
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:11 GMT
4 &lt; Etag: &quot;9b9e564bd695361e13cefa81a2ef7182-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:09 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0913EF5EBFD
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-342">
          <a>Doc string</a>
      </div>
      <div id="msg-342" class="collapse collapsable-details">
        <pre>02:30:11.503 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-343">
          <a>Doc string</a>
      </div>
      <div id="msg-343" class="collapse collapsable-details">
        <pre>02:30:11.504 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e778c952-98f1-408d-a076-93e6932d77f1/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-344">
          <a>Doc string</a>
      </div>
      <div id="msg-344" class="collapse collapsable-details">
        <pre>02:30:11.504 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[28] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-345">
          <a>Doc string</a>
      </div>
      <div id="msg-345" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-346">
          <a>Doc string</a>
      </div>
      <div id="msg-346" class="collapse collapsable-details">
        <pre>02:30:11.507 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.318</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-347">
          <a>Doc string</a>
      </div>
      <div id="msg-347" class="collapse collapsable-details">
        <pre>02:30:11.508 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:30:13.825 response time in milliseconds: 2316.94
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:13 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/cefe9611-b5a3-43ef-75c6-c8f388428115/status&quot;}},&quot;downloadRequestId&quot;:&quot;cefe9611-b5a3-43ef-75c6-c8f388428115&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-348">
          <a>Doc string</a>
      </div>
      <div id="msg-348" class="collapse collapsable-details">
        <pre>02:30:13.826 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-349">
          <a>Doc string</a>
      </div>
      <div id="msg-349" class="collapse collapsable-details">
        <pre>02:30:13.834 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cefe9611-b5a3-43ef-75c6-c8f388428115/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-350">
          <a>Doc string</a>
      </div>
      <div id="msg-350" class="collapse collapsable-details">
        <pre>02:30:13.834 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cefe9611-b5a3-43ef-75c6-c8f388428115/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:14.319 response time in milliseconds: 484.60
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:14 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/8a3b2a05-e100-449f-b96b-a2f5e9d57b56/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.604</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-351">
          <a>Doc string</a>
      </div>
      <div id="msg-351" class="collapse collapsable-details">
        <pre>02:30:14.326 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cefe9611-b5a3-43ef-75c6-c8f388428115/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:14.924 response time in milliseconds: 597.50
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:14 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/8a3b2a05-e100-449f-b96b-a2f5e9d57b56/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-352">
          <a>Doc string</a>
      </div>
      <div id="msg-352" class="collapse collapsable-details">
        <pre>02:30:14.924 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/8a3b2a05-e100-449f-b96b-a2f5e9d57b56/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.541</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-353">
          <a>Doc string</a>
      </div>
      <div id="msg-353" class="collapse collapsable-details">
        <pre>02:30:14.925 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/8a3b2a05-e100-449f-b96b-a2f5e9d57b56/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:15.466 response time in milliseconds: 540.56
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 647
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:15 GMT
4 &lt; Etag: &quot;41ce5f6e48700b307ec6d237fb8dba48-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:13 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0922FAA6F7C
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-354">
          <a>Doc string</a>
      </div>
      <div id="msg-354" class="collapse collapsable-details">
        <pre>02:30:15.467 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-355">
          <a>Doc string</a>
      </div>
      <div id="msg-355" class="collapse collapsable-details">
        <pre>02:30:15.468 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/8a3b2a05-e100-449f-b96b-a2f5e9d57b56/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-356">
          <a>Doc string</a>
      </div>
      <div id="msg-356" class="collapse collapsable-details">
        <pre>02:30:15.468 [print] size 647</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[29] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-357">
          <a>Doc string</a>
      </div>
      <div id="msg-357" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-358">
          <a>Doc string</a>
      </div>
      <div id="msg-358" class="collapse collapsable-details">
        <pre>02:30:15.476 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.490</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-359">
          <a>Doc string</a>
      </div>
      <div id="msg-359" class="collapse collapsable-details">
        <pre>02:30:15.477 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 267
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;]}

02:30:15.966 response time in milliseconds: 489.31
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:15 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/ab1759dc-e933-44bd-48d3-dfc3750db105/status&quot;}},&quot;downloadRequestId&quot;:&quot;ab1759dc-e933-44bd-48d3-dfc3750db105&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-360">
          <a>Doc string</a>
      </div>
      <div id="msg-360" class="collapse collapsable-details">
        <pre>02:30:15.967 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-361">
          <a>Doc string</a>
      </div>
      <div id="msg-361" class="collapse collapsable-details">
        <pre>02:30:15.967 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ab1759dc-e933-44bd-48d3-dfc3750db105/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.486</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-362">
          <a>Doc string</a>
      </div>
      <div id="msg-362" class="collapse collapsable-details">
        <pre>02:30:15.968 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ab1759dc-e933-44bd-48d3-dfc3750db105/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:16.454 response time in milliseconds: 485.67
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:16 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3334de3a-f2c5-4f11-a6b0-52c2eba24609/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-363">
          <a>Doc string</a>
      </div>
      <div id="msg-363" class="collapse collapsable-details">
        <pre>02:30:16.455 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ab1759dc-e933-44bd-48d3-dfc3750db105/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:16.945 response time in milliseconds: 489.78
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:16 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3334de3a-f2c5-4f11-a6b0-52c2eba24609/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-364">
          <a>Doc string</a>
      </div>
      <div id="msg-364" class="collapse collapsable-details">
        <pre>02:30:16.955 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/3334de3a-f2c5-4f11-a6b0-52c2eba24609/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.528</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-365">
          <a>Doc string</a>
      </div>
      <div id="msg-365" class="collapse collapsable-details">
        <pre>02:30:16.959 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3334de3a-f2c5-4f11-a6b0-52c2eba24609/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:17.485 response time in milliseconds: 526.27
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 12999
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:17 GMT
4 &lt; Etag: &quot;34af494e490096f7fb71953942230cca-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:16 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A092A7806073
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-366">
          <a>Doc string</a>
      </div>
      <div id="msg-366" class="collapse collapsable-details">
        <pre>02:30:17.488 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-367">
          <a>Doc string</a>
      </div>
      <div id="msg-367" class="collapse collapsable-details">
        <pre>02:30:17.488 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3334de3a-f2c5-4f11-a6b0-52c2eba24609/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-368">
          <a>Doc string</a>
      </div>
      <div id="msg-368" class="collapse collapsable-details">
        <pre>02:30:17.489 [print] size 12999</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
      </div>
</div>


    

  </div>
</div>

                      
<div class="element">
  
  
<div class="tags indention">
  </div>

  
  <span class="lead-duration duration">2:39.038</span>


    <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-369">
    
<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">downoad deltas op locatie buitenhof kadastralegrens</span>
  

       <i class="chevron fa fa-fw"></i>
  </div>

  </span>
  <div class="description indention"></div>

  <div id="element-369" class="collapse collapsable-details ">
    


    
<div class="steps inner-level">
    <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-370">
    
<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>
  

       <i class="chevron fa fa-fw"></i>
  </div>

  </div>

  <div id="steps-370" class="inner-level collapse collapsable-details ">
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;bepaal een delta ids &quot;</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-371">
          <a>Doc string</a>
      </div>
      <div id="msg-371" class="collapse collapsable-details">
        <pre>02:29:20.243 base url : {
  &quot;apiBaseUrl&quot;: &quot;https://downloads.pdok.nl/&quot;
}
 
02:29:20.253 [print] bepaal een delta ids</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">Given</span>
  <span class="name">url apiBaseUrl + 'kadastralekaart/api/v4_0/delta'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">And</span>
  <span class="name">param count = 1000</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">And</span>
  <span class="name">param after-delta-id = &quot;b2219778-e94c-40b0-92bd-95e3491af2bb&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.702</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-372">
          <a>Doc string</a>
      </div>
      <div id="msg-372" class="collapse collapsable-details">
        <pre>02:29:20.258 request:
1 &gt; GET https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta?count=1000&amp;after-delta-id=b2219778-e94c-40b0-92bd-95e3491af2bb
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:20.960 response time in milliseconds: 697.20
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:20 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Cnection: close
{&quot;deltas&quot;:[{&quot;id&quot;:&quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-15T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-16T21:59:59Z&quot;}},{&quot;id&quot;:&quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-16T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-17T21:59:59Z&quot;}},{&quot;id&quot;:&quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-17T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-18T21:59:59Z&quot;}},{&quot;id&quot;:&quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-18T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-19T21:59:59Z&quot;}},{&quot;id&quot;:&quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-19T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-20T21:59:59Z&quot;}},{&quot;id&quot;:&quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-20T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-21T21:59:59Z&quot;}},{&quot;id&quot;:&quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-21T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-22T21:59:59Z&quot;}},{&quot;id&quot;:&quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-22T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-23T21:59:59Z&quot;}},{&quot;id&quot;:&quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-23T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-24T21:59:59Z&quot;}},{&quot;id&quot;:&quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-24T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-25T21:59:59Z&quot;}},{&quot;id&quot;:&quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-25T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-26T21:59:59Z&quot;}},{&quot;id&quot;:&quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-26T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-27T21:59:59Z&quot;}},{&quot;id&quot;:&quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-27T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-28T21:59:59Z&quot;}},{&quot;id&quot;:&quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-28T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-29T21:59:59Z&quot;}},{&quot;id&quot;:&quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-29T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-30T21:59:59Z&quot;}},{&quot;id&quot;:&quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-30T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-31T21:59:59Z&quot;}},{&quot;id&quot;:&quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-31T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-01T21:59:59Z&quot;}},{&quot;id&quot;:&quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-01T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-02T21:59:59Z&quot;}},{&quot;id&quot;:&quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-02T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-03T21:59:59Z&quot;}},{&quot;id&quot;:&quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-03T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-04T21:59:59Z&quot;}},{&quot;id&quot;:&quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-04T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-05T21:59:59Z&quot;}},{&quot;id&quot;:&quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-05T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-06T21:59:59Z&quot;}},{&quot;id&quot;:&quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-06T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-07T21:59:59Z&quot;}},{&quot;id&quot;:&quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-07T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-08T21:59:59Z&quot;}},{&quot;id&quot;:&quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-08T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-09T21:59:59Z&quot;}},{&quot;id&quot;:&quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-09T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-10T21:59:59Z&quot;}},{&quot;id&quot;:&quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-10T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-11T21:59:59Z&quot;}},{&quot;id&quot;:&quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-11T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-12T21:59:59Z&quot;}},{&quot;id&quot;:&quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-12T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-13T21:59:59Z&quot;}},{&quot;id&quot;:&quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-13T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-14T21:59:59Z&quot;}}],&quot;_links&quot;:[]}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">And</span>
  <span class="name">def alldelta = response.deltas</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;alldelta:&quot;, alldelta</span>
  
  <span class="lead-duration duration">0.020</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-373">
          <a>Doc string</a>
      </div>
      <div id="msg-373" class="collapse collapsable-details">
        <pre>02:29:20.982 [print] alldelta: [
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-15T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-16T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-16T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-17T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-17T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-18T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-18T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-19T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-19T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-20T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-20T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-21T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-21T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-22T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-22T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-23T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-23T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-24T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-24T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-25T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-25T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-26T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-26T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-27T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-27T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-28T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-28T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-29T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-29T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-30T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-30T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-31T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-31T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-01T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-01T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-02T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-02T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-03T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-03T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-04T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-04T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-05T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-05T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-06T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-06T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-07T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-07T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-08T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-08T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-09T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-09T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-10T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-10T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-11T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-11T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-12T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-12T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-13T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-13T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-14T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;
  }
]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def pararray = []</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def featureslist = [&quot;kadastralegrens&quot;]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def fun =</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-374">
          <a>Doc string</a>
      </div>
      <div id="msg-374" class="collapse collapsable-details">
        <pre>function(delta) {
req = { format: &quot;gml&quot;, geofilter: 'POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))' };
req[&quot;deltaId&quot;] = delta[&quot;id&quot;];
req[&quot;featuretypes&quot;] = featureslist;
pararray.add (req);
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">eval karate.forEach(alldelta, fun)</span>
  
  <span class="lead-duration duration">0.052</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;array:&quot;, pararray</span>
  
  <span class="lead-duration duration">0.052</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-375">
          <a>Doc string</a>
      </div>
      <div id="msg-375" class="collapse collapsable-details">
        <pre>02:29:21.093 [print] array: [
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,
    &quot;featuretypes&quot;: [
      &quot;kadastralegrens&quot;
    ]
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  }
]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;done&quot;</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-376">
          <a>Doc string</a>
      </div>
      <div id="msg-376" class="collapse collapsable-details">
        <pre>02:29:21.099 [print] done</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def dodelta = call read('DeltaCustomargs.feature') pararray</span>
  
  <span class="lead-duration duration">1:19.231</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[0] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-377">
          <a>Doc string</a>
      </div>
      <div id="msg-377" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.023</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-378">
          <a>Doc string</a>
      </div>
      <div id="msg-378" class="collapse collapsable-details">
        <pre>02:29:21.215 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.505</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-379">
          <a>Doc string</a>
      </div>
      <div id="msg-379" class="collapse collapsable-details">
        <pre>02:29:21.219 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:21.721 response time in milliseconds: 501.31
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:21 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/c9d2083b-9730-41bb-48b1-7a0926e203cb/status&quot;}},&quot;downloadRequestId&quot;:&quot;c9d2083b-9730-41bb-48b1-7a0926e203cb&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-380">
          <a>Doc string</a>
      </div>
      <div id="msg-380" class="collapse collapsable-details">
        <pre>02:29:21.722 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-381">
          <a>Doc string</a>
      </div>
      <div id="msg-381" class="collapse collapsable-details">
        <pre>02:29:21.740 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c9d2083b-9730-41bb-48b1-7a0926e203cb/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.499</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-382">
          <a>Doc string</a>
      </div>
      <div id="msg-382" class="collapse collapsable-details">
        <pre>02:29:21.741 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c9d2083b-9730-41bb-48b1-7a0926e203cb/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:22.240 response time in milliseconds: 498.76
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:22 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/2f99cbb2-fe64-4e26-8d81-11a1c2c58076/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.545</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-383">
          <a>Doc string</a>
      </div>
      <div id="msg-383" class="collapse collapsable-details">
        <pre>02:29:22.241 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c9d2083b-9730-41bb-48b1-7a0926e203cb/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:22.785 response time in milliseconds: 543.54
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:22 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/2f99cbb2-fe64-4e26-8d81-11a1c2c58076/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-384">
          <a>Doc string</a>
      </div>
      <div id="msg-384" class="collapse collapsable-details">
        <pre>02:29:22.800 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/2f99cbb2-fe64-4e26-8d81-11a1c2c58076/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.522</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-385">
          <a>Doc string</a>
      </div>
      <div id="msg-385" class="collapse collapsable-details">
        <pre>02:29:22.804 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/2f99cbb2-fe64-4e26-8d81-11a1c2c58076/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:23.325 response time in milliseconds: 520.90
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 664
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:23 GMT
4 &lt; Etag: &quot;1a71855b9fdaa719ce5ae9665f93df8d-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:22 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0860AE86E46
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-386">
          <a>Doc string</a>
      </div>
      <div id="msg-386" class="collapse collapsable-details">
        <pre>02:29:23.331 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-387">
          <a>Doc string</a>
      </div>
      <div id="msg-387" class="collapse collapsable-details">
        <pre>02:29:23.333 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/2f99cbb2-fe64-4e26-8d81-11a1c2c58076/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-388">
          <a>Doc string</a>
      </div>
      <div id="msg-388" class="collapse collapsable-details">
        <pre>02:29:23.335 [print] size 664</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[1] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-389">
          <a>Doc string</a>
      </div>
      <div id="msg-389" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.012</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-390">
          <a>Doc string</a>
      </div>
      <div id="msg-390" class="collapse collapsable-details">
        <pre>02:29:23.360 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.322</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-391">
          <a>Doc string</a>
      </div>
      <div id="msg-391" class="collapse collapsable-details">
        <pre>02:29:23.363 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:25.683 response time in milliseconds: 2319.91
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:25 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/815fc875-b32b-465d-7e9b-b284e51d869d/status&quot;}},&quot;downloadRequestId&quot;:&quot;815fc875-b32b-465d-7e9b-b284e51d869d&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-392">
          <a>Doc string</a>
      </div>
      <div id="msg-392" class="collapse collapsable-details">
        <pre>02:29:25.686 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-393">
          <a>Doc string</a>
      </div>
      <div id="msg-393" class="collapse collapsable-details">
        <pre>02:29:25.687 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/815fc875-b32b-465d-7e9b-b284e51d869d/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-394">
          <a>Doc string</a>
      </div>
      <div id="msg-394" class="collapse collapsable-details">
        <pre>02:29:25.689 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/815fc875-b32b-465d-7e9b-b284e51d869d/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:26.180 response time in milliseconds: 491.09
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:26 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/a37b2113-e7e2-44b4-a935-d670a86a09f4/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.502</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-395">
          <a>Doc string</a>
      </div>
      <div id="msg-395" class="collapse collapsable-details">
        <pre>02:29:26.181 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/815fc875-b32b-465d-7e9b-b284e51d869d/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:26.683 response time in milliseconds: 500.91
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:26 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/a37b2113-e7e2-44b4-a935-d670a86a09f4/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-396">
          <a>Doc string</a>
      </div>
      <div id="msg-396" class="collapse collapsable-details">
        <pre>02:29:26.685 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/a37b2113-e7e2-44b4-a935-d670a86a09f4/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-397">
          <a>Doc string</a>
      </div>
      <div id="msg-397" class="collapse collapsable-details">
        <pre>02:29:26.687 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/a37b2113-e7e2-44b4-a935-d670a86a09f4/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:27.184 response time in milliseconds: 496.62
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:27 GMT
4 &lt; Etag: &quot;241f31c3a6d8c63d8aba753656576c99-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:25 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A086F2459500
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-398">
          <a>Doc string</a>
      </div>
      <div id="msg-398" class="collapse collapsable-details">
        <pre>02:29:27.186 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-399">
          <a>Doc string</a>
      </div>
      <div id="msg-399" class="collapse collapsable-details">
        <pre>02:29:27.187 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/a37b2113-e7e2-44b4-a935-d670a86a09f4/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-400">
          <a>Doc string</a>
      </div>
      <div id="msg-400" class="collapse collapsable-details">
        <pre>02:29:27.187 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[2] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-401">
          <a>Doc string</a>
      </div>
      <div id="msg-401" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-402">
          <a>Doc string</a>
      </div>
      <div id="msg-402" class="collapse collapsable-details">
        <pre>02:29:27.192 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.527</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-403">
          <a>Doc string</a>
      </div>
      <div id="msg-403" class="collapse collapsable-details">
        <pre>02:29:27.203 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:27.719 response time in milliseconds: 515.96
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:27 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/9c4a2d3c-5565-415b-77b2-9c93453e0fc3/status&quot;}},&quot;downloadRequestId&quot;:&quot;9c4a2d3c-5565-415b-77b2-9c93453e0fc3&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-404">
          <a>Doc string</a>
      </div>
      <div id="msg-404" class="collapse collapsable-details">
        <pre>02:29:27.726 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-405">
          <a>Doc string</a>
      </div>
      <div id="msg-405" class="collapse collapsable-details">
        <pre>02:29:27.726 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/9c4a2d3c-5565-415b-77b2-9c93453e0fc3/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.500</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-406">
          <a>Doc string</a>
      </div>
      <div id="msg-406" class="collapse collapsable-details">
        <pre>02:29:27.728 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/9c4a2d3c-5565-415b-77b2-9c93453e0fc3/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:28.227 response time in milliseconds: 498.51
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:28 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3d9489ac-1438-433f-853f-1bba67060b1b/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.504</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-407">
          <a>Doc string</a>
      </div>
      <div id="msg-407" class="collapse collapsable-details">
        <pre>02:29:28.228 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/9c4a2d3c-5565-415b-77b2-9c93453e0fc3/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:28.731 response time in milliseconds: 502.81
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:28 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3d9489ac-1438-433f-853f-1bba67060b1b/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-408">
          <a>Doc string</a>
      </div>
      <div id="msg-408" class="collapse collapsable-details">
        <pre>02:29:28.733 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/3d9489ac-1438-433f-853f-1bba67060b1b/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.519</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-409">
          <a>Doc string</a>
      </div>
      <div id="msg-409" class="collapse collapsable-details">
        <pre>02:29:28.734 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3d9489ac-1438-433f-853f-1bba67060b1b/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:29.252 response time in milliseconds: 518.14
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 664
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:29 GMT
4 &lt; Etag: &quot;de8c2c1bce69babdf4779d4c9de6f436-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:27 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0876D10883C
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-410">
          <a>Doc string</a>
      </div>
      <div id="msg-410" class="collapse collapsable-details">
        <pre>02:29:29.253 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-411">
          <a>Doc string</a>
      </div>
      <div id="msg-411" class="collapse collapsable-details">
        <pre>02:29:29.253 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3d9489ac-1438-433f-853f-1bba67060b1b/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-412">
          <a>Doc string</a>
      </div>
      <div id="msg-412" class="collapse collapsable-details">
        <pre>02:29:29.254 [print] size 664</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[3] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-413">
          <a>Doc string</a>
      </div>
      <div id="msg-413" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.009</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-414">
          <a>Doc string</a>
      </div>
      <div id="msg-414" class="collapse collapsable-details">
        <pre>02:29:29.270 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.523</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-415">
          <a>Doc string</a>
      </div>
      <div id="msg-415" class="collapse collapsable-details">
        <pre>02:29:29.277 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:29.797 response time in milliseconds: 519.05
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:29 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/a8166733-5b27-404e-4152-b91eff46bc45/status&quot;}},&quot;downloadRequestId&quot;:&quot;a8166733-5b27-404e-4152-b91eff46bc45&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-416">
          <a>Doc string</a>
      </div>
      <div id="msg-416" class="collapse collapsable-details">
        <pre>02:29:29.800 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-417">
          <a>Doc string</a>
      </div>
      <div id="msg-417" class="collapse collapsable-details">
        <pre>02:29:29.801 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/a8166733-5b27-404e-4152-b91eff46bc45/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.515</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-418">
          <a>Doc string</a>
      </div>
      <div id="msg-418" class="collapse collapsable-details">
        <pre>02:29:29.810 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/a8166733-5b27-404e-4152-b91eff46bc45/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:30.316 response time in milliseconds: 506.46
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:30 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/47e63b55-d285-46c6-80b6-f760fd409601/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-419">
          <a>Doc string</a>
      </div>
      <div id="msg-419" class="collapse collapsable-details">
        <pre>02:29:30.317 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/a8166733-5b27-404e-4152-b91eff46bc45/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:30.807 response time in milliseconds: 486.72
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:30 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/47e63b55-d285-46c6-80b6-f760fd409601/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-420">
          <a>Doc string</a>
      </div>
      <div id="msg-420" class="collapse collapsable-details">
        <pre>02:29:30.809 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/47e63b55-d285-46c6-80b6-f760fd409601/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.517</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-421">
          <a>Doc string</a>
      </div>
      <div id="msg-421" class="collapse collapsable-details">
        <pre>02:29:30.811 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/47e63b55-d285-46c6-80b6-f760fd409601/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:31.323 response time in milliseconds: 512.11
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 664
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:31 GMT
4 &lt; Etag: &quot;2045c248c323c466134a942377f7bc41-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:29 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A087E7D969EE
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.026</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-422">
          <a>Doc string</a>
      </div>
      <div id="msg-422" class="collapse collapsable-details">
        <pre>02:29:31.357 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-423">
          <a>Doc string</a>
      </div>
      <div id="msg-423" class="collapse collapsable-details">
        <pre>02:29:31.358 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/47e63b55-d285-46c6-80b6-f760fd409601/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-424">
          <a>Doc string</a>
      </div>
      <div id="msg-424" class="collapse collapsable-details">
        <pre>02:29:31.358 [print] size 664</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[4] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-425">
          <a>Doc string</a>
      </div>
      <div id="msg-425" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-426">
          <a>Doc string</a>
      </div>
      <div id="msg-426" class="collapse collapsable-details">
        <pre>02:29:31.363 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.483</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-427">
          <a>Doc string</a>
      </div>
      <div id="msg-427" class="collapse collapsable-details">
        <pre>02:29:31.365 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:31.847 response time in milliseconds: 482.14
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:31 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/162886b2-05a2-47dc-6da7-a6fb1280fac2/status&quot;}},&quot;downloadRequestId&quot;:&quot;162886b2-05a2-47dc-6da7-a6fb1280fac2&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-428">
          <a>Doc string</a>
      </div>
      <div id="msg-428" class="collapse collapsable-details">
        <pre>02:29:31.849 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-429">
          <a>Doc string</a>
      </div>
      <div id="msg-429" class="collapse collapsable-details">
        <pre>02:29:31.849 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/162886b2-05a2-47dc-6da7-a6fb1280fac2/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.510</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-430">
          <a>Doc string</a>
      </div>
      <div id="msg-430" class="collapse collapsable-details">
        <pre>02:29:31.857 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/162886b2-05a2-47dc-6da7-a6fb1280fac2/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:32.360 response time in milliseconds: 502.41
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:32 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/37839258-c27b-4617-ad96-12e39e1e6220/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.492</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-431">
          <a>Doc string</a>
      </div>
      <div id="msg-431" class="collapse collapsable-details">
        <pre>02:29:32.363 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/162886b2-05a2-47dc-6da7-a6fb1280fac2/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:32.852 response time in milliseconds: 488.78
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:32 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/37839258-c27b-4617-ad96-12e39e1e6220/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-432">
          <a>Doc string</a>
      </div>
      <div id="msg-432" class="collapse collapsable-details">
        <pre>02:29:32.854 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/37839258-c27b-4617-ad96-12e39e1e6220/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.543</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-433">
          <a>Doc string</a>
      </div>
      <div id="msg-433" class="collapse collapsable-details">
        <pre>02:29:32.855 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/37839258-c27b-4617-ad96-12e39e1e6220/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:33.397 response time in milliseconds: 541.82
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 662
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:33 GMT
4 &lt; Etag: &quot;5da444acddbe8a50fa50808bbbdee5ad-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:31 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A088632EFA0D
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-434">
          <a>Doc string</a>
      </div>
      <div id="msg-434" class="collapse collapsable-details">
        <pre>02:29:33.398 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-435">
          <a>Doc string</a>
      </div>
      <div id="msg-435" class="collapse collapsable-details">
        <pre>02:29:33.398 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/37839258-c27b-4617-ad96-12e39e1e6220/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-436">
          <a>Doc string</a>
      </div>
      <div id="msg-436" class="collapse collapsable-details">
        <pre>02:29:33.398 [print] size 662</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[5] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-437">
          <a>Doc string</a>
      </div>
      <div id="msg-437" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-438">
          <a>Doc string</a>
      </div>
      <div id="msg-438" class="collapse collapsable-details">
        <pre>02:29:33.409 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.483</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-439">
          <a>Doc string</a>
      </div>
      <div id="msg-439" class="collapse collapsable-details">
        <pre>02:29:33.410 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:33.892 response time in milliseconds: 482.21
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:33 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/80284429-335f-47ee-7869-d9f571394fdd/status&quot;}},&quot;downloadRequestId&quot;:&quot;80284429-335f-47ee-7869-d9f571394fdd&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-440">
          <a>Doc string</a>
      </div>
      <div id="msg-440" class="collapse collapsable-details">
        <pre>02:29:33.899 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-441">
          <a>Doc string</a>
      </div>
      <div id="msg-441" class="collapse collapsable-details">
        <pre>02:29:33.900 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/80284429-335f-47ee-7869-d9f571394fdd/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.487</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-442">
          <a>Doc string</a>
      </div>
      <div id="msg-442" class="collapse collapsable-details">
        <pre>02:29:33.901 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/80284429-335f-47ee-7869-d9f571394fdd/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:34.387 response time in milliseconds: 485.41
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:34 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/dc6395e7-2ad1-4a2b-97ed-d16c2dfea5ce/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-443">
          <a>Doc string</a>
      </div>
      <div id="msg-443" class="collapse collapsable-details">
        <pre>02:29:34.389 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/80284429-335f-47ee-7869-d9f571394fdd/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:34.889 response time in milliseconds: 499.76
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:34 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/dc6395e7-2ad1-4a2b-97ed-d16c2dfea5ce/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-444">
          <a>Doc string</a>
      </div>
      <div id="msg-444" class="collapse collapsable-details">
        <pre>02:29:34.890 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/dc6395e7-2ad1-4a2b-97ed-d16c2dfea5ce/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.543</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-445">
          <a>Doc string</a>
      </div>
      <div id="msg-445" class="collapse collapsable-details">
        <pre>02:29:34.892 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/dc6395e7-2ad1-4a2b-97ed-d16c2dfea5ce/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:35.429 response time in milliseconds: 529.75
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:35 GMT
4 &lt; Etag: &quot;b79f694a1a917571afcfc5c853d1c718-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:33 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A088DB938F9A
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-446">
          <a>Doc string</a>
      </div>
      <div id="msg-446" class="collapse collapsable-details">
        <pre>02:29:35.435 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-447">
          <a>Doc string</a>
      </div>
      <div id="msg-447" class="collapse collapsable-details">
        <pre>02:29:35.438 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/dc6395e7-2ad1-4a2b-97ed-d16c2dfea5ce/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-448">
          <a>Doc string</a>
      </div>
      <div id="msg-448" class="collapse collapsable-details">
        <pre>02:29:35.438 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[6] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-449">
          <a>Doc string</a>
      </div>
      <div id="msg-449" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.015</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-450">
          <a>Doc string</a>
      </div>
      <div id="msg-450" class="collapse collapsable-details">
        <pre>02:29:35.466 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.120</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-451">
          <a>Doc string</a>
      </div>
      <div id="msg-451" class="collapse collapsable-details">
        <pre>02:29:35.475 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:37.586 response time in milliseconds: 2111.01
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:37 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/223e86b6-d301-4b1e-5ae9-773db3f1a280/status&quot;}},&quot;downloadRequestId&quot;:&quot;223e86b6-d301-4b1e-5ae9-773db3f1a280&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.013</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-452">
          <a>Doc string</a>
      </div>
      <div id="msg-452" class="collapse collapsable-details">
        <pre>02:29:37.601 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-453">
          <a>Doc string</a>
      </div>
      <div id="msg-453" class="collapse collapsable-details">
        <pre>02:29:37.602 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/223e86b6-d301-4b1e-5ae9-773db3f1a280/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.482</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-454">
          <a>Doc string</a>
      </div>
      <div id="msg-454" class="collapse collapsable-details">
        <pre>02:29:37.603 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/223e86b6-d301-4b1e-5ae9-773db3f1a280/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:38.084 response time in milliseconds: 481.21
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:38 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/cea63cbe-bf06-49fd-a4d4-b251745f9759/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-455">
          <a>Doc string</a>
      </div>
      <div id="msg-455" class="collapse collapsable-details">
        <pre>02:29:38.087 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/223e86b6-d301-4b1e-5ae9-773db3f1a280/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:38.567 response time in milliseconds: 479.83
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:38 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/cea63cbe-bf06-49fd-a4d4-b251745f9759/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-456">
          <a>Doc string</a>
      </div>
      <div id="msg-456" class="collapse collapsable-details">
        <pre>02:29:38.572 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/cea63cbe-bf06-49fd-a4d4-b251745f9759/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-457">
          <a>Doc string</a>
      </div>
      <div id="msg-457" class="collapse collapsable-details">
        <pre>02:29:38.573 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/cea63cbe-bf06-49fd-a4d4-b251745f9759/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:39.070 response time in milliseconds: 497.00
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:39 GMT
4 &lt; Etag: &quot;8d907ee83b504a5bf1de8031bfa4291e-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:37 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A089B6BD4976
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-458">
          <a>Doc string</a>
      </div>
      <div id="msg-458" class="collapse collapsable-details">
        <pre>02:29:39.075 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-459">
          <a>Doc string</a>
      </div>
      <div id="msg-459" class="collapse collapsable-details">
        <pre>02:29:39.076 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/cea63cbe-bf06-49fd-a4d4-b251745f9759/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-460">
          <a>Doc string</a>
      </div>
      <div id="msg-460" class="collapse collapsable-details">
        <pre>02:29:39.076 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[7] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-461">
          <a>Doc string</a>
      </div>
      <div id="msg-461" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-462">
          <a>Doc string</a>
      </div>
      <div id="msg-462" class="collapse collapsable-details">
        <pre>02:29:39.080 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.479</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-463">
          <a>Doc string</a>
      </div>
      <div id="msg-463" class="collapse collapsable-details">
        <pre>02:29:39.082 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:39.559 response time in milliseconds: 476.86
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:39 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/cbf696b7-2425-42b4-54ac-585790c12b74/status&quot;}},&quot;downloadRequestId&quot;:&quot;cbf696b7-2425-42b4-54ac-585790c12b74&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-464">
          <a>Doc string</a>
      </div>
      <div id="msg-464" class="collapse collapsable-details">
        <pre>02:29:39.559 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-465">
          <a>Doc string</a>
      </div>
      <div id="msg-465" class="collapse collapsable-details">
        <pre>02:29:39.560 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cbf696b7-2425-42b4-54ac-585790c12b74/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-466">
          <a>Doc string</a>
      </div>
      <div id="msg-466" class="collapse collapsable-details">
        <pre>02:29:39.560 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cbf696b7-2425-42b4-54ac-585790c12b74/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:40.058 response time in milliseconds: 497.76
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:40 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/f939cb38-3094-405f-b408-e97564c108d6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.508</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-467">
          <a>Doc string</a>
      </div>
      <div id="msg-467" class="collapse collapsable-details">
        <pre>02:29:40.059 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cbf696b7-2425-42b4-54ac-585790c12b74/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:40.566 response time in milliseconds: 507.22
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:40 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/f939cb38-3094-405f-b408-e97564c108d6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-468">
          <a>Doc string</a>
      </div>
      <div id="msg-468" class="collapse collapsable-details">
        <pre>02:29:40.567 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/f939cb38-3094-405f-b408-e97564c108d6/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.511</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-469">
          <a>Doc string</a>
      </div>
      <div id="msg-469" class="collapse collapsable-details">
        <pre>02:29:40.575 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/f939cb38-3094-405f-b408-e97564c108d6/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:41.078 response time in milliseconds: 502.72
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:41 GMT
4 &lt; Etag: &quot;2e0d7b02c29849171c6040d2dc5f95b2-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:39 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08A2E2F23B1
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-470">
          <a>Doc string</a>
      </div>
      <div id="msg-470" class="collapse collapsable-details">
        <pre>02:29:41.084 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-471">
          <a>Doc string</a>
      </div>
      <div id="msg-471" class="collapse collapsable-details">
        <pre>02:29:41.085 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/f939cb38-3094-405f-b408-e97564c108d6/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-472">
          <a>Doc string</a>
      </div>
      <div id="msg-472" class="collapse collapsable-details">
        <pre>02:29:41.085 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[8] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-473">
          <a>Doc string</a>
      </div>
      <div id="msg-473" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-474">
          <a>Doc string</a>
      </div>
      <div id="msg-474" class="collapse collapsable-details">
        <pre>02:29:41.088 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.487</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-475">
          <a>Doc string</a>
      </div>
      <div id="msg-475" class="collapse collapsable-details">
        <pre>02:29:41.089 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:41.575 response time in milliseconds: 486.08
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:41 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/62d03720-6819-4e0f-62a3-4af22170770b/status&quot;}},&quot;downloadRequestId&quot;:&quot;62d03720-6819-4e0f-62a3-4af22170770b&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-476">
          <a>Doc string</a>
      </div>
      <div id="msg-476" class="collapse collapsable-details">
        <pre>02:29:41.581 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-477">
          <a>Doc string</a>
      </div>
      <div id="msg-477" class="collapse collapsable-details">
        <pre>02:29:41.582 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/62d03720-6819-4e0f-62a3-4af22170770b/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.504</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-478">
          <a>Doc string</a>
      </div>
      <div id="msg-478" class="collapse collapsable-details">
        <pre>02:29:41.583 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/62d03720-6819-4e0f-62a3-4af22170770b/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:42.086 response time in milliseconds: 502.82
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:42 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d88ab15f-1fc6-47d8-85ad-15bc566b280d/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.567</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-479">
          <a>Doc string</a>
      </div>
      <div id="msg-479" class="collapse collapsable-details">
        <pre>02:29:42.097 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/62d03720-6819-4e0f-62a3-4af22170770b/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:42.664 response time in milliseconds: 566.07
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:42 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d88ab15f-1fc6-47d8-85ad-15bc566b280d/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-480">
          <a>Doc string</a>
      </div>
      <div id="msg-480" class="collapse collapsable-details">
        <pre>02:29:42.665 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/d88ab15f-1fc6-47d8-85ad-15bc566b280d/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.512</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-481">
          <a>Doc string</a>
      </div>
      <div id="msg-481" class="collapse collapsable-details">
        <pre>02:29:42.665 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d88ab15f-1fc6-47d8-85ad-15bc566b280d/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:43.177 response time in milliseconds: 511.15
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 665
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:43 GMT
4 &lt; Etag: &quot;36e6a8ca974205e1797ee8fd9b7b7fac-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:41 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08AAA91EB63
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-482">
          <a>Doc string</a>
      </div>
      <div id="msg-482" class="collapse collapsable-details">
        <pre>02:29:43.178 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-483">
          <a>Doc string</a>
      </div>
      <div id="msg-483" class="collapse collapsable-details">
        <pre>02:29:43.179 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d88ab15f-1fc6-47d8-85ad-15bc566b280d/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-484">
          <a>Doc string</a>
      </div>
      <div id="msg-484" class="collapse collapsable-details">
        <pre>02:29:43.179 [print] size 665</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[9] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-485">
          <a>Doc string</a>
      </div>
      <div id="msg-485" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-486">
          <a>Doc string</a>
      </div>
      <div id="msg-486" class="collapse collapsable-details">
        <pre>02:29:43.186 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.666</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-487">
          <a>Doc string</a>
      </div>
      <div id="msg-487" class="collapse collapsable-details">
        <pre>02:29:43.187 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:44.852 response time in milliseconds: 1665.45
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:44 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/fc1bdb39-fcb9-442a-5283-3f51ed684868/status&quot;}},&quot;downloadRequestId&quot;:&quot;fc1bdb39-fcb9-442a-5283-3f51ed684868&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-488">
          <a>Doc string</a>
      </div>
      <div id="msg-488" class="collapse collapsable-details">
        <pre>02:29:44.853 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-489">
          <a>Doc string</a>
      </div>
      <div id="msg-489" class="collapse collapsable-details">
        <pre>02:29:44.854 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/fc1bdb39-fcb9-442a-5283-3f51ed684868/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.696</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-490">
          <a>Doc string</a>
      </div>
      <div id="msg-490" class="collapse collapsable-details">
        <pre>02:29:44.854 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/fc1bdb39-fcb9-442a-5283-3f51ed684868/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:45.541 response time in milliseconds: 686.96
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:45 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/013ae09a-c5ed-4085-b02a-878f6d1cc3e2/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-491">
          <a>Doc string</a>
      </div>
      <div id="msg-491" class="collapse collapsable-details">
        <pre>02:29:45.551 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/fc1bdb39-fcb9-442a-5283-3f51ed684868/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:46.039 response time in milliseconds: 486.92
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:45 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/013ae09a-c5ed-4085-b02a-878f6d1cc3e2/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-492">
          <a>Doc string</a>
      </div>
      <div id="msg-492" class="collapse collapsable-details">
        <pre>02:29:46.040 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/013ae09a-c5ed-4085-b02a-878f6d1cc3e2/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.511</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-493">
          <a>Doc string</a>
      </div>
      <div id="msg-493" class="collapse collapsable-details">
        <pre>02:29:46.041 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/013ae09a-c5ed-4085-b02a-878f6d1cc3e2/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:46.551 response time in milliseconds: 510.45
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 662
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:46 GMT
4 &lt; Etag: &quot;570d9008f89fa2dabf0f9fb016f9fd2f-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:45 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08B73E0D900
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-494">
          <a>Doc string</a>
      </div>
      <div id="msg-494" class="collapse collapsable-details">
        <pre>02:29:46.552 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-495">
          <a>Doc string</a>
      </div>
      <div id="msg-495" class="collapse collapsable-details">
        <pre>02:29:46.552 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/013ae09a-c5ed-4085-b02a-878f6d1cc3e2/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-496">
          <a>Doc string</a>
      </div>
      <div id="msg-496" class="collapse collapsable-details">
        <pre>02:29:46.553 [print] size 662</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[10] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-497">
          <a>Doc string</a>
      </div>
      <div id="msg-497" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-498">
          <a>Doc string</a>
      </div>
      <div id="msg-498" class="collapse collapsable-details">
        <pre>02:29:46.556 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-499">
          <a>Doc string</a>
      </div>
      <div id="msg-499" class="collapse collapsable-details">
        <pre>02:29:46.559 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:47.048 response time in milliseconds: 488.92
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:46 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/1ac4573b-dde8-42d5-6ada-69f7eb0b8ccc/status&quot;}},&quot;downloadRequestId&quot;:&quot;1ac4573b-dde8-42d5-6ada-69f7eb0b8ccc&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-500">
          <a>Doc string</a>
      </div>
      <div id="msg-500" class="collapse collapsable-details">
        <pre>02:29:47.049 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-501">
          <a>Doc string</a>
      </div>
      <div id="msg-501" class="collapse collapsable-details">
        <pre>02:29:47.050 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/1ac4573b-dde8-42d5-6ada-69f7eb0b8ccc/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.512</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-502">
          <a>Doc string</a>
      </div>
      <div id="msg-502" class="collapse collapsable-details">
        <pre>02:29:47.051 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/1ac4573b-dde8-42d5-6ada-69f7eb0b8ccc/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:47.562 response time in milliseconds: 510.87
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:47 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/822a526b-e46c-46e0-ade7-2146e425c33e/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.487</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-503">
          <a>Doc string</a>
      </div>
      <div id="msg-503" class="collapse collapsable-details">
        <pre>02:29:47.568 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/1ac4573b-dde8-42d5-6ada-69f7eb0b8ccc/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:48.055 response time in milliseconds: 486.59
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:48 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/822a526b-e46c-46e0-ade7-2146e425c33e/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-504">
          <a>Doc string</a>
      </div>
      <div id="msg-504" class="collapse collapsable-details">
        <pre>02:29:48.055 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/822a526b-e46c-46e0-ade7-2146e425c33e/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-505">
          <a>Doc string</a>
      </div>
      <div id="msg-505" class="collapse collapsable-details">
        <pre>02:29:48.056 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/822a526b-e46c-46e0-ade7-2146e425c33e/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:48.549 response time in milliseconds: 492.47
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 664
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:48 GMT
4 &lt; Etag: &quot;5f35b81d095b74d568b4dc38af5f3bf0-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:47 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08BEBE6EEA0
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-506">
          <a>Doc string</a>
      </div>
      <div id="msg-506" class="collapse collapsable-details">
        <pre>02:29:48.552 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-507">
          <a>Doc string</a>
      </div>
      <div id="msg-507" class="collapse collapsable-details">
        <pre>02:29:48.552 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/822a526b-e46c-46e0-ade7-2146e425c33e/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.008</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-508">
          <a>Doc string</a>
      </div>
      <div id="msg-508" class="collapse collapsable-details">
        <pre>02:29:48.561 [print] size 664</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[11] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-509">
          <a>Doc string</a>
      </div>
      <div id="msg-509" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-510">
          <a>Doc string</a>
      </div>
      <div id="msg-510" class="collapse collapsable-details">
        <pre>02:29:48.573 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-511">
          <a>Doc string</a>
      </div>
      <div id="msg-511" class="collapse collapsable-details">
        <pre>02:29:48.575 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:49.058 response time in milliseconds: 483.09
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:49 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/87d212bf-628d-4302-72f8-9470300ccb4f/status&quot;}},&quot;downloadRequestId&quot;:&quot;87d212bf-628d-4302-72f8-9470300ccb4f&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-512">
          <a>Doc string</a>
      </div>
      <div id="msg-512" class="collapse collapsable-details">
        <pre>02:29:49.065 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-513">
          <a>Doc string</a>
      </div>
      <div id="msg-513" class="collapse collapsable-details">
        <pre>02:29:49.066 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/87d212bf-628d-4302-72f8-9470300ccb4f/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.519</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-514">
          <a>Doc string</a>
      </div>
      <div id="msg-514" class="collapse collapsable-details">
        <pre>02:29:49.066 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/87d212bf-628d-4302-72f8-9470300ccb4f/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:49.585 response time in milliseconds: 518.03
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 159
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:49 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/87d212bf-628d-4302-72f8-9470300ccb4f/status&quot;}},&quot;progress&quot;:0,&quot;status&quot;:&quot;PENDING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.499</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-515">
          <a>Doc string</a>
      </div>
      <div id="msg-515" class="collapse collapsable-details">
        <pre>02:29:49.591 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/87d212bf-628d-4302-72f8-9470300ccb4f/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:50.084 response time in milliseconds: 492.55
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:50 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/ff4ae77f-ce21-4057-ad29-000560cc7e98/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-516">
          <a>Doc string</a>
      </div>
      <div id="msg-516" class="collapse collapsable-details">
        <pre>02:29:50.085 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/ff4ae77f-ce21-4057-ad29-000560cc7e98/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.560</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-517">
          <a>Doc string</a>
      </div>
      <div id="msg-517" class="collapse collapsable-details">
        <pre>02:29:50.094 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/ff4ae77f-ce21-4057-ad29-000560cc7e98/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:50.646 response time in milliseconds: 552.11
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 15643
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:50 GMT
4 &lt; Etag: &quot;92d2b0e275f02587ba642b2c389ea419-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:49 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08C65653ED0
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-518">
          <a>Doc string</a>
      </div>
      <div id="msg-518" class="collapse collapsable-details">
        <pre>02:29:50.652 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-519">
          <a>Doc string</a>
      </div>
      <div id="msg-519" class="collapse collapsable-details">
        <pre>02:29:50.652 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/ff4ae77f-ce21-4057-ad29-000560cc7e98/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-520">
          <a>Doc string</a>
      </div>
      <div id="msg-520" class="collapse collapsable-details">
        <pre>02:29:50.652 [print] size 15643</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[12] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-521">
          <a>Doc string</a>
      </div>
      <div id="msg-521" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-522">
          <a>Doc string</a>
      </div>
      <div id="msg-522" class="collapse collapsable-details">
        <pre>02:29:50.659 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.993</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-523">
          <a>Doc string</a>
      </div>
      <div id="msg-523" class="collapse collapsable-details">
        <pre>02:29:50.665 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:52.651 response time in milliseconds: 1986.21
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:52 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/0404a8ea-d02c-43bf-5e30-2fea33c69f40/status&quot;}},&quot;downloadRequestId&quot;:&quot;0404a8ea-d02c-43bf-5e30-2fea33c69f40&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-524">
          <a>Doc string</a>
      </div>
      <div id="msg-524" class="collapse collapsable-details">
        <pre>02:29:52.656 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-525">
          <a>Doc string</a>
      </div>
      <div id="msg-525" class="collapse collapsable-details">
        <pre>02:29:52.657 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/0404a8ea-d02c-43bf-5e30-2fea33c69f40/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-526">
          <a>Doc string</a>
      </div>
      <div id="msg-526" class="collapse collapsable-details">
        <pre>02:29:52.657 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/0404a8ea-d02c-43bf-5e30-2fea33c69f40/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:53.148 response time in milliseconds: 490.73
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:53 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3f42759d-5ac8-4d68-b348-7ad1e856be23/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.482</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-527">
          <a>Doc string</a>
      </div>
      <div id="msg-527" class="collapse collapsable-details">
        <pre>02:29:53.150 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/0404a8ea-d02c-43bf-5e30-2fea33c69f40/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:53.630 response time in milliseconds: 480.67
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:53 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/3f42759d-5ac8-4d68-b348-7ad1e856be23/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-528">
          <a>Doc string</a>
      </div>
      <div id="msg-528" class="collapse collapsable-details">
        <pre>02:29:53.631 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/3f42759d-5ac8-4d68-b348-7ad1e856be23/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.500</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-529">
          <a>Doc string</a>
      </div>
      <div id="msg-529" class="collapse collapsable-details">
        <pre>02:29:53.632 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3f42759d-5ac8-4d68-b348-7ad1e856be23/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:54.127 response time in milliseconds: 494.49
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:54 GMT
4 &lt; Etag: &quot;c5f18facfb4a72c47cf037e97d9d09f5-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:52 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08D387470FA
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-530">
          <a>Doc string</a>
      </div>
      <div id="msg-530" class="collapse collapsable-details">
        <pre>02:29:54.133 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-531">
          <a>Doc string</a>
      </div>
      <div id="msg-531" class="collapse collapsable-details">
        <pre>02:29:54.133 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/3f42759d-5ac8-4d68-b348-7ad1e856be23/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-532">
          <a>Doc string</a>
      </div>
      <div id="msg-532" class="collapse collapsable-details">
        <pre>02:29:54.134 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[13] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-533">
          <a>Doc string</a>
      </div>
      <div id="msg-533" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-534">
          <a>Doc string</a>
      </div>
      <div id="msg-534" class="collapse collapsable-details">
        <pre>02:29:54.137 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-535">
          <a>Doc string</a>
      </div>
      <div id="msg-535" class="collapse collapsable-details">
        <pre>02:29:54.138 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:54.626 response time in milliseconds: 487.59
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:54 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/50ce9e74-cbc1-41f5-4afe-f11e001e2e43/status&quot;}},&quot;downloadRequestId&quot;:&quot;50ce9e74-cbc1-41f5-4afe-f11e001e2e43&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-536">
          <a>Doc string</a>
      </div>
      <div id="msg-536" class="collapse collapsable-details">
        <pre>02:29:54.629 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-537">
          <a>Doc string</a>
      </div>
      <div id="msg-537" class="collapse collapsable-details">
        <pre>02:29:54.630 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/50ce9e74-cbc1-41f5-4afe-f11e001e2e43/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.495</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-538">
          <a>Doc string</a>
      </div>
      <div id="msg-538" class="collapse collapsable-details">
        <pre>02:29:54.642 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/50ce9e74-cbc1-41f5-4afe-f11e001e2e43/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:55.125 response time in milliseconds: 482.96
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:55 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/68e0860a-b503-457b-8bb4-7efada82f7b4/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.595</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-539">
          <a>Doc string</a>
      </div>
      <div id="msg-539" class="collapse collapsable-details">
        <pre>02:29:55.126 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/50ce9e74-cbc1-41f5-4afe-f11e001e2e43/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:55.720 response time in milliseconds: 593.19
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:55 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/68e0860a-b503-457b-8bb4-7efada82f7b4/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-540">
          <a>Doc string</a>
      </div>
      <div id="msg-540" class="collapse collapsable-details">
        <pre>02:29:55.721 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/68e0860a-b503-457b-8bb4-7efada82f7b4/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.492</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-541">
          <a>Doc string</a>
      </div>
      <div id="msg-541" class="collapse collapsable-details">
        <pre>02:29:55.723 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/68e0860a-b503-457b-8bb4-7efada82f7b4/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:56.214 response time in milliseconds: 490.69
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 664
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:56 GMT
4 &lt; Etag: &quot;8365a857acc7dfcc1a87b36358760104-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:54 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08DB4C2DEC6
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-542">
          <a>Doc string</a>
      </div>
      <div id="msg-542" class="collapse collapsable-details">
        <pre>02:29:56.215 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-543">
          <a>Doc string</a>
      </div>
      <div id="msg-543" class="collapse collapsable-details">
        <pre>02:29:56.215 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/68e0860a-b503-457b-8bb4-7efada82f7b4/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-544">
          <a>Doc string</a>
      </div>
      <div id="msg-544" class="collapse collapsable-details">
        <pre>02:29:56.215 [print] size 664</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[14] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-545">
          <a>Doc string</a>
      </div>
      <div id="msg-545" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-546">
          <a>Doc string</a>
      </div>
      <div id="msg-546" class="collapse collapsable-details">
        <pre>02:29:56.228 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.394</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-547">
          <a>Doc string</a>
      </div>
      <div id="msg-547" class="collapse collapsable-details">
        <pre>02:29:56.229 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:29:58.623 response time in milliseconds: 2393.34
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:58 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/565988ca-9ef3-47ac-48e5-1c605311d98d/status&quot;}},&quot;downloadRequestId&quot;:&quot;565988ca-9ef3-47ac-48e5-1c605311d98d&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-548">
          <a>Doc string</a>
      </div>
      <div id="msg-548" class="collapse collapsable-details">
        <pre>02:29:58.624 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-549">
          <a>Doc string</a>
      </div>
      <div id="msg-549" class="collapse collapsable-details">
        <pre>02:29:58.624 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/565988ca-9ef3-47ac-48e5-1c605311d98d/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.496</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-550">
          <a>Doc string</a>
      </div>
      <div id="msg-550" class="collapse collapsable-details">
        <pre>02:29:58.628 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/565988ca-9ef3-47ac-48e5-1c605311d98d/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:59.119 response time in milliseconds: 491.02
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:59 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/bb558e10-9d05-43dd-b6f4-8029f47010ba/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-551">
          <a>Doc string</a>
      </div>
      <div id="msg-551" class="collapse collapsable-details">
        <pre>02:29:59.121 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/565988ca-9ef3-47ac-48e5-1c605311d98d/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:59.612 response time in milliseconds: 490.17
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:59 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/bb558e10-9d05-43dd-b6f4-8029f47010ba/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-552">
          <a>Doc string</a>
      </div>
      <div id="msg-552" class="collapse collapsable-details">
        <pre>02:29:59.613 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/bb558e10-9d05-43dd-b6f4-8029f47010ba/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-553">
          <a>Doc string</a>
      </div>
      <div id="msg-553" class="collapse collapsable-details">
        <pre>02:29:59.615 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/bb558e10-9d05-43dd-b6f4-8029f47010ba/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:00.109 response time in milliseconds: 493.29
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:00 GMT
4 &lt; Etag: &quot;3788ef3831d8abebc0b00899eb124fde-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:58 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08E9CD6CD04
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-554">
          <a>Doc string</a>
      </div>
      <div id="msg-554" class="collapse collapsable-details">
        <pre>02:30:00.109 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-555">
          <a>Doc string</a>
      </div>
      <div id="msg-555" class="collapse collapsable-details">
        <pre>02:30:00.110 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/bb558e10-9d05-43dd-b6f4-8029f47010ba/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-556">
          <a>Doc string</a>
      </div>
      <div id="msg-556" class="collapse collapsable-details">
        <pre>02:30:00.110 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[15] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-557">
          <a>Doc string</a>
      </div>
      <div id="msg-557" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-558">
          <a>Doc string</a>
      </div>
      <div id="msg-558" class="collapse collapsable-details">
        <pre>02:30:00.114 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.496</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-559">
          <a>Doc string</a>
      </div>
      <div id="msg-559" class="collapse collapsable-details">
        <pre>02:30:00.117 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:00.610 response time in milliseconds: 492.93
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:00 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/c2679faa-5e46-4167-4ae3-984f443e75f0/status&quot;}},&quot;downloadRequestId&quot;:&quot;c2679faa-5e46-4167-4ae3-984f443e75f0&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-560">
          <a>Doc string</a>
      </div>
      <div id="msg-560" class="collapse collapsable-details">
        <pre>02:30:00.614 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-561">
          <a>Doc string</a>
      </div>
      <div id="msg-561" class="collapse collapsable-details">
        <pre>02:30:00.616 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c2679faa-5e46-4167-4ae3-984f443e75f0/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-562">
          <a>Doc string</a>
      </div>
      <div id="msg-562" class="collapse collapsable-details">
        <pre>02:30:00.617 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c2679faa-5e46-4167-4ae3-984f443e75f0/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:01.110 response time in milliseconds: 493.31
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:01 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/7a0a3fa9-ec38-4048-8156-14f398f96467/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.499</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-563">
          <a>Doc string</a>
      </div>
      <div id="msg-563" class="collapse collapsable-details">
        <pre>02:30:01.115 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c2679faa-5e46-4167-4ae3-984f443e75f0/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:01.610 response time in milliseconds: 494.90
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:01 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/7a0a3fa9-ec38-4048-8156-14f398f96467/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-564">
          <a>Doc string</a>
      </div>
      <div id="msg-564" class="collapse collapsable-details">
        <pre>02:30:01.610 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/7a0a3fa9-ec38-4048-8156-14f398f96467/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.518</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-565">
          <a>Doc string</a>
      </div>
      <div id="msg-565" class="collapse collapsable-details">
        <pre>02:30:01.611 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/7a0a3fa9-ec38-4048-8156-14f398f96467/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:02.129 response time in milliseconds: 518.04
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:02 GMT
4 &lt; Etag: &quot;3d247fffd310643a446c86933b15395a-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:00 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08F142A4023
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.008</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-566">
          <a>Doc string</a>
      </div>
      <div id="msg-566" class="collapse collapsable-details">
        <pre>02:30:02.140 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-567">
          <a>Doc string</a>
      </div>
      <div id="msg-567" class="collapse collapsable-details">
        <pre>02:30:02.141 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/7a0a3fa9-ec38-4048-8156-14f398f96467/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-568">
          <a>Doc string</a>
      </div>
      <div id="msg-568" class="collapse collapsable-details">
        <pre>02:30:02.141 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[16] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-569">
          <a>Doc string</a>
      </div>
      <div id="msg-569" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-570">
          <a>Doc string</a>
      </div>
      <div id="msg-570" class="collapse collapsable-details">
        <pre>02:30:02.152 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-571">
          <a>Doc string</a>
      </div>
      <div id="msg-571" class="collapse collapsable-details">
        <pre>02:30:02.153 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:02.641 response time in milliseconds: 487.93
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:02 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/7abc86cb-0628-40af-4a0a-d0c1fcc088b7/status&quot;}},&quot;downloadRequestId&quot;:&quot;7abc86cb-0628-40af-4a0a-d0c1fcc088b7&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-572">
          <a>Doc string</a>
      </div>
      <div id="msg-572" class="collapse collapsable-details">
        <pre>02:30:02.642 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-573">
          <a>Doc string</a>
      </div>
      <div id="msg-573" class="collapse collapsable-details">
        <pre>02:30:02.642 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7abc86cb-0628-40af-4a0a-d0c1fcc088b7/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.486</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-574">
          <a>Doc string</a>
      </div>
      <div id="msg-574" class="collapse collapsable-details">
        <pre>02:30:02.643 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7abc86cb-0628-40af-4a0a-d0c1fcc088b7/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:03.128 response time in milliseconds: 485.25
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:03 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d94cd356-f07e-459c-9bb7-113e7dc35bd6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.502</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-575">
          <a>Doc string</a>
      </div>
      <div id="msg-575" class="collapse collapsable-details">
        <pre>02:30:03.129 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7abc86cb-0628-40af-4a0a-d0c1fcc088b7/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:03.630 response time in milliseconds: 501.23
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:03 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d94cd356-f07e-459c-9bb7-113e7dc35bd6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-576">
          <a>Doc string</a>
      </div>
      <div id="msg-576" class="collapse collapsable-details">
        <pre>02:30:03.633 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/d94cd356-f07e-459c-9bb7-113e7dc35bd6/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.500</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-577">
          <a>Doc string</a>
      </div>
      <div id="msg-577" class="collapse collapsable-details">
        <pre>02:30:03.636 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d94cd356-f07e-459c-9bb7-113e7dc35bd6/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:04.134 response time in milliseconds: 498.04
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:04 GMT
4 &lt; Etag: &quot;41664994d5ba87e83adc5346b1cf9bda-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:02 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08F8CAC0524
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-578">
          <a>Doc string</a>
      </div>
      <div id="msg-578" class="collapse collapsable-details">
        <pre>02:30:04.135 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-579">
          <a>Doc string</a>
      </div>
      <div id="msg-579" class="collapse collapsable-details">
        <pre>02:30:04.136 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d94cd356-f07e-459c-9bb7-113e7dc35bd6/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-580">
          <a>Doc string</a>
      </div>
      <div id="msg-580" class="collapse collapsable-details">
        <pre>02:30:04.136 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[17] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-581">
          <a>Doc string</a>
      </div>
      <div id="msg-581" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-582">
          <a>Doc string</a>
      </div>
      <div id="msg-582" class="collapse collapsable-details">
        <pre>02:30:04.143 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-583">
          <a>Doc string</a>
      </div>
      <div id="msg-583" class="collapse collapsable-details">
        <pre>02:30:04.144 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:04.635 response time in milliseconds: 490.70
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:04 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/4f4a306f-9310-4ed0-4d87-0b7d7e61d849/status&quot;}},&quot;downloadRequestId&quot;:&quot;4f4a306f-9310-4ed0-4d87-0b7d7e61d849&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-584">
          <a>Doc string</a>
      </div>
      <div id="msg-584" class="collapse collapsable-details">
        <pre>02:30:04.635 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-585">
          <a>Doc string</a>
      </div>
      <div id="msg-585" class="collapse collapsable-details">
        <pre>02:30:04.636 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/4f4a306f-9310-4ed0-4d87-0b7d7e61d849/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.497</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-586">
          <a>Doc string</a>
      </div>
      <div id="msg-586" class="collapse collapsable-details">
        <pre>02:30:04.636 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/4f4a306f-9310-4ed0-4d87-0b7d7e61d849/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:05.133 response time in milliseconds: 495.98
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:05 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/c7c8ba26-b085-4b65-b15b-5990d399c824/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.490</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-587">
          <a>Doc string</a>
      </div>
      <div id="msg-587" class="collapse collapsable-details">
        <pre>02:30:05.134 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/4f4a306f-9310-4ed0-4d87-0b7d7e61d849/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:05.623 response time in milliseconds: 489.16
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:05 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/c7c8ba26-b085-4b65-b15b-5990d399c824/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-588">
          <a>Doc string</a>
      </div>
      <div id="msg-588" class="collapse collapsable-details">
        <pre>02:30:05.626 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/c7c8ba26-b085-4b65-b15b-5990d399c824/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.524</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-589">
          <a>Doc string</a>
      </div>
      <div id="msg-589" class="collapse collapsable-details">
        <pre>02:30:05.627 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/c7c8ba26-b085-4b65-b15b-5990d399c824/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:06.151 response time in milliseconds: 523.97
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 664
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:06 GMT
4 &lt; Etag: &quot;4c64e29359388d803ceaab72be013f71-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:04 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A09003875F62
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-590">
          <a>Doc string</a>
      </div>
      <div id="msg-590" class="collapse collapsable-details">
        <pre>02:30:06.153 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-591">
          <a>Doc string</a>
      </div>
      <div id="msg-591" class="collapse collapsable-details">
        <pre>02:30:06.153 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/c7c8ba26-b085-4b65-b15b-5990d399c824/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-592">
          <a>Doc string</a>
      </div>
      <div id="msg-592" class="collapse collapsable-details">
        <pre>02:30:06.153 [print] size 664</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[18] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-593">
          <a>Doc string</a>
      </div>
      <div id="msg-593" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-594">
          <a>Doc string</a>
      </div>
      <div id="msg-594" class="collapse collapsable-details">
        <pre>02:30:06.164 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.535</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-595">
          <a>Doc string</a>
      </div>
      <div id="msg-595" class="collapse collapsable-details">
        <pre>02:30:06.165 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:06.699 response time in milliseconds: 534.48
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:06 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/d313b344-8f15-49af-746e-827b8b1102c0/status&quot;}},&quot;downloadRequestId&quot;:&quot;d313b344-8f15-49af-746e-827b8b1102c0&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-596">
          <a>Doc string</a>
      </div>
      <div id="msg-596" class="collapse collapsable-details">
        <pre>02:30:06.700 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-597">
          <a>Doc string</a>
      </div>
      <div id="msg-597" class="collapse collapsable-details">
        <pre>02:30:06.700 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/d313b344-8f15-49af-746e-827b8b1102c0/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.500</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-598">
          <a>Doc string</a>
      </div>
      <div id="msg-598" class="collapse collapsable-details">
        <pre>02:30:06.703 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/d313b344-8f15-49af-746e-827b8b1102c0/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:07.201 response time in milliseconds: 497.78
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:07 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/880dd6b3-37fe-44dc-ade2-644b12266da7/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.482</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-599">
          <a>Doc string</a>
      </div>
      <div id="msg-599" class="collapse collapsable-details">
        <pre>02:30:07.202 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/d313b344-8f15-49af-746e-827b8b1102c0/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:07.684 response time in milliseconds: 481.65
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:07 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/880dd6b3-37fe-44dc-ade2-644b12266da7/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-600">
          <a>Doc string</a>
      </div>
      <div id="msg-600" class="collapse collapsable-details">
        <pre>02:30:07.685 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/880dd6b3-37fe-44dc-ade2-644b12266da7/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.518</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-601">
          <a>Doc string</a>
      </div>
      <div id="msg-601" class="collapse collapsable-details">
        <pre>02:30:07.685 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/880dd6b3-37fe-44dc-ade2-644b12266da7/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:08.203 response time in milliseconds: 517.25
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:08 GMT
4 &lt; Etag: &quot;698bf174c9ec7080d827986c49866b0c-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:06 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0907E4280B0
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-602">
          <a>Doc string</a>
      </div>
      <div id="msg-602" class="collapse collapsable-details">
        <pre>02:30:08.212 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-603">
          <a>Doc string</a>
      </div>
      <div id="msg-603" class="collapse collapsable-details">
        <pre>02:30:08.212 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/880dd6b3-37fe-44dc-ade2-644b12266da7/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-604">
          <a>Doc string</a>
      </div>
      <div id="msg-604" class="collapse collapsable-details">
        <pre>02:30:08.216 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[19] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-605">
          <a>Doc string</a>
      </div>
      <div id="msg-605" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-606">
          <a>Doc string</a>
      </div>
      <div id="msg-606" class="collapse collapsable-details">
        <pre>02:30:08.220 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.528</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-607">
          <a>Doc string</a>
      </div>
      <div id="msg-607" class="collapse collapsable-details">
        <pre>02:30:08.221 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:08.749 response time in milliseconds: 527.19
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:08 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/50b11d59-5c5c-4604-59f8-57f2d5a033d9/status&quot;}},&quot;downloadRequestId&quot;:&quot;50b11d59-5c5c-4604-59f8-57f2d5a033d9&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-608">
          <a>Doc string</a>
      </div>
      <div id="msg-608" class="collapse collapsable-details">
        <pre>02:30:08.754 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-609">
          <a>Doc string</a>
      </div>
      <div id="msg-609" class="collapse collapsable-details">
        <pre>02:30:08.755 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/50b11d59-5c5c-4604-59f8-57f2d5a033d9/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.482</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-610">
          <a>Doc string</a>
      </div>
      <div id="msg-610" class="collapse collapsable-details">
        <pre>02:30:08.757 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/50b11d59-5c5c-4604-59f8-57f2d5a033d9/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:09.238 response time in milliseconds: 480.43
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:09 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/580346ae-0f19-4c0d-b312-60186f2b0acc/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.812</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-611">
          <a>Doc string</a>
      </div>
      <div id="msg-611" class="collapse collapsable-details">
        <pre>02:30:09.239 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/50b11d59-5c5c-4604-59f8-57f2d5a033d9/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:10.046 response time in milliseconds: 807.10
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:09 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/580346ae-0f19-4c0d-b312-60186f2b0acc/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-612">
          <a>Doc string</a>
      </div>
      <div id="msg-612" class="collapse collapsable-details">
        <pre>02:30:10.053 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/580346ae-0f19-4c0d-b312-60186f2b0acc/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.655</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-613">
          <a>Doc string</a>
      </div>
      <div id="msg-613" class="collapse collapsable-details">
        <pre>02:30:10.056 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/580346ae-0f19-4c0d-b312-60186f2b0acc/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:10.710 response time in milliseconds: 653.44
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 2671
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:10 GMT
4 &lt; Etag: &quot;7575f8df8fd238192e0e02928d8975c7-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:08 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0910F512989
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-614">
          <a>Doc string</a>
      </div>
      <div id="msg-614" class="collapse collapsable-details">
        <pre>02:30:10.711 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-615">
          <a>Doc string</a>
      </div>
      <div id="msg-615" class="collapse collapsable-details">
        <pre>02:30:10.711 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/580346ae-0f19-4c0d-b312-60186f2b0acc/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-616">
          <a>Doc string</a>
      </div>
      <div id="msg-616" class="collapse collapsable-details">
        <pre>02:30:10.711 [print] size 2671</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[20] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-617">
          <a>Doc string</a>
      </div>
      <div id="msg-617" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-618">
          <a>Doc string</a>
      </div>
      <div id="msg-618" class="collapse collapsable-details">
        <pre>02:30:10.717 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.531</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-619">
          <a>Doc string</a>
      </div>
      <div id="msg-619" class="collapse collapsable-details">
        <pre>02:30:10.718 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:11.248 response time in milliseconds: 529.70
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:11 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/3513649a-26be-4e13-5a11-8b5624af0dd2/status&quot;}},&quot;downloadRequestId&quot;:&quot;3513649a-26be-4e13-5a11-8b5624af0dd2&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-620">
          <a>Doc string</a>
      </div>
      <div id="msg-620" class="collapse collapsable-details">
        <pre>02:30:11.249 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-621">
          <a>Doc string</a>
      </div>
      <div id="msg-621" class="collapse collapsable-details">
        <pre>02:30:11.250 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3513649a-26be-4e13-5a11-8b5624af0dd2/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-622">
          <a>Doc string</a>
      </div>
      <div id="msg-622" class="collapse collapsable-details">
        <pre>02:30:11.250 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3513649a-26be-4e13-5a11-8b5624af0dd2/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:11.738 response time in milliseconds: 487.23
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:11 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/965fbd6c-0030-4b1c-851e-a51b58a8936f/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.482</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-623">
          <a>Doc string</a>
      </div>
      <div id="msg-623" class="collapse collapsable-details">
        <pre>02:30:11.739 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3513649a-26be-4e13-5a11-8b5624af0dd2/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:12.220 response time in milliseconds: 481.08
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:12 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/965fbd6c-0030-4b1c-851e-a51b58a8936f/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-624">
          <a>Doc string</a>
      </div>
      <div id="msg-624" class="collapse collapsable-details">
        <pre>02:30:12.221 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/965fbd6c-0030-4b1c-851e-a51b58a8936f/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-625">
          <a>Doc string</a>
      </div>
      <div id="msg-625" class="collapse collapsable-details">
        <pre>02:30:12.221 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/965fbd6c-0030-4b1c-851e-a51b58a8936f/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:12.716 response time in milliseconds: 494.06
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:12 GMT
4 &lt; Etag: &quot;5c391095119ce3ea4eece2175d1167fa-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:11 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0918C5DE151
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-626">
          <a>Doc string</a>
      </div>
      <div id="msg-626" class="collapse collapsable-details">
        <pre>02:30:12.723 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-627">
          <a>Doc string</a>
      </div>
      <div id="msg-627" class="collapse collapsable-details">
        <pre>02:30:12.723 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/965fbd6c-0030-4b1c-851e-a51b58a8936f/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-628">
          <a>Doc string</a>
      </div>
      <div id="msg-628" class="collapse collapsable-details">
        <pre>02:30:12.723 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[21] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-629">
          <a>Doc string</a>
      </div>
      <div id="msg-629" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-630">
          <a>Doc string</a>
      </div>
      <div id="msg-630" class="collapse collapsable-details">
        <pre>02:30:12.730 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.503</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-631">
          <a>Doc string</a>
      </div>
      <div id="msg-631" class="collapse collapsable-details">
        <pre>02:30:12.731 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:15.234 response time in milliseconds: 2502.78
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:15 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/f2a50cd0-205c-4445-7494-edd3c3b83ead/status&quot;}},&quot;downloadRequestId&quot;:&quot;f2a50cd0-205c-4445-7494-edd3c3b83ead&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-632">
          <a>Doc string</a>
      </div>
      <div id="msg-632" class="collapse collapsable-details">
        <pre>02:30:15.235 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-633">
          <a>Doc string</a>
      </div>
      <div id="msg-633" class="collapse collapsable-details">
        <pre>02:30:15.235 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f2a50cd0-205c-4445-7494-edd3c3b83ead/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-634">
          <a>Doc string</a>
      </div>
      <div id="msg-634" class="collapse collapsable-details">
        <pre>02:30:15.235 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f2a50cd0-205c-4445-7494-edd3c3b83ead/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:15.723 response time in milliseconds: 487.21
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:15 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/685f4950-e668-4ce4-b5bb-a8e6ef81207f/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.521</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-635">
          <a>Doc string</a>
      </div>
      <div id="msg-635" class="collapse collapsable-details">
        <pre>02:30:15.729 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f2a50cd0-205c-4445-7494-edd3c3b83ead/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:16.250 response time in milliseconds: 520.28
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:16 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/685f4950-e668-4ce4-b5bb-a8e6ef81207f/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.011</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-636">
          <a>Doc string</a>
      </div>
      <div id="msg-636" class="collapse collapsable-details">
        <pre>02:30:16.265 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/685f4950-e668-4ce4-b5bb-a8e6ef81207f/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.529</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-637">
          <a>Doc string</a>
      </div>
      <div id="msg-637" class="collapse collapsable-details">
        <pre>02:30:16.271 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/685f4950-e668-4ce4-b5bb-a8e6ef81207f/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:16.797 response time in milliseconds: 526.19
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 664
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:16 GMT
4 &lt; Etag: &quot;24a09e85a9be3cc8ce154a7d5f1e6bdf-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:15 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0927E59ACCC
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.008</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-638">
          <a>Doc string</a>
      </div>
      <div id="msg-638" class="collapse collapsable-details">
        <pre>02:30:16.810 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-639">
          <a>Doc string</a>
      </div>
      <div id="msg-639" class="collapse collapsable-details">
        <pre>02:30:16.813 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/685f4950-e668-4ce4-b5bb-a8e6ef81207f/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-640">
          <a>Doc string</a>
      </div>
      <div id="msg-640" class="collapse collapsable-details">
        <pre>02:30:16.815 [print] size 664</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.008</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[22] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-641">
          <a>Doc string</a>
      </div>
      <div id="msg-641" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-642">
          <a>Doc string</a>
      </div>
      <div id="msg-642" class="collapse collapsable-details">
        <pre>02:30:16.841 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.571</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-643">
          <a>Doc string</a>
      </div>
      <div id="msg-643" class="collapse collapsable-details">
        <pre>02:30:16.847 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:18.413 response time in milliseconds: 1565.50
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:18 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/341b6867-6841-4afc-4c8d-fd304f129301/status&quot;}},&quot;downloadRequestId&quot;:&quot;341b6867-6841-4afc-4c8d-fd304f129301&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-644">
          <a>Doc string</a>
      </div>
      <div id="msg-644" class="collapse collapsable-details">
        <pre>02:30:18.418 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-645">
          <a>Doc string</a>
      </div>
      <div id="msg-645" class="collapse collapsable-details">
        <pre>02:30:18.424 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/341b6867-6841-4afc-4c8d-fd304f129301/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.489</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-646">
          <a>Doc string</a>
      </div>
      <div id="msg-646" class="collapse collapsable-details">
        <pre>02:30:18.425 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/341b6867-6841-4afc-4c8d-fd304f129301/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:18.913 response time in milliseconds: 487.57
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:18 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/2ba08adf-2c3e-412d-b608-b8405981c0ab/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.492</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-647">
          <a>Doc string</a>
      </div>
      <div id="msg-647" class="collapse collapsable-details">
        <pre>02:30:18.914 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/341b6867-6841-4afc-4c8d-fd304f129301/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:19.405 response time in milliseconds: 490.57
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:19 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/2ba08adf-2c3e-412d-b608-b8405981c0ab/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-648">
          <a>Doc string</a>
      </div>
      <div id="msg-648" class="collapse collapsable-details">
        <pre>02:30:19.407 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/2ba08adf-2c3e-412d-b608-b8405981c0ab/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-649">
          <a>Doc string</a>
      </div>
      <div id="msg-649" class="collapse collapsable-details">
        <pre>02:30:19.408 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/2ba08adf-2c3e-412d-b608-b8405981c0ab/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:19.900 response time in milliseconds: 491.86
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 4986
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:19 GMT
4 &lt; Etag: &quot;59a275b01b5185daddf82bdccc7ee515-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:18 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A09338BABE02
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-650">
          <a>Doc string</a>
      </div>
      <div id="msg-650" class="collapse collapsable-details">
        <pre>02:30:19.909 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-651">
          <a>Doc string</a>
      </div>
      <div id="msg-651" class="collapse collapsable-details">
        <pre>02:30:19.911 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/2ba08adf-2c3e-412d-b608-b8405981c0ab/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.011</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-652">
          <a>Doc string</a>
      </div>
      <div id="msg-652" class="collapse collapsable-details">
        <pre>02:30:19.922 [print] size 4986</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[23] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-653">
          <a>Doc string</a>
      </div>
      <div id="msg-653" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-654">
          <a>Doc string</a>
      </div>
      <div id="msg-654" class="collapse collapsable-details">
        <pre>02:30:19.936 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-655">
          <a>Doc string</a>
      </div>
      <div id="msg-655" class="collapse collapsable-details">
        <pre>02:30:19.938 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:20.423 response time in milliseconds: 484.64
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:20 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/2ceabdb0-954e-42fd-5051-f4ff1db5c217/status&quot;}},&quot;downloadRequestId&quot;:&quot;2ceabdb0-954e-42fd-5051-f4ff1db5c217&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-656">
          <a>Doc string</a>
      </div>
      <div id="msg-656" class="collapse collapsable-details">
        <pre>02:30:20.428 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-657">
          <a>Doc string</a>
      </div>
      <div id="msg-657" class="collapse collapsable-details">
        <pre>02:30:20.428 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2ceabdb0-954e-42fd-5051-f4ff1db5c217/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.492</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-658">
          <a>Doc string</a>
      </div>
      <div id="msg-658" class="collapse collapsable-details">
        <pre>02:30:20.433 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2ceabdb0-954e-42fd-5051-f4ff1db5c217/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:20.921 response time in milliseconds: 487.56
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:20 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/64de35b6-c38c-40a7-b10f-85537e2e4bc6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.512</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-659">
          <a>Doc string</a>
      </div>
      <div id="msg-659" class="collapse collapsable-details">
        <pre>02:30:20.926 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2ceabdb0-954e-42fd-5051-f4ff1db5c217/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:21.429 response time in milliseconds: 502.79
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:21 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/64de35b6-c38c-40a7-b10f-85537e2e4bc6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-660">
          <a>Doc string</a>
      </div>
      <div id="msg-660" class="collapse collapsable-details">
        <pre>02:30:21.435 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/64de35b6-c38c-40a7-b10f-85537e2e4bc6/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-661">
          <a>Doc string</a>
      </div>
      <div id="msg-661" class="collapse collapsable-details">
        <pre>02:30:21.435 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/64de35b6-c38c-40a7-b10f-85537e2e4bc6/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:21.936 response time in milliseconds: 500.39
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 2794
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:21 GMT
4 &lt; Etag: &quot;4ed902b651a034d4815f3a562fd4a7e6-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:20 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A093B1F47ABA
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-662">
          <a>Doc string</a>
      </div>
      <div id="msg-662" class="collapse collapsable-details">
        <pre>02:30:21.941 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-663">
          <a>Doc string</a>
      </div>
      <div id="msg-663" class="collapse collapsable-details">
        <pre>02:30:21.942 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/64de35b6-c38c-40a7-b10f-85537e2e4bc6/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-664">
          <a>Doc string</a>
      </div>
      <div id="msg-664" class="collapse collapsable-details">
        <pre>02:30:21.942 [print] size 2794</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[24] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-665">
          <a>Doc string</a>
      </div>
      <div id="msg-665" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-666">
          <a>Doc string</a>
      </div>
      <div id="msg-666" class="collapse collapsable-details">
        <pre>02:30:21.947 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.495</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-667">
          <a>Doc string</a>
      </div>
      <div id="msg-667" class="collapse collapsable-details">
        <pre>02:30:21.947 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:22.439 response time in milliseconds: 491.16
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:22 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/6bec33ac-2af1-4dc0-43f7-a64ad0c14d21/status&quot;}},&quot;downloadRequestId&quot;:&quot;6bec33ac-2af1-4dc0-43f7-a64ad0c14d21&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-668">
          <a>Doc string</a>
      </div>
      <div id="msg-668" class="collapse collapsable-details">
        <pre>02:30:22.444 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-669">
          <a>Doc string</a>
      </div>
      <div id="msg-669" class="collapse collapsable-details">
        <pre>02:30:22.454 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/6bec33ac-2af1-4dc0-43f7-a64ad0c14d21/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.497</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-670">
          <a>Doc string</a>
      </div>
      <div id="msg-670" class="collapse collapsable-details">
        <pre>02:30:22.454 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/6bec33ac-2af1-4dc0-43f7-a64ad0c14d21/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:22.951 response time in milliseconds: 496.70
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:22 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/25d7f6f7-361d-4228-8972-65aecdfe0355/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.495</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-671">
          <a>Doc string</a>
      </div>
      <div id="msg-671" class="collapse collapsable-details">
        <pre>02:30:22.952 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/6bec33ac-2af1-4dc0-43f7-a64ad0c14d21/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:23.447 response time in milliseconds: 494.39
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:23 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/25d7f6f7-361d-4228-8972-65aecdfe0355/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-672">
          <a>Doc string</a>
      </div>
      <div id="msg-672" class="collapse collapsable-details">
        <pre>02:30:23.449 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/25d7f6f7-361d-4228-8972-65aecdfe0355/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.507</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-673">
          <a>Doc string</a>
      </div>
      <div id="msg-673" class="collapse collapsable-details">
        <pre>02:30:23.451 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/25d7f6f7-361d-4228-8972-65aecdfe0355/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:23.957 response time in milliseconds: 505.71
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:23 GMT
4 &lt; Etag: &quot;622e5e122854b684cab3907eb046cc56-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:22 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0942A7FB020
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-674">
          <a>Doc string</a>
      </div>
      <div id="msg-674" class="collapse collapsable-details">
        <pre>02:30:23.964 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-675">
          <a>Doc string</a>
      </div>
      <div id="msg-675" class="collapse collapsable-details">
        <pre>02:30:23.967 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/25d7f6f7-361d-4228-8972-65aecdfe0355/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-676">
          <a>Doc string</a>
      </div>
      <div id="msg-676" class="collapse collapsable-details">
        <pre>02:30:23.969 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[25] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-677">
          <a>Doc string</a>
      </div>
      <div id="msg-677" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-678">
          <a>Doc string</a>
      </div>
      <div id="msg-678" class="collapse collapsable-details">
        <pre>02:30:23.988 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.482</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-679">
          <a>Doc string</a>
      </div>
      <div id="msg-679" class="collapse collapsable-details">
        <pre>02:30:23.989 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:24.471 response time in milliseconds: 480.80
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:24 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/f41f658c-4be0-4068-7f49-5ca695596e8c/status&quot;}},&quot;downloadRequestId&quot;:&quot;f41f658c-4be0-4068-7f49-5ca695596e8c&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-680">
          <a>Doc string</a>
      </div>
      <div id="msg-680" class="collapse collapsable-details">
        <pre>02:30:24.472 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-681">
          <a>Doc string</a>
      </div>
      <div id="msg-681" class="collapse collapsable-details">
        <pre>02:30:24.473 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f41f658c-4be0-4068-7f49-5ca695596e8c/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.481</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-682">
          <a>Doc string</a>
      </div>
      <div id="msg-682" class="collapse collapsable-details">
        <pre>02:30:24.474 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f41f658c-4be0-4068-7f49-5ca695596e8c/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:24.954 response time in milliseconds: 480.68
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:24 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/b8e26c05-6900-4554-80ed-d32f81dbaf01/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.489</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-683">
          <a>Doc string</a>
      </div>
      <div id="msg-683" class="collapse collapsable-details">
        <pre>02:30:24.955 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f41f658c-4be0-4068-7f49-5ca695596e8c/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:25.443 response time in milliseconds: 488.11
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:25 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/b8e26c05-6900-4554-80ed-d32f81dbaf01/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-684">
          <a>Doc string</a>
      </div>
      <div id="msg-684" class="collapse collapsable-details">
        <pre>02:30:25.444 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/b8e26c05-6900-4554-80ed-d32f81dbaf01/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.496</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-685">
          <a>Doc string</a>
      </div>
      <div id="msg-685" class="collapse collapsable-details">
        <pre>02:30:25.445 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/b8e26c05-6900-4554-80ed-d32f81dbaf01/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:25.941 response time in milliseconds: 495.71
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:25 GMT
4 &lt; Etag: &quot;e73ed377b495b8147764af7b9608a51c-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:24 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A094A0CCA395
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-686">
          <a>Doc string</a>
      </div>
      <div id="msg-686" class="collapse collapsable-details">
        <pre>02:30:25.945 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-687">
          <a>Doc string</a>
      </div>
      <div id="msg-687" class="collapse collapsable-details">
        <pre>02:30:25.945 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/b8e26c05-6900-4554-80ed-d32f81dbaf01/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-688">
          <a>Doc string</a>
      </div>
      <div id="msg-688" class="collapse collapsable-details">
        <pre>02:30:25.945 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[26] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-689">
          <a>Doc string</a>
      </div>
      <div id="msg-689" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-690">
          <a>Doc string</a>
      </div>
      <div id="msg-690" class="collapse collapsable-details">
        <pre>02:30:25.950 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.416</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-691">
          <a>Doc string</a>
      </div>
      <div id="msg-691" class="collapse collapsable-details">
        <pre>02:30:25.952 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:28.367 response time in milliseconds: 2414.88
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:28 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/7dca01e1-4838-4634-70bf-3ba2f9963381/status&quot;}},&quot;downloadRequestId&quot;:&quot;7dca01e1-4838-4634-70bf-3ba2f9963381&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-692">
          <a>Doc string</a>
      </div>
      <div id="msg-692" class="collapse collapsable-details">
        <pre>02:30:28.368 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-693">
          <a>Doc string</a>
      </div>
      <div id="msg-693" class="collapse collapsable-details">
        <pre>02:30:28.369 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7dca01e1-4838-4634-70bf-3ba2f9963381/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-694">
          <a>Doc string</a>
      </div>
      <div id="msg-694" class="collapse collapsable-details">
        <pre>02:30:28.370 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7dca01e1-4838-4634-70bf-3ba2f9963381/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:28.857 response time in milliseconds: 487.04
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:28 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/938105cb-b8d9-428e-917d-54b6aa5074b1/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.513</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-695">
          <a>Doc string</a>
      </div>
      <div id="msg-695" class="collapse collapsable-details">
        <pre>02:30:28.863 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7dca01e1-4838-4634-70bf-3ba2f9963381/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:29.370 response time in milliseconds: 507.16
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:29 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/938105cb-b8d9-428e-917d-54b6aa5074b1/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-696">
          <a>Doc string</a>
      </div>
      <div id="msg-696" class="collapse collapsable-details">
        <pre>02:30:29.371 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/938105cb-b8d9-428e-917d-54b6aa5074b1/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.540</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-697">
          <a>Doc string</a>
      </div>
      <div id="msg-697" class="collapse collapsable-details">
        <pre>02:30:29.372 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/938105cb-b8d9-428e-917d-54b6aa5074b1/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:29.912 response time in milliseconds: 539.71
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 664
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:29 GMT
4 &lt; Etag: &quot;8574ae91d4ee25e3990a15e0e13935bf-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:28 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0958B887DA7
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-698">
          <a>Doc string</a>
      </div>
      <div id="msg-698" class="collapse collapsable-details">
        <pre>02:30:29.913 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-699">
          <a>Doc string</a>
      </div>
      <div id="msg-699" class="collapse collapsable-details">
        <pre>02:30:29.913 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/938105cb-b8d9-428e-917d-54b6aa5074b1/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-700">
          <a>Doc string</a>
      </div>
      <div id="msg-700" class="collapse collapsable-details">
        <pre>02:30:29.914 [print] size 664</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[27] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-701">
          <a>Doc string</a>
      </div>
      <div id="msg-701" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-702">
          <a>Doc string</a>
      </div>
      <div id="msg-702" class="collapse collapsable-details">
        <pre>02:30:29.919 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.335</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-703">
          <a>Doc string</a>
      </div>
      <div id="msg-703" class="collapse collapsable-details">
        <pre>02:30:29.920 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:32.254 response time in milliseconds: 2333.99
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:32 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/a01964db-571d-4d01-4c40-3f171d07c344/status&quot;}},&quot;downloadRequestId&quot;:&quot;a01964db-571d-4d01-4c40-3f171d07c344&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-704">
          <a>Doc string</a>
      </div>
      <div id="msg-704" class="collapse collapsable-details">
        <pre>02:30:32.255 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-705">
          <a>Doc string</a>
      </div>
      <div id="msg-705" class="collapse collapsable-details">
        <pre>02:30:32.255 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/a01964db-571d-4d01-4c40-3f171d07c344/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.497</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-706">
          <a>Doc string</a>
      </div>
      <div id="msg-706" class="collapse collapsable-details">
        <pre>02:30:32.256 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/a01964db-571d-4d01-4c40-3f171d07c344/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:32.753 response time in milliseconds: 496.25
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:32 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/b3ac1a42-1eb6-455c-aec2-84f523398d40/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.499</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-707">
          <a>Doc string</a>
      </div>
      <div id="msg-707" class="collapse collapsable-details">
        <pre>02:30:32.755 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/a01964db-571d-4d01-4c40-3f171d07c344/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:33.249 response time in milliseconds: 494.34
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:33 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/b3ac1a42-1eb6-455c-aec2-84f523398d40/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-708">
          <a>Doc string</a>
      </div>
      <div id="msg-708" class="collapse collapsable-details">
        <pre>02:30:33.258 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/b3ac1a42-1eb6-455c-aec2-84f523398d40/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.504</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-709">
          <a>Doc string</a>
      </div>
      <div id="msg-709" class="collapse collapsable-details">
        <pre>02:30:33.259 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/b3ac1a42-1eb6-455c-aec2-84f523398d40/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:33.763 response time in milliseconds: 503.37
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:33 GMT
4 &lt; Etag: &quot;b8a56b8e2f5ee9069653120fb488d40c-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:32 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A09672DA9A66
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-710">
          <a>Doc string</a>
      </div>
      <div id="msg-710" class="collapse collapsable-details">
        <pre>02:30:33.764 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-711">
          <a>Doc string</a>
      </div>
      <div id="msg-711" class="collapse collapsable-details">
        <pre>02:30:33.764 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/b3ac1a42-1eb6-455c-aec2-84f523398d40/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-712">
          <a>Doc string</a>
      </div>
      <div id="msg-712" class="collapse collapsable-details">
        <pre>02:30:33.764 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[28] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-713">
          <a>Doc string</a>
      </div>
      <div id="msg-713" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.009</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-714">
          <a>Doc string</a>
      </div>
      <div id="msg-714" class="collapse collapsable-details">
        <pre>02:30:33.782 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.049</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-715">
          <a>Doc string</a>
      </div>
      <div id="msg-715" class="collapse collapsable-details">
        <pre>02:30:33.784 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:35.831 response time in milliseconds: 2046.73
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:35 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/dbfb0ad6-e990-4af1-4ee5-cfe1afaa42b2/status&quot;}},&quot;downloadRequestId&quot;:&quot;dbfb0ad6-e990-4af1-4ee5-cfe1afaa42b2&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-716">
          <a>Doc string</a>
      </div>
      <div id="msg-716" class="collapse collapsable-details">
        <pre>02:30:35.833 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-717">
          <a>Doc string</a>
      </div>
      <div id="msg-717" class="collapse collapsable-details">
        <pre>02:30:35.833 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/dbfb0ad6-e990-4af1-4ee5-cfe1afaa42b2/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.482</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-718">
          <a>Doc string</a>
      </div>
      <div id="msg-718" class="collapse collapsable-details">
        <pre>02:30:35.834 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/dbfb0ad6-e990-4af1-4ee5-cfe1afaa42b2/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:36.315 response time in milliseconds: 481.64
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:36 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/439dde55-48da-4cab-9a76-0e2d68488fd5/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.490</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-719">
          <a>Doc string</a>
      </div>
      <div id="msg-719" class="collapse collapsable-details">
        <pre>02:30:36.317 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/dbfb0ad6-e990-4af1-4ee5-cfe1afaa42b2/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:36.806 response time in milliseconds: 487.25
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:36 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/439dde55-48da-4cab-9a76-0e2d68488fd5/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-720">
          <a>Doc string</a>
      </div>
      <div id="msg-720" class="collapse collapsable-details">
        <pre>02:30:36.815 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/439dde55-48da-4cab-9a76-0e2d68488fd5/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.506</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-721">
          <a>Doc string</a>
      </div>
      <div id="msg-721" class="collapse collapsable-details">
        <pre>02:30:36.816 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/439dde55-48da-4cab-9a76-0e2d68488fd5/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:37.321 response time in milliseconds: 505.12
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 663
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:37 GMT
4 &lt; Etag: &quot;204d6c90ea30a591e3473fb5df8974a2-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:35 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0974705DFBE
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-722">
          <a>Doc string</a>
      </div>
      <div id="msg-722" class="collapse collapsable-details">
        <pre>02:30:37.324 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-723">
          <a>Doc string</a>
      </div>
      <div id="msg-723" class="collapse collapsable-details">
        <pre>02:30:37.325 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/439dde55-48da-4cab-9a76-0e2d68488fd5/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-724">
          <a>Doc string</a>
      </div>
      <div id="msg-724" class="collapse collapsable-details">
        <pre>02:30:37.325 [print] size 663</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[29] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-725">
          <a>Doc string</a>
      </div>
      <div id="msg-725" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-726">
          <a>Doc string</a>
      </div>
      <div id="msg-726" class="collapse collapsable-details">
        <pre>02:30:37.332 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,
  &quot;featuretypes&quot;: [
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.505</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-727">
          <a>Doc string</a>
      </div>
      <div id="msg-727" class="collapse collapsable-details">
        <pre>02:30:37.333 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 275
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,&quot;featuretypes&quot;:[&quot;kadastralegrens&quot;]}

02:30:38.838 response time in milliseconds: 1503.88
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:38 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/5657ee66-0abc-4e3a-4cf1-b3b7c0fd7404/status&quot;}},&quot;downloadRequestId&quot;:&quot;5657ee66-0abc-4e3a-4cf1-b3b7c0fd7404&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-728">
          <a>Doc string</a>
      </div>
      <div id="msg-728" class="collapse collapsable-details">
        <pre>02:30:38.839 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-729">
          <a>Doc string</a>
      </div>
      <div id="msg-729" class="collapse collapsable-details">
        <pre>02:30:38.839 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/5657ee66-0abc-4e3a-4cf1-b3b7c0fd7404/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.490</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-730">
          <a>Doc string</a>
      </div>
      <div id="msg-730" class="collapse collapsable-details">
        <pre>02:30:38.840 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/5657ee66-0abc-4e3a-4cf1-b3b7c0fd7404/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:39.329 response time in milliseconds: 489.45
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:39 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/5f9784c0-3bea-48c0-ba7c-e6dd00345346/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.483</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-731">
          <a>Doc string</a>
      </div>
      <div id="msg-731" class="collapse collapsable-details">
        <pre>02:30:39.330 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/5657ee66-0abc-4e3a-4cf1-b3b7c0fd7404/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:39.810 response time in milliseconds: 479.97
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:39 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/5f9784c0-3bea-48c0-ba7c-e6dd00345346/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-732">
          <a>Doc string</a>
      </div>
      <div id="msg-732" class="collapse collapsable-details">
        <pre>02:30:39.821 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/5f9784c0-3bea-48c0-ba7c-e6dd00345346/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-733">
          <a>Doc string</a>
      </div>
      <div id="msg-733" class="collapse collapsable-details">
        <pre>02:30:39.823 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/5f9784c0-3bea-48c0-ba7c-e6dd00345346/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:40.317 response time in milliseconds: 494.05
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 9292
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:40 GMT
4 &lt; Etag: &quot;45df00b4f04213ff38fa91f87fd99b5a-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:38 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A097F9B38FEA
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-734">
          <a>Doc string</a>
      </div>
      <div id="msg-734" class="collapse collapsable-details">
        <pre>02:30:40.321 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-735">
          <a>Doc string</a>
      </div>
      <div id="msg-735" class="collapse collapsable-details">
        <pre>02:30:40.323 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/5f9784c0-3bea-48c0-ba7c-e6dd00345346/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-736">
          <a>Doc string</a>
      </div>
      <div id="msg-736" class="collapse collapsable-details">
        <pre>02:30:40.325 [print] size 9292</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
      </div>
</div>


    

  </div>
</div>

                      
<div class="element">
  
  
<div class="tags indention">
  </div>

  
  <span class="lead-duration duration">2:56.634</span>


    <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-737">
    
<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">downoad deltas op locatie buitenhof perceel&quot;,&quot;kadastralegrens</span>
  

       <i class="chevron fa fa-fw"></i>
  </div>

  </span>
  <div class="description indention"></div>

  <div id="element-737" class="collapse collapsable-details ">
    


    
<div class="steps inner-level">
    <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-738">
    
<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>
  

       <i class="chevron fa fa-fw"></i>
  </div>

  </div>

  <div id="steps-738" class="inner-level collapse collapsable-details ">
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;bepaal een delta ids &quot;</span>
  
  <span class="lead-duration duration">0.012</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-739">
          <a>Doc string</a>
      </div>
      <div id="msg-739" class="collapse collapsable-details">
        <pre>02:29:23.379 base url : {
  &quot;apiBaseUrl&quot;: &quot;https://downloads.pdok.nl/&quot;
}
 
02:29:23.392 [print] bepaal een delta ids</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">Given</span>
  <span class="name">url apiBaseUrl + 'kadastralekaart/api/v4_0/delta'</span>
  
  <span class="lead-duration duration">0.018</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">And</span>
  <span class="name">param count = 1000</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">And</span>
  <span class="name">param after-delta-id = &quot;b2219778-e94c-40b0-92bd-95e3491af2bb&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.540</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-740">
          <a>Doc string</a>
      </div>
      <div id="msg-740" class="collapse collapsable-details">
        <pre>02:29:23.415 request:
1 &gt; GET https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta?count=1000&amp;after-delta-id=b2219778-e94c-40b0-92bd-95e3491af2bb
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:23.952 response time in milliseconds: 536.39
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:23 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Cnection: close
{&quot;deltas&quot;:[{&quot;id&quot;:&quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-15T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-16T21:59:59Z&quot;}},{&quot;id&quot;:&quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-16T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-17T21:59:59Z&quot;}},{&quot;id&quot;:&quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-17T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-18T21:59:59Z&quot;}},{&quot;id&quot;:&quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-18T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-19T21:59:59Z&quot;}},{&quot;id&quot;:&quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-19T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-20T21:59:59Z&quot;}},{&quot;id&quot;:&quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-20T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-21T21:59:59Z&quot;}},{&quot;id&quot;:&quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-21T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-22T21:59:59Z&quot;}},{&quot;id&quot;:&quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-22T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-23T21:59:59Z&quot;}},{&quot;id&quot;:&quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-23T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-24T21:59:59Z&quot;}},{&quot;id&quot;:&quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-24T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-25T21:59:59Z&quot;}},{&quot;id&quot;:&quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-25T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-26T21:59:59Z&quot;}},{&quot;id&quot;:&quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-26T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-27T21:59:59Z&quot;}},{&quot;id&quot;:&quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-27T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-28T21:59:59Z&quot;}},{&quot;id&quot;:&quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-28T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-29T21:59:59Z&quot;}},{&quot;id&quot;:&quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-29T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-30T21:59:59Z&quot;}},{&quot;id&quot;:&quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-30T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-05-31T21:59:59Z&quot;}},{&quot;id&quot;:&quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-05-31T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-01T21:59:59Z&quot;}},{&quot;id&quot;:&quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-01T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-02T21:59:59Z&quot;}},{&quot;id&quot;:&quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-02T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-03T21:59:59Z&quot;}},{&quot;id&quot;:&quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-03T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-04T21:59:59Z&quot;}},{&quot;id&quot;:&quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-04T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-05T21:59:59Z&quot;}},{&quot;id&quot;:&quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-05T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-06T21:59:59Z&quot;}},{&quot;id&quot;:&quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-06T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-07T21:59:59Z&quot;}},{&quot;id&quot;:&quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-07T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-08T21:59:59Z&quot;}},{&quot;id&quot;:&quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-08T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-09T21:59:59Z&quot;}},{&quot;id&quot;:&quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-09T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-10T21:59:59Z&quot;}},{&quot;id&quot;:&quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-10T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-11T21:59:59Z&quot;}},{&quot;id&quot;:&quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-11T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-12T21:59:59Z&quot;}},{&quot;id&quot;:&quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-12T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-13T21:59:59Z&quot;}},{&quot;id&quot;:&quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,&quot;timeWindow&quot;:{&quot;from&quot;:&quot;2021-06-13T21:59:59Z&quot;,&quot;to&quot;:&quot;2021-06-14T21:59:59Z&quot;}}],&quot;_links&quot;:[]}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">And</span>
  <span class="name">def alldelta = response.deltas</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;alldelta:&quot;, alldelta</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-741">
          <a>Doc string</a>
      </div>
      <div id="msg-741" class="collapse collapsable-details">
        <pre>02:29:23.965 [print] alldelta: [
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-15T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-16T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-16T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-17T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-17T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-18T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-18T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-19T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-19T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-20T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-20T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-21T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-21T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-22T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-22T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-23T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-23T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-24T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-24T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-25T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-25T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-26T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-26T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-27T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-27T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-28T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-28T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-29T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-29T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-30T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-30T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-05-31T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-05-31T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-01T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-01T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-02T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-02T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-03T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-03T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-04T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-04T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-05T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-05T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-06T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-06T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-07T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-07T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-08T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-08T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-09T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-09T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-10T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-10T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-11T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-11T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-12T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-12T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-13T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;
  },
  {
    &quot;timeWindow&quot;: {
      &quot;from&quot;: &quot;2021-06-13T21:59:59Z&quot;,
      &quot;to&quot;: &quot;2021-06-14T21:59:59Z&quot;
    },
    &quot;id&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;
  }
]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def pararray = []</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def featureslist = [&quot;perceel&quot;,&quot;kadastralegrens&quot;]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def fun =</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-742">
          <a>Doc string</a>
      </div>
      <div id="msg-742" class="collapse collapsable-details">
        <pre>function(delta) {
req = { format: &quot;gml&quot;, geofilter: 'POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))' };
req[&quot;deltaId&quot;] = delta[&quot;id&quot;];
req[&quot;featuretypes&quot;] = featureslist;
pararray.add (req);
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">eval karate.forEach(alldelta, fun)</span>
  
  <span class="lead-duration duration">0.016</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;array:&quot;, pararray</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-743">
          <a>Doc string</a>
      </div>
      <div id="msg-743" class="collapse collapsable-details">
        <pre>02:29:23.988 [print] array: [
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,
    &quot;featuretypes&quot;: [
      &quot;perceel&quot;,
      &quot;kadastralegrens&quot;
    ]
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  },
  {
    &quot;format&quot;: &quot;gml&quot;,
    &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
    &quot;deltaId&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,
    &quot;featuretypes&quot;: &quot;#ref:net.minidev.json.JSONArray&quot;
  }
]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">print &quot;done&quot;</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-744">
          <a>Doc string</a>
      </div>
      <div id="msg-744" class="collapse collapsable-details">
        <pre>02:29:23.995 [print] done</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">*</span>
  <span class="name">def dodelta = call read('DeltaCustomargs.feature') pararray</span>
  
  <span class="lead-duration duration">1:28.108</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[0] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-745">
          <a>Doc string</a>
      </div>
      <div id="msg-745" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-746">
          <a>Doc string</a>
      </div>
      <div id="msg-746" class="collapse collapsable-details">
        <pre>02:29:24.037 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.489</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-747">
          <a>Doc string</a>
      </div>
      <div id="msg-747" class="collapse collapsable-details">
        <pre>02:29:24.038 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;2b104759-f77d-496a-94e4-7064f199b446&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:24.526 response time in milliseconds: 487.58
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:24 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/e5313f51-2db8-43cf-4c4f-b2e569833f1e/status&quot;}},&quot;downloadRequestId&quot;:&quot;e5313f51-2db8-43cf-4c4f-b2e569833f1e&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-748">
          <a>Doc string</a>
      </div>
      <div id="msg-748" class="collapse collapsable-details">
        <pre>02:29:24.529 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-749">
          <a>Doc string</a>
      </div>
      <div id="msg-749" class="collapse collapsable-details">
        <pre>02:29:24.531 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e5313f51-2db8-43cf-4c4f-b2e569833f1e/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.523</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-750">
          <a>Doc string</a>
      </div>
      <div id="msg-750" class="collapse collapsable-details">
        <pre>02:29:24.533 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e5313f51-2db8-43cf-4c4f-b2e569833f1e/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:25.055 response time in milliseconds: 521.38
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:24 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/cd2265cb-3788-4238-a862-061814963b56/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-751">
          <a>Doc string</a>
      </div>
      <div id="msg-751" class="collapse collapsable-details">
        <pre>02:29:25.062 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/e5313f51-2db8-43cf-4c4f-b2e569833f1e/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:25.545 response time in milliseconds: 482.71
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:25 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/cd2265cb-3788-4238-a862-061814963b56/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-752">
          <a>Doc string</a>
      </div>
      <div id="msg-752" class="collapse collapsable-details">
        <pre>02:29:25.551 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/cd2265cb-3788-4238-a862-061814963b56/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.544</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-753">
          <a>Doc string</a>
      </div>
      <div id="msg-753" class="collapse collapsable-details">
        <pre>02:29:25.552 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/cd2265cb-3788-4238-a862-061814963b56/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:26.095 response time in milliseconds: 543.05
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:26 GMT
4 &lt; Etag: &quot;f6c91f7f801f2eece8189397126811c6-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:24 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A086B00487C7
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-754">
          <a>Doc string</a>
      </div>
      <div id="msg-754" class="collapse collapsable-details">
        <pre>02:29:26.107 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-755">
          <a>Doc string</a>
      </div>
      <div id="msg-755" class="collapse collapsable-details">
        <pre>02:29:26.110 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/cd2265cb-3788-4238-a862-061814963b56/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-756">
          <a>Doc string</a>
      </div>
      <div id="msg-756" class="collapse collapsable-details">
        <pre>02:29:26.110 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[1] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-757">
          <a>Doc string</a>
      </div>
      <div id="msg-757" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.009</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-758">
          <a>Doc string</a>
      </div>
      <div id="msg-758" class="collapse collapsable-details">
        <pre>02:29:26.125 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.486</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-759">
          <a>Doc string</a>
      </div>
      <div id="msg-759" class="collapse collapsable-details">
        <pre>02:29:26.131 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;c31553da-c1ff-4d9e-80d4-dd60544a1b2d&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:26.611 response time in milliseconds: 480.15
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:26 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/68348283-98d1-4559-5a54-ef30a666b3c1/status&quot;}},&quot;downloadRequestId&quot;:&quot;68348283-98d1-4559-5a54-ef30a666b3c1&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.009</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-760">
          <a>Doc string</a>
      </div>
      <div id="msg-760" class="collapse collapsable-details">
        <pre>02:29:26.621 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-761">
          <a>Doc string</a>
      </div>
      <div id="msg-761" class="collapse collapsable-details">
        <pre>02:29:26.623 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/68348283-98d1-4559-5a54-ef30a666b3c1/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.496</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-762">
          <a>Doc string</a>
      </div>
      <div id="msg-762" class="collapse collapsable-details">
        <pre>02:29:26.624 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/68348283-98d1-4559-5a54-ef30a666b3c1/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:27.119 response time in milliseconds: 494.88
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:27 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e7f97e7f-e7ef-4d8b-a2ba-80f4b267f898/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.489</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-763">
          <a>Doc string</a>
      </div>
      <div id="msg-763" class="collapse collapsable-details">
        <pre>02:29:27.121 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/68348283-98d1-4559-5a54-ef30a666b3c1/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:27.608 response time in milliseconds: 486.43
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:27 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e7f97e7f-e7ef-4d8b-a2ba-80f4b267f898/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-764">
          <a>Doc string</a>
      </div>
      <div id="msg-764" class="collapse collapsable-details">
        <pre>02:29:27.611 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/e7f97e7f-e7ef-4d8b-a2ba-80f4b267f898/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.511</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-765">
          <a>Doc string</a>
      </div>
      <div id="msg-765" class="collapse collapsable-details">
        <pre>02:29:27.613 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e7f97e7f-e7ef-4d8b-a2ba-80f4b267f898/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:28.123 response time in milliseconds: 509.73
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:28 GMT
4 &lt; Etag: &quot;3ecb9dbf25abb00914c101fdab670fdc-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:26 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0872A5F81E5
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-766">
          <a>Doc string</a>
      </div>
      <div id="msg-766" class="collapse collapsable-details">
        <pre>02:29:28.124 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-767">
          <a>Doc string</a>
      </div>
      <div id="msg-767" class="collapse collapsable-details">
        <pre>02:29:28.124 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e7f97e7f-e7ef-4d8b-a2ba-80f4b267f898/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-768">
          <a>Doc string</a>
      </div>
      <div id="msg-768" class="collapse collapsable-details">
        <pre>02:29:28.125 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[2] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-769">
          <a>Doc string</a>
      </div>
      <div id="msg-769" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-770">
          <a>Doc string</a>
      </div>
      <div id="msg-770" class="collapse collapsable-details">
        <pre>02:29:28.130 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.486</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-771">
          <a>Doc string</a>
      </div>
      <div id="msg-771" class="collapse collapsable-details">
        <pre>02:29:28.133 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;801a3c3e-a010-4fff-9c4a-812d7c813674&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:28.616 response time in milliseconds: 483.05
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:28 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/ffae6374-6173-4473-42f6-ba88b6f568be/status&quot;}},&quot;downloadRequestId&quot;:&quot;ffae6374-6173-4473-42f6-ba88b6f568be&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-772">
          <a>Doc string</a>
      </div>
      <div id="msg-772" class="collapse collapsable-details">
        <pre>02:29:28.618 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-773">
          <a>Doc string</a>
      </div>
      <div id="msg-773" class="collapse collapsable-details">
        <pre>02:29:28.619 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ffae6374-6173-4473-42f6-ba88b6f568be/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-774">
          <a>Doc string</a>
      </div>
      <div id="msg-774" class="collapse collapsable-details">
        <pre>02:29:28.620 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ffae6374-6173-4473-42f6-ba88b6f568be/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:29.104 response time in milliseconds: 484.32
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:29 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/73d5b260-2a33-4fc8-96cb-5fd2b2335c68/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.487</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-775">
          <a>Doc string</a>
      </div>
      <div id="msg-775" class="collapse collapsable-details">
        <pre>02:29:29.109 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ffae6374-6173-4473-42f6-ba88b6f568be/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:29.594 response time in milliseconds: 484.28
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:29 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/73d5b260-2a33-4fc8-96cb-5fd2b2335c68/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-776">
          <a>Doc string</a>
      </div>
      <div id="msg-776" class="collapse collapsable-details">
        <pre>02:29:29.599 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/73d5b260-2a33-4fc8-96cb-5fd2b2335c68/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.525</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-777">
          <a>Doc string</a>
      </div>
      <div id="msg-777" class="collapse collapsable-details">
        <pre>02:29:29.600 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/73d5b260-2a33-4fc8-96cb-5fd2b2335c68/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:30.125 response time in milliseconds: 524.10
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:30 GMT
4 &lt; Etag: &quot;e410cef9211084c546507fc15ba690ee-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:28 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A087A1811119
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-778">
          <a>Doc string</a>
      </div>
      <div id="msg-778" class="collapse collapsable-details">
        <pre>02:29:30.126 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-779">
          <a>Doc string</a>
      </div>
      <div id="msg-779" class="collapse collapsable-details">
        <pre>02:29:30.127 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/73d5b260-2a33-4fc8-96cb-5fd2b2335c68/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-780">
          <a>Doc string</a>
      </div>
      <div id="msg-780" class="collapse collapsable-details">
        <pre>02:29:30.127 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[3] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-781">
          <a>Doc string</a>
      </div>
      <div id="msg-781" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-782">
          <a>Doc string</a>
      </div>
      <div id="msg-782" class="collapse collapsable-details">
        <pre>02:29:30.133 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.781</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-783">
          <a>Doc string</a>
      </div>
      <div id="msg-783" class="collapse collapsable-details">
        <pre>02:29:30.134 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;9d181f42-7ef5-4c43-b7d7-3cf4195e1473&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:30.915 response time in milliseconds: 780.39
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:30 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/c84f5017-ec42-4760-75a4-04eec5ad3205/status&quot;}},&quot;downloadRequestId&quot;:&quot;c84f5017-ec42-4760-75a4-04eec5ad3205&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-784">
          <a>Doc string</a>
      </div>
      <div id="msg-784" class="collapse collapsable-details">
        <pre>02:29:30.921 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-785">
          <a>Doc string</a>
      </div>
      <div id="msg-785" class="collapse collapsable-details">
        <pre>02:29:30.923 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c84f5017-ec42-4760-75a4-04eec5ad3205/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.535</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-786">
          <a>Doc string</a>
      </div>
      <div id="msg-786" class="collapse collapsable-details">
        <pre>02:29:30.923 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c84f5017-ec42-4760-75a4-04eec5ad3205/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:31.457 response time in milliseconds: 533.94
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:31 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/52ef7077-cb22-4310-ba70-8e57e7a49dd8/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.484</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-787">
          <a>Doc string</a>
      </div>
      <div id="msg-787" class="collapse collapsable-details">
        <pre>02:29:31.459 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c84f5017-ec42-4760-75a4-04eec5ad3205/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:31.942 response time in milliseconds: 483.44
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:31 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/52ef7077-cb22-4310-ba70-8e57e7a49dd8/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-788">
          <a>Doc string</a>
      </div>
      <div id="msg-788" class="collapse collapsable-details">
        <pre>02:29:31.943 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/52ef7077-cb22-4310-ba70-8e57e7a49dd8/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-789">
          <a>Doc string</a>
      </div>
      <div id="msg-789" class="collapse collapsable-details">
        <pre>02:29:31.944 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/52ef7077-cb22-4310-ba70-8e57e7a49dd8/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:32.437 response time in milliseconds: 492.53
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:32 GMT
4 &lt; Etag: &quot;2c844c507a2a63e88b203c4aeb631890-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:31 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0882B81DA5B
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-790">
          <a>Doc string</a>
      </div>
      <div id="msg-790" class="collapse collapsable-details">
        <pre>02:29:32.440 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-791">
          <a>Doc string</a>
      </div>
      <div id="msg-791" class="collapse collapsable-details">
        <pre>02:29:32.441 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/52ef7077-cb22-4310-ba70-8e57e7a49dd8/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-792">
          <a>Doc string</a>
      </div>
      <div id="msg-792" class="collapse collapsable-details">
        <pre>02:29:32.442 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[4] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-793">
          <a>Doc string</a>
      </div>
      <div id="msg-793" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-794">
          <a>Doc string</a>
      </div>
      <div id="msg-794" class="collapse collapsable-details">
        <pre>02:29:32.458 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-795">
          <a>Doc string</a>
      </div>
      <div id="msg-795" class="collapse collapsable-details">
        <pre>02:29:32.460 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;9c93aa0c-86a4-49fa-826e-549c719cc0aa&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:32.943 response time in milliseconds: 482.82
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:32 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/7eea21c7-3cdf-4c14-5dc7-8f184f3bf51e/status&quot;}},&quot;downloadRequestId&quot;:&quot;7eea21c7-3cdf-4c14-5dc7-8f184f3bf51e&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-796">
          <a>Doc string</a>
      </div>
      <div id="msg-796" class="collapse collapsable-details">
        <pre>02:29:32.945 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-797">
          <a>Doc string</a>
      </div>
      <div id="msg-797" class="collapse collapsable-details">
        <pre>02:29:32.945 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7eea21c7-3cdf-4c14-5dc7-8f184f3bf51e/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.486</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-798">
          <a>Doc string</a>
      </div>
      <div id="msg-798" class="collapse collapsable-details">
        <pre>02:29:32.946 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7eea21c7-3cdf-4c14-5dc7-8f184f3bf51e/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:33.431 response time in milliseconds: 485.04
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 161
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:33 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/7eea21c7-3cdf-4c14-5dc7-8f184f3bf51e/status&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;RUNNING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-799">
          <a>Doc string</a>
      </div>
      <div id="msg-799" class="collapse collapsable-details">
        <pre>02:29:33.436 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/7eea21c7-3cdf-4c14-5dc7-8f184f3bf51e/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:33.929 response time in milliseconds: 492.37
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:33 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/cba39ab5-bf73-4a13-ad75-5c5ba17c619b/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-800">
          <a>Doc string</a>
      </div>
      <div id="msg-800" class="collapse collapsable-details">
        <pre>02:29:33.933 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/cba39ab5-bf73-4a13-ad75-5c5ba17c619b/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.500</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-801">
          <a>Doc string</a>
      </div>
      <div id="msg-801" class="collapse collapsable-details">
        <pre>02:29:33.934 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/cba39ab5-bf73-4a13-ad75-5c5ba17c619b/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:34.433 response time in milliseconds: 499.32
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1308
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:34 GMT
4 &lt; Etag: &quot;869166bfde4ee6ce22e95e06d3109796-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:33 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A088A2809EBA
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-802">
          <a>Doc string</a>
      </div>
      <div id="msg-802" class="collapse collapsable-details">
        <pre>02:29:34.436 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.006</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-803">
          <a>Doc string</a>
      </div>
      <div id="msg-803" class="collapse collapsable-details">
        <pre>02:29:34.443 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/cba39ab5-bf73-4a13-ad75-5c5ba17c619b/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-804">
          <a>Doc string</a>
      </div>
      <div id="msg-804" class="collapse collapsable-details">
        <pre>02:29:34.443 [print] size 1308</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[5] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-805">
          <a>Doc string</a>
      </div>
      <div id="msg-805" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-806">
          <a>Doc string</a>
      </div>
      <div id="msg-806" class="collapse collapsable-details">
        <pre>02:29:34.459 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.139</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-807">
          <a>Doc string</a>
      </div>
      <div id="msg-807" class="collapse collapsable-details">
        <pre>02:29:34.461 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;1577858c-8c9f-481a-8e45-084bd85e5f4e&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:36.599 response time in milliseconds: 2138.20
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:36 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/bbba88fe-2459-4c76-58ac-0a3912f75e05/status&quot;}},&quot;downloadRequestId&quot;:&quot;bbba88fe-2459-4c76-58ac-0a3912f75e05&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-808">
          <a>Doc string</a>
      </div>
      <div id="msg-808" class="collapse collapsable-details">
        <pre>02:29:36.606 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-809">
          <a>Doc string</a>
      </div>
      <div id="msg-809" class="collapse collapsable-details">
        <pre>02:29:36.606 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/bbba88fe-2459-4c76-58ac-0a3912f75e05/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.484</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-810">
          <a>Doc string</a>
      </div>
      <div id="msg-810" class="collapse collapsable-details">
        <pre>02:29:36.607 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/bbba88fe-2459-4c76-58ac-0a3912f75e05/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:37.091 response time in milliseconds: 483.30
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:37 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/14d69d3a-9020-4130-ade9-045c2651b022/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.499</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-811">
          <a>Doc string</a>
      </div>
      <div id="msg-811" class="collapse collapsable-details">
        <pre>02:29:37.093 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/bbba88fe-2459-4c76-58ac-0a3912f75e05/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:37.582 response time in milliseconds: 488.76
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:37 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/14d69d3a-9020-4130-ade9-045c2651b022/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-812">
          <a>Doc string</a>
      </div>
      <div id="msg-812" class="collapse collapsable-details">
        <pre>02:29:37.593 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/14d69d3a-9020-4130-ade9-045c2651b022/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.497</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-813">
          <a>Doc string</a>
      </div>
      <div id="msg-813" class="collapse collapsable-details">
        <pre>02:29:37.594 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/14d69d3a-9020-4130-ade9-045c2651b022/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:38.091 response time in milliseconds: 496.40
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:38 GMT
4 &lt; Etag: &quot;a37be85009ae47109348b0db3f1741f6-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:36 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0897C680F99
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-814">
          <a>Doc string</a>
      </div>
      <div id="msg-814" class="collapse collapsable-details">
        <pre>02:29:38.097 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-815">
          <a>Doc string</a>
      </div>
      <div id="msg-815" class="collapse collapsable-details">
        <pre>02:29:38.098 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/14d69d3a-9020-4130-ade9-045c2651b022/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-816">
          <a>Doc string</a>
      </div>
      <div id="msg-816" class="collapse collapsable-details">
        <pre>02:29:38.098 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[6] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-817">
          <a>Doc string</a>
      </div>
      <div id="msg-817" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-818">
          <a>Doc string</a>
      </div>
      <div id="msg-818" class="collapse collapsable-details">
        <pre>02:29:38.110 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.507</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-819">
          <a>Doc string</a>
      </div>
      <div id="msg-819" class="collapse collapsable-details">
        <pre>02:29:38.111 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;f784d3c1-2e95-4c30-9268-11d0d61ac131&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:38.618 response time in milliseconds: 506.38
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:38 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/02841582-f5c8-4d13-5f6d-ac1f7c89bcba/status&quot;}},&quot;downloadRequestId&quot;:&quot;02841582-f5c8-4d13-5f6d-ac1f7c89bcba&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-820">
          <a>Doc string</a>
      </div>
      <div id="msg-820" class="collapse collapsable-details">
        <pre>02:29:38.619 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-821">
          <a>Doc string</a>
      </div>
      <div id="msg-821" class="collapse collapsable-details">
        <pre>02:29:38.619 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/02841582-f5c8-4d13-5f6d-ac1f7c89bcba/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-822">
          <a>Doc string</a>
      </div>
      <div id="msg-822" class="collapse collapsable-details">
        <pre>02:29:38.619 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/02841582-f5c8-4d13-5f6d-ac1f7c89bcba/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:39.117 response time in milliseconds: 497.04
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:39 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/459105b6-c5c1-4ceb-a313-78bc3fa3dfc6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.504</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-823">
          <a>Doc string</a>
      </div>
      <div id="msg-823" class="collapse collapsable-details">
        <pre>02:29:39.118 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/02841582-f5c8-4d13-5f6d-ac1f7c89bcba/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:39.621 response time in milliseconds: 503.23
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:39 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/459105b6-c5c1-4ceb-a313-78bc3fa3dfc6/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-824">
          <a>Doc string</a>
      </div>
      <div id="msg-824" class="collapse collapsable-details">
        <pre>02:29:39.622 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/459105b6-c5c1-4ceb-a313-78bc3fa3dfc6/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-825">
          <a>Doc string</a>
      </div>
      <div id="msg-825" class="collapse collapsable-details">
        <pre>02:29:39.623 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/459105b6-c5c1-4ceb-a313-78bc3fa3dfc6/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:40.116 response time in milliseconds: 492.76
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:40 GMT
4 &lt; Etag: &quot;cf7e2c8a20107a34f72c715feb4bc71b-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:38 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A089F51FD889
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-826">
          <a>Doc string</a>
      </div>
      <div id="msg-826" class="collapse collapsable-details">
        <pre>02:29:40.117 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-827">
          <a>Doc string</a>
      </div>
      <div id="msg-827" class="collapse collapsable-details">
        <pre>02:29:40.117 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/459105b6-c5c1-4ceb-a313-78bc3fa3dfc6/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-828">
          <a>Doc string</a>
      </div>
      <div id="msg-828" class="collapse collapsable-details">
        <pre>02:29:40.118 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[7] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-829">
          <a>Doc string</a>
      </div>
      <div id="msg-829" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-830">
          <a>Doc string</a>
      </div>
      <div id="msg-830" class="collapse collapsable-details">
        <pre>02:29:40.131 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.483</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-831">
          <a>Doc string</a>
      </div>
      <div id="msg-831" class="collapse collapsable-details">
        <pre>02:29:40.132 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;e6640b5a-f20a-450e-9250-986540178c75&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:40.614 response time in milliseconds: 481.78
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:40 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/cbe528bd-d911-4c7e-4cbe-d53050ced698/status&quot;}},&quot;downloadRequestId&quot;:&quot;cbe528bd-d911-4c7e-4cbe-d53050ced698&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-832">
          <a>Doc string</a>
      </div>
      <div id="msg-832" class="collapse collapsable-details">
        <pre>02:29:40.619 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-833">
          <a>Doc string</a>
      </div>
      <div id="msg-833" class="collapse collapsable-details">
        <pre>02:29:40.619 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cbe528bd-d911-4c7e-4cbe-d53050ced698/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.483</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-834">
          <a>Doc string</a>
      </div>
      <div id="msg-834" class="collapse collapsable-details">
        <pre>02:29:40.620 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cbe528bd-d911-4c7e-4cbe-d53050ced698/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:41.103 response time in milliseconds: 482.87
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:41 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/7d93a357-9315-4fd3-b06a-69f1d8a62209/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.490</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-835">
          <a>Doc string</a>
      </div>
      <div id="msg-835" class="collapse collapsable-details">
        <pre>02:29:41.103 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cbe528bd-d911-4c7e-4cbe-d53050ced698/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:41.593 response time in milliseconds: 489.55
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:41 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/7d93a357-9315-4fd3-b06a-69f1d8a62209/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-836">
          <a>Doc string</a>
      </div>
      <div id="msg-836" class="collapse collapsable-details">
        <pre>02:29:41.594 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/7d93a357-9315-4fd3-b06a-69f1d8a62209/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-837">
          <a>Doc string</a>
      </div>
      <div id="msg-837" class="collapse collapsable-details">
        <pre>02:29:41.595 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/7d93a357-9315-4fd3-b06a-69f1d8a62209/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:42.093 response time in milliseconds: 497.82
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:42 GMT
4 &lt; Etag: &quot;83fe560aac37ceea361b9dcaa07a27f3-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:40 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08A6AB2E1FD
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-838">
          <a>Doc string</a>
      </div>
      <div id="msg-838" class="collapse collapsable-details">
        <pre>02:29:42.094 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-839">
          <a>Doc string</a>
      </div>
      <div id="msg-839" class="collapse collapsable-details">
        <pre>02:29:42.094 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/7d93a357-9315-4fd3-b06a-69f1d8a62209/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-840">
          <a>Doc string</a>
      </div>
      <div id="msg-840" class="collapse collapsable-details">
        <pre>02:29:42.094 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[8] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-841">
          <a>Doc string</a>
      </div>
      <div id="msg-841" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-842">
          <a>Doc string</a>
      </div>
      <div id="msg-842" class="collapse collapsable-details">
        <pre>02:29:42.100 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.560</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-843">
          <a>Doc string</a>
      </div>
      <div id="msg-843" class="collapse collapsable-details">
        <pre>02:29:42.101 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;1c15ea7f-bf22-43a8-b5e9-b66a1871f27d&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:43.661 response time in milliseconds: 1559.38
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:43 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/8c47a5cb-c3c2-4b79-7604-15376278a101/status&quot;}},&quot;downloadRequestId&quot;:&quot;8c47a5cb-c3c2-4b79-7604-15376278a101&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-844">
          <a>Doc string</a>
      </div>
      <div id="msg-844" class="collapse collapsable-details">
        <pre>02:29:43.667 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-845">
          <a>Doc string</a>
      </div>
      <div id="msg-845" class="collapse collapsable-details">
        <pre>02:29:43.668 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/8c47a5cb-c3c2-4b79-7604-15376278a101/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.518</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-846">
          <a>Doc string</a>
      </div>
      <div id="msg-846" class="collapse collapsable-details">
        <pre>02:29:43.672 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/8c47a5cb-c3c2-4b79-7604-15376278a101/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:44.186 response time in milliseconds: 513.45
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:44 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/ba46ac67-39d3-421a-861e-66c85d11b76a/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.496</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-847">
          <a>Doc string</a>
      </div>
      <div id="msg-847" class="collapse collapsable-details">
        <pre>02:29:44.188 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/8c47a5cb-c3c2-4b79-7604-15376278a101/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:44.676 response time in milliseconds: 488.45
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:44 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/ba46ac67-39d3-421a-861e-66c85d11b76a/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-848">
          <a>Doc string</a>
      </div>
      <div id="msg-848" class="collapse collapsable-details">
        <pre>02:29:44.684 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/ba46ac67-39d3-421a-861e-66c85d11b76a/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.612</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-849">
          <a>Doc string</a>
      </div>
      <div id="msg-849" class="collapse collapsable-details">
        <pre>02:29:44.686 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/ba46ac67-39d3-421a-861e-66c85d11b76a/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:45.297 response time in milliseconds: 611.23
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1312
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:45 GMT
4 &lt; Etag: &quot;57548413887977e29e29576bf30f60ad-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:44 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08B29F1E942
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-850">
          <a>Doc string</a>
      </div>
      <div id="msg-850" class="collapse collapsable-details">
        <pre>02:29:45.298 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-851">
          <a>Doc string</a>
      </div>
      <div id="msg-851" class="collapse collapsable-details">
        <pre>02:29:45.298 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/ba46ac67-39d3-421a-861e-66c85d11b76a/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-852">
          <a>Doc string</a>
      </div>
      <div id="msg-852" class="collapse collapsable-details">
        <pre>02:29:45.299 [print] size 1312</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[9] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-853">
          <a>Doc string</a>
      </div>
      <div id="msg-853" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-854">
          <a>Doc string</a>
      </div>
      <div id="msg-854" class="collapse collapsable-details">
        <pre>02:29:45.303 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.502</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-855">
          <a>Doc string</a>
      </div>
      <div id="msg-855" class="collapse collapsable-details">
        <pre>02:29:45.304 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;25e98e4e-ef9b-42d1-a419-03fef9478802&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:45.805 response time in milliseconds: 499.19
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:45 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/5b9c20e2-8e48-414c-5fb4-01eb8c9cd198/status&quot;}},&quot;downloadRequestId&quot;:&quot;5b9c20e2-8e48-414c-5fb4-01eb8c9cd198&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-856">
          <a>Doc string</a>
      </div>
      <div id="msg-856" class="collapse collapsable-details">
        <pre>02:29:45.806 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-857">
          <a>Doc string</a>
      </div>
      <div id="msg-857" class="collapse collapsable-details">
        <pre>02:29:45.806 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/5b9c20e2-8e48-414c-5fb4-01eb8c9cd198/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.503</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-858">
          <a>Doc string</a>
      </div>
      <div id="msg-858" class="collapse collapsable-details">
        <pre>02:29:45.807 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/5b9c20e2-8e48-414c-5fb4-01eb8c9cd198/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:46.307 response time in milliseconds: 499.48
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 161
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:46 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/5b9c20e2-8e48-414c-5fb4-01eb8c9cd198/status&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;RUNNING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-859">
          <a>Doc string</a>
      </div>
      <div id="msg-859" class="collapse collapsable-details">
        <pre>02:29:46.311 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/5b9c20e2-8e48-414c-5fb4-01eb8c9cd198/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:46.804 response time in milliseconds: 492.73
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:46 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/ceb0f994-6089-4031-8898-67c5b2734942/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-860">
          <a>Doc string</a>
      </div>
      <div id="msg-860" class="collapse collapsable-details">
        <pre>02:29:46.812 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/ceb0f994-6089-4031-8898-67c5b2734942/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.575</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-861">
          <a>Doc string</a>
      </div>
      <div id="msg-861" class="collapse collapsable-details">
        <pre>02:29:46.814 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/ceb0f994-6089-4031-8898-67c5b2734942/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:47.389 response time in milliseconds: 574.56
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1306
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:47 GMT
4 &lt; Etag: &quot;c941425af6bb0163e023228e87446572-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:46 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08BA3EFA97D
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-862">
          <a>Doc string</a>
      </div>
      <div id="msg-862" class="collapse collapsable-details">
        <pre>02:29:47.393 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-863">
          <a>Doc string</a>
      </div>
      <div id="msg-863" class="collapse collapsable-details">
        <pre>02:29:47.393 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/ceb0f994-6089-4031-8898-67c5b2734942/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-864">
          <a>Doc string</a>
      </div>
      <div id="msg-864" class="collapse collapsable-details">
        <pre>02:29:47.393 [print] size 1306</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[10] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-865">
          <a>Doc string</a>
      </div>
      <div id="msg-865" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.012</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-866">
          <a>Doc string</a>
      </div>
      <div id="msg-866" class="collapse collapsable-details">
        <pre>02:29:47.408 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.772</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-867">
          <a>Doc string</a>
      </div>
      <div id="msg-867" class="collapse collapsable-details">
        <pre>02:29:47.409 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;9297d9e4-cc92-415f-b258-642b4ecdb967&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:49.181 response time in milliseconds: 1771.77
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:49 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/ca73b644-647e-404c-76c0-acb3a2c7b14d/status&quot;}},&quot;downloadRequestId&quot;:&quot;ca73b644-647e-404c-76c0-acb3a2c7b14d&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-868">
          <a>Doc string</a>
      </div>
      <div id="msg-868" class="collapse collapsable-details">
        <pre>02:29:49.187 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-869">
          <a>Doc string</a>
      </div>
      <div id="msg-869" class="collapse collapsable-details">
        <pre>02:29:49.187 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ca73b644-647e-404c-76c0-acb3a2c7b14d/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-870">
          <a>Doc string</a>
      </div>
      <div id="msg-870" class="collapse collapsable-details">
        <pre>02:29:49.188 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ca73b644-647e-404c-76c0-acb3a2c7b14d/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:49.676 response time in milliseconds: 487.84
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 159
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:49 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/ca73b644-647e-404c-76c0-acb3a2c7b14d/status&quot;}},&quot;progress&quot;:0,&quot;status&quot;:&quot;PENDING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">6.073</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-871">
          <a>Doc string</a>
      </div>
      <div id="msg-871" class="collapse collapsable-details">
        <pre>02:29:49.686 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ca73b644-647e-404c-76c0-acb3a2c7b14d/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:50.256 response time in milliseconds: 569.69
3 &lt; 200
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 159
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:50 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/ca73b644-647e-404c-76c0-acb3a2c7b14d/status&quot;}},&quot;progress&quot;:0,&quot;status&quot;:&quot;PENDING&quot;}

02:29:50.256 retry condition not satisfied: responseStatus == 201
02:29:50.256 sleeping before retry #1
02:29:55.257 request:
4 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/ca73b644-647e-404c-76c0-acb3a2c7b14d/status
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:55.759 response time in milliseconds: 501.65
4 &lt; 201
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
4 &lt; Content-Length: 167
4 &lt; Content-Type: application/json
4 &lt; Date: Tue, 15 Jun 2021 02:29:55 GMT
4 &lt; Expires: 0
4 &lt; Pragma: no-cache
4 &lt; Server: Apache
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/906861e7-fada-410d-b9e7-ef27b27649ae/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}

02:29:55.759 retry condition satisfied</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-872">
          <a>Doc string</a>
      </div>
      <div id="msg-872" class="collapse collapsable-details">
        <pre>02:29:55.759 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/906861e7-fada-410d-b9e7-ef27b27649ae/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.502</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-873">
          <a>Doc string</a>
      </div>
      <div id="msg-873" class="collapse collapsable-details">
        <pre>02:29:55.762 request:
5 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/906861e7-fada-410d-b9e7-ef27b27649ae/extract.zip
5 &gt; Accept-Encoding: gzip,deflate
5 &gt; Connection: Keep-Alive
5 &gt; Host: downloads.pdok.nl
5 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:56.264 response time in milliseconds: 502.11
5 &lt; 200
5 &lt; Accept-Ranges: bytes
5 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
5 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
5 &lt; Access-Control-Allow-Origin: *
5 &lt; Access-Control-Max-Age: 1000
5 &lt; Content-Disposition: attachment; filename=extract.zip
5 &lt; Content-Length: 1310
5 &lt; Content-Security-Policy: block-all-mixed-content
5 &lt; Content-Type: application/zip
5 &lt; Date: Tue, 15 Jun 2021 02:29:56 GMT
5 &lt; Etag: &quot;b43d199b1b7790c6c2231a51214027bd-1&quot;
5 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:50 GMT
5 &lt; Server: MinIO
5 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
5 &lt; Vary: Origin
5 &lt; X-Amz-Request-Id: 1688A08DB751DA2D
5 &lt; X-Cnection: close
5 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-874">
          <a>Doc string</a>
      </div>
      <div id="msg-874" class="collapse collapsable-details">
        <pre>02:29:56.265 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-875">
          <a>Doc string</a>
      </div>
      <div id="msg-875" class="collapse collapsable-details">
        <pre>02:29:56.266 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/906861e7-fada-410d-b9e7-ef27b27649ae/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-876">
          <a>Doc string</a>
      </div>
      <div id="msg-876" class="collapse collapsable-details">
        <pre>02:29:56.266 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[11] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-877">
          <a>Doc string</a>
      </div>
      <div id="msg-877" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-878">
          <a>Doc string</a>
      </div>
      <div id="msg-878" class="collapse collapsable-details">
        <pre>02:29:56.274 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.496</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-879">
          <a>Doc string</a>
      </div>
      <div id="msg-879" class="collapse collapsable-details">
        <pre>02:29:56.275 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;f2a1b49d-024b-4a01-83f9-66dd1d3385ce&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:56.770 response time in milliseconds: 494.89
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:56 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/cda652d1-1c4e-4cbb-4fc5-bb33b3681021/status&quot;}},&quot;downloadRequestId&quot;:&quot;cda652d1-1c4e-4cbb-4fc5-bb33b3681021&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-880">
          <a>Doc string</a>
      </div>
      <div id="msg-880" class="collapse collapsable-details">
        <pre>02:29:56.772 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-881">
          <a>Doc string</a>
      </div>
      <div id="msg-881" class="collapse collapsable-details">
        <pre>02:29:56.773 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cda652d1-1c4e-4cbb-4fc5-bb33b3681021/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.490</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-882">
          <a>Doc string</a>
      </div>
      <div id="msg-882" class="collapse collapsable-details">
        <pre>02:29:56.774 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cda652d1-1c4e-4cbb-4fc5-bb33b3681021/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:57.263 response time in milliseconds: 488.62
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 160
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:57 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/cda652d1-1c4e-4cbb-4fc5-bb33b3681021/status&quot;}},&quot;progress&quot;:50,&quot;status&quot;:&quot;RUNNING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-883">
          <a>Doc string</a>
      </div>
      <div id="msg-883" class="collapse collapsable-details">
        <pre>02:29:57.264 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/cda652d1-1c4e-4cbb-4fc5-bb33b3681021/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:57.757 response time in milliseconds: 492.46
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:57 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e8f08b34-71d0-415a-a679-8117c4830c42/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-884">
          <a>Doc string</a>
      </div>
      <div id="msg-884" class="collapse collapsable-details">
        <pre>02:29:57.765 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/e8f08b34-71d0-415a-a679-8117c4830c42/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.505</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-885">
          <a>Doc string</a>
      </div>
      <div id="msg-885" class="collapse collapsable-details">
        <pre>02:29:57.767 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e8f08b34-71d0-415a-a679-8117c4830c42/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:58.272 response time in milliseconds: 504.25
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 27702
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:29:58 GMT
4 &lt; Etag: &quot;ec13db4e1903848c53dbd3dc220eeb15-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:57 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08E2ED01C83
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-886">
          <a>Doc string</a>
      </div>
      <div id="msg-886" class="collapse collapsable-details">
        <pre>02:29:58.276 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-887">
          <a>Doc string</a>
      </div>
      <div id="msg-887" class="collapse collapsable-details">
        <pre>02:29:58.277 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e8f08b34-71d0-415a-a679-8117c4830c42/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-888">
          <a>Doc string</a>
      </div>
      <div id="msg-888" class="collapse collapsable-details">
        <pre>02:29:58.277 [print] size 27702</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[12] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-889">
          <a>Doc string</a>
      </div>
      <div id="msg-889" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-890">
          <a>Doc string</a>
      </div>
      <div id="msg-890" class="collapse collapsable-details">
        <pre>02:29:58.281 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-891">
          <a>Doc string</a>
      </div>
      <div id="msg-891" class="collapse collapsable-details">
        <pre>02:29:58.282 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;69183ebc-d2bd-4c32-b7e0-82d7d64d95a6&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:29:58.767 response time in milliseconds: 484.31
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:29:58 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/c9d73113-2075-41bf-6a08-a9959371400f/status&quot;}},&quot;downloadRequestId&quot;:&quot;c9d73113-2075-41bf-6a08-a9959371400f&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-892">
          <a>Doc string</a>
      </div>
      <div id="msg-892" class="collapse collapsable-details">
        <pre>02:29:58.768 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-893">
          <a>Doc string</a>
      </div>
      <div id="msg-893" class="collapse collapsable-details">
        <pre>02:29:58.771 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c9d73113-2075-41bf-6a08-a9959371400f/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.489</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-894">
          <a>Doc string</a>
      </div>
      <div id="msg-894" class="collapse collapsable-details">
        <pre>02:29:58.772 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c9d73113-2075-41bf-6a08-a9959371400f/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:59.260 response time in milliseconds: 488.25
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 159
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:29:59 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/c9d73113-2075-41bf-6a08-a9959371400f/status&quot;}},&quot;progress&quot;:0,&quot;status&quot;:&quot;PENDING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.482</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-895">
          <a>Doc string</a>
      </div>
      <div id="msg-895" class="collapse collapsable-details">
        <pre>02:29:59.262 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c9d73113-2075-41bf-6a08-a9959371400f/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:29:59.743 response time in milliseconds: 481.22
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:29:59 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/2f5652a3-f667-424d-b66f-cec0345280fd/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-896">
          <a>Doc string</a>
      </div>
      <div id="msg-896" class="collapse collapsable-details">
        <pre>02:29:59.744 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/2f5652a3-f667-424d-b66f-cec0345280fd/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.514</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-897">
          <a>Doc string</a>
      </div>
      <div id="msg-897" class="collapse collapsable-details">
        <pre>02:29:59.745 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/2f5652a3-f667-424d-b66f-cec0345280fd/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:00.259 response time in milliseconds: 513.76
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:00 GMT
4 &lt; Etag: &quot;ad6aa9b743b250b10f19871e1c67258f-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:29:59 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08EA550DDF1
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-898">
          <a>Doc string</a>
      </div>
      <div id="msg-898" class="collapse collapsable-details">
        <pre>02:30:00.260 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-899">
          <a>Doc string</a>
      </div>
      <div id="msg-899" class="collapse collapsable-details">
        <pre>02:30:00.261 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/2f5652a3-f667-424d-b66f-cec0345280fd/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-900">
          <a>Doc string</a>
      </div>
      <div id="msg-900" class="collapse collapsable-details">
        <pre>02:30:00.261 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[13] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-901">
          <a>Doc string</a>
      </div>
      <div id="msg-901" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-902">
          <a>Doc string</a>
      </div>
      <div id="msg-902" class="collapse collapsable-details">
        <pre>02:30:00.267 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.480</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-903">
          <a>Doc string</a>
      </div>
      <div id="msg-903" class="collapse collapsable-details">
        <pre>02:30:00.268 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;ee7de3a0-af84-4382-88f6-015c69fbcf22&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:00.748 response time in milliseconds: 478.84
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:00 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/c053b810-1c53-4166-6e7b-459928916db8/status&quot;}},&quot;downloadRequestId&quot;:&quot;c053b810-1c53-4166-6e7b-459928916db8&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-904">
          <a>Doc string</a>
      </div>
      <div id="msg-904" class="collapse collapsable-details">
        <pre>02:30:00.749 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-905">
          <a>Doc string</a>
      </div>
      <div id="msg-905" class="collapse collapsable-details">
        <pre>02:30:00.749 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c053b810-1c53-4166-6e7b-459928916db8/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.515</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-906">
          <a>Doc string</a>
      </div>
      <div id="msg-906" class="collapse collapsable-details">
        <pre>02:30:00.750 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c053b810-1c53-4166-6e7b-459928916db8/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:01.264 response time in milliseconds: 514.21
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 159
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:01 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/c053b810-1c53-4166-6e7b-459928916db8/status&quot;}},&quot;progress&quot;:0,&quot;status&quot;:&quot;PENDING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.588</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-907">
          <a>Doc string</a>
      </div>
      <div id="msg-907" class="collapse collapsable-details">
        <pre>02:30:01.265 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/c053b810-1c53-4166-6e7b-459928916db8/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:01.853 response time in milliseconds: 587.45
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:01 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/f81aed1a-e290-405b-baa4-e53777b2a23f/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-908">
          <a>Doc string</a>
      </div>
      <div id="msg-908" class="collapse collapsable-details">
        <pre>02:30:01.855 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/f81aed1a-e290-405b-baa4-e53777b2a23f/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.510</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-909">
          <a>Doc string</a>
      </div>
      <div id="msg-909" class="collapse collapsable-details">
        <pre>02:30:01.856 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/f81aed1a-e290-405b-baa4-e53777b2a23f/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:02.365 response time in milliseconds: 509.17
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:02 GMT
4 &lt; Etag: &quot;5638a24f3da76da9a3d48974922a1013-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:01 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08F22F566B9
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-910">
          <a>Doc string</a>
      </div>
      <div id="msg-910" class="collapse collapsable-details">
        <pre>02:30:02.367 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-911">
          <a>Doc string</a>
      </div>
      <div id="msg-911" class="collapse collapsable-details">
        <pre>02:30:02.367 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/f81aed1a-e290-405b-baa4-e53777b2a23f/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-912">
          <a>Doc string</a>
      </div>
      <div id="msg-912" class="collapse collapsable-details">
        <pre>02:30:02.367 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[14] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-913">
          <a>Doc string</a>
      </div>
      <div id="msg-913" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-914">
          <a>Doc string</a>
      </div>
      <div id="msg-914" class="collapse collapsable-details">
        <pre>02:30:02.378 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.527</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-915">
          <a>Doc string</a>
      </div>
      <div id="msg-915" class="collapse collapsable-details">
        <pre>02:30:02.378 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;7d86880e-ec38-45a7-8d26-8b50b25cb564&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:02.905 response time in milliseconds: 525.98
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:02 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/d46f5e9a-592e-4bbb-4f2e-8d3f46badc78/status&quot;}},&quot;downloadRequestId&quot;:&quot;d46f5e9a-592e-4bbb-4f2e-8d3f46badc78&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-916">
          <a>Doc string</a>
      </div>
      <div id="msg-916" class="collapse collapsable-details">
        <pre>02:30:02.906 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-917">
          <a>Doc string</a>
      </div>
      <div id="msg-917" class="collapse collapsable-details">
        <pre>02:30:02.907 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/d46f5e9a-592e-4bbb-4f2e-8d3f46badc78/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.488</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-918">
          <a>Doc string</a>
      </div>
      <div id="msg-918" class="collapse collapsable-details">
        <pre>02:30:02.908 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/d46f5e9a-592e-4bbb-4f2e-8d3f46badc78/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:03.395 response time in milliseconds: 486.97
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:03 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/70508f9c-fdea-4369-aeab-8e6635358341/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-919">
          <a>Doc string</a>
      </div>
      <div id="msg-919" class="collapse collapsable-details">
        <pre>02:30:03.396 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/d46f5e9a-592e-4bbb-4f2e-8d3f46badc78/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:03.883 response time in milliseconds: 486.33
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:03 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/70508f9c-fdea-4369-aeab-8e6635358341/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-920">
          <a>Doc string</a>
      </div>
      <div id="msg-920" class="collapse collapsable-details">
        <pre>02:30:03.890 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/70508f9c-fdea-4369-aeab-8e6635358341/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.510</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-921">
          <a>Doc string</a>
      </div>
      <div id="msg-921" class="collapse collapsable-details">
        <pre>02:30:03.895 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/70508f9c-fdea-4369-aeab-8e6635358341/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:04.401 response time in milliseconds: 505.82
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1308
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:04 GMT
4 &lt; Etag: &quot;d8e6115fd885085438293b0efa8aacab-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:03 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A08F9C52C321
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-922">
          <a>Doc string</a>
      </div>
      <div id="msg-922" class="collapse collapsable-details">
        <pre>02:30:04.403 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-923">
          <a>Doc string</a>
      </div>
      <div id="msg-923" class="collapse collapsable-details">
        <pre>02:30:04.403 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/70508f9c-fdea-4369-aeab-8e6635358341/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-924">
          <a>Doc string</a>
      </div>
      <div id="msg-924" class="collapse collapsable-details">
        <pre>02:30:04.403 [print] size 1308</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[15] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-925">
          <a>Doc string</a>
      </div>
      <div id="msg-925" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-926">
          <a>Doc string</a>
      </div>
      <div id="msg-926" class="collapse collapsable-details">
        <pre>02:30:04.410 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.450</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-927">
          <a>Doc string</a>
      </div>
      <div id="msg-927" class="collapse collapsable-details">
        <pre>02:30:04.411 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;f434912f-ac1a-4c31-a06d-1fb0b2e94b1e&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:06.861 response time in milliseconds: 2449.12
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:06 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/5e71fd93-bdd3-489b-724e-5494df378d5f/status&quot;}},&quot;downloadRequestId&quot;:&quot;5e71fd93-bdd3-489b-724e-5494df378d5f&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-928">
          <a>Doc string</a>
      </div>
      <div id="msg-928" class="collapse collapsable-details">
        <pre>02:30:06.863 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.008</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-929">
          <a>Doc string</a>
      </div>
      <div id="msg-929" class="collapse collapsable-details">
        <pre>02:30:06.871 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/5e71fd93-bdd3-489b-724e-5494df378d5f/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.486</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-930">
          <a>Doc string</a>
      </div>
      <div id="msg-930" class="collapse collapsable-details">
        <pre>02:30:06.872 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/5e71fd93-bdd3-489b-724e-5494df378d5f/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:07.357 response time in milliseconds: 485.08
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:07 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/4769bfaa-b1da-4c7c-ac86-65e9fa0dd2f5/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-931">
          <a>Doc string</a>
      </div>
      <div id="msg-931" class="collapse collapsable-details">
        <pre>02:30:07.361 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/5e71fd93-bdd3-489b-724e-5494df378d5f/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:07.849 response time in milliseconds: 487.50
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:07 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/4769bfaa-b1da-4c7c-ac86-65e9fa0dd2f5/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-932">
          <a>Doc string</a>
      </div>
      <div id="msg-932" class="collapse collapsable-details">
        <pre>02:30:07.850 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/4769bfaa-b1da-4c7c-ac86-65e9fa0dd2f5/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.497</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-933">
          <a>Doc string</a>
      </div>
      <div id="msg-933" class="collapse collapsable-details">
        <pre>02:30:07.852 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/4769bfaa-b1da-4c7c-ac86-65e9fa0dd2f5/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:08.348 response time in milliseconds: 496.19
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:08 GMT
4 &lt; Etag: &quot;e710d61059c5ed4cf0b25408adc8cc56-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:07 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A09087FB7769
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-934">
          <a>Doc string</a>
      </div>
      <div id="msg-934" class="collapse collapsable-details">
        <pre>02:30:08.350 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-935">
          <a>Doc string</a>
      </div>
      <div id="msg-935" class="collapse collapsable-details">
        <pre>02:30:08.350 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/4769bfaa-b1da-4c7c-ac86-65e9fa0dd2f5/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-936">
          <a>Doc string</a>
      </div>
      <div id="msg-936" class="collapse collapsable-details">
        <pre>02:30:08.351 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[16] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-937">
          <a>Doc string</a>
      </div>
      <div id="msg-937" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-938">
          <a>Doc string</a>
      </div>
      <div id="msg-938" class="collapse collapsable-details">
        <pre>02:30:08.355 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.603</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-939">
          <a>Doc string</a>
      </div>
      <div id="msg-939" class="collapse collapsable-details">
        <pre>02:30:08.355 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;a7ced3a4-8dd3-44df-8774-f08d01839035&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:08.958 response time in milliseconds: 602.28
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:08 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/fc60296e-4cc7-4ec8-7d84-b5e64554ab2c/status&quot;}},&quot;downloadRequestId&quot;:&quot;fc60296e-4cc7-4ec8-7d84-b5e64554ab2c&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-940">
          <a>Doc string</a>
      </div>
      <div id="msg-940" class="collapse collapsable-details">
        <pre>02:30:08.959 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-941">
          <a>Doc string</a>
      </div>
      <div id="msg-941" class="collapse collapsable-details">
        <pre>02:30:08.959 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/fc60296e-4cc7-4ec8-7d84-b5e64554ab2c/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.492</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-942">
          <a>Doc string</a>
      </div>
      <div id="msg-942" class="collapse collapsable-details">
        <pre>02:30:08.960 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/fc60296e-4cc7-4ec8-7d84-b5e64554ab2c/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:09.451 response time in milliseconds: 491.59
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:09 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e77d36a9-f341-4a8a-bdc9-3ae88511db81/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-943">
          <a>Doc string</a>
      </div>
      <div id="msg-943" class="collapse collapsable-details">
        <pre>02:30:09.456 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/fc60296e-4cc7-4ec8-7d84-b5e64554ab2c/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:09.937 response time in milliseconds: 481.05
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:09 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/e77d36a9-f341-4a8a-bdc9-3ae88511db81/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-944">
          <a>Doc string</a>
      </div>
      <div id="msg-944" class="collapse collapsable-details">
        <pre>02:30:09.938 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/e77d36a9-f341-4a8a-bdc9-3ae88511db81/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.667</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-945">
          <a>Doc string</a>
      </div>
      <div id="msg-945" class="collapse collapsable-details">
        <pre>02:30:09.939 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e77d36a9-f341-4a8a-bdc9-3ae88511db81/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:10.605 response time in milliseconds: 666.25
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:10 GMT
4 &lt; Etag: &quot;2f86f2c14fc49800563c6137dde98ea1-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:09 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A09109480AC7
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-946">
          <a>Doc string</a>
      </div>
      <div id="msg-946" class="collapse collapsable-details">
        <pre>02:30:10.607 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-947">
          <a>Doc string</a>
      </div>
      <div id="msg-947" class="collapse collapsable-details">
        <pre>02:30:10.608 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/e77d36a9-f341-4a8a-bdc9-3ae88511db81/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-948">
          <a>Doc string</a>
      </div>
      <div id="msg-948" class="collapse collapsable-details">
        <pre>02:30:10.608 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[17] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-949">
          <a>Doc string</a>
      </div>
      <div id="msg-949" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-950">
          <a>Doc string</a>
      </div>
      <div id="msg-950" class="collapse collapsable-details">
        <pre>02:30:10.613 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.435</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-951">
          <a>Doc string</a>
      </div>
      <div id="msg-951" class="collapse collapsable-details">
        <pre>02:30:10.614 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;3021d17f-c396-4704-8770-d0231e9d5d9b&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:13.049 response time in milliseconds: 2434.23
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:12 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/33fdba96-4dd6-4c6e-5969-c31abf77bf06/status&quot;}},&quot;downloadRequestId&quot;:&quot;33fdba96-4dd6-4c6e-5969-c31abf77bf06&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-952">
          <a>Doc string</a>
      </div>
      <div id="msg-952" class="collapse collapsable-details">
        <pre>02:30:13.050 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-953">
          <a>Doc string</a>
      </div>
      <div id="msg-953" class="collapse collapsable-details">
        <pre>02:30:13.050 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/33fdba96-4dd6-4c6e-5969-c31abf77bf06/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-954">
          <a>Doc string</a>
      </div>
      <div id="msg-954" class="collapse collapsable-details">
        <pre>02:30:13.051 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/33fdba96-4dd6-4c6e-5969-c31abf77bf06/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:13.544 response time in milliseconds: 493.07
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:13 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/1d6c5b61-b969-40d2-bf6a-f2d731321873/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.486</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-955">
          <a>Doc string</a>
      </div>
      <div id="msg-955" class="collapse collapsable-details">
        <pre>02:30:13.545 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/33fdba96-4dd6-4c6e-5969-c31abf77bf06/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:14.028 response time in milliseconds: 482.67
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:13 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/1d6c5b61-b969-40d2-bf6a-f2d731321873/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-956">
          <a>Doc string</a>
      </div>
      <div id="msg-956" class="collapse collapsable-details">
        <pre>02:30:14.032 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/1d6c5b61-b969-40d2-bf6a-f2d731321873/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-957">
          <a>Doc string</a>
      </div>
      <div id="msg-957" class="collapse collapsable-details">
        <pre>02:30:14.033 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/1d6c5b61-b969-40d2-bf6a-f2d731321873/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:14.530 response time in milliseconds: 497.56
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:14 GMT
4 &lt; Etag: &quot;f63d6fe976746fc0bb01e61196108be8-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:13 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A091F892E96F
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-958">
          <a>Doc string</a>
      </div>
      <div id="msg-958" class="collapse collapsable-details">
        <pre>02:30:14.536 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-959">
          <a>Doc string</a>
      </div>
      <div id="msg-959" class="collapse collapsable-details">
        <pre>02:30:14.536 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/1d6c5b61-b969-40d2-bf6a-f2d731321873/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-960">
          <a>Doc string</a>
      </div>
      <div id="msg-960" class="collapse collapsable-details">
        <pre>02:30:14.536 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[18] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-961">
          <a>Doc string</a>
      </div>
      <div id="msg-961" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-962">
          <a>Doc string</a>
      </div>
      <div id="msg-962" class="collapse collapsable-details">
        <pre>02:30:14.544 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.273</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-963">
          <a>Doc string</a>
      </div>
      <div id="msg-963" class="collapse collapsable-details">
        <pre>02:30:14.545 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;199c4014-5688-4581-9513-9d8bc2f0c040&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:16.817 response time in milliseconds: 2272.16
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:16 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/297b9103-9057-4cfa-5591-5e906661d6e9/status&quot;}},&quot;downloadRequestId&quot;:&quot;297b9103-9057-4cfa-5591-5e906661d6e9&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-964">
          <a>Doc string</a>
      </div>
      <div id="msg-964" class="collapse collapsable-details">
        <pre>02:30:16.823 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-965">
          <a>Doc string</a>
      </div>
      <div id="msg-965" class="collapse collapsable-details">
        <pre>02:30:16.825 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/297b9103-9057-4cfa-5591-5e906661d6e9/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.498</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-966">
          <a>Doc string</a>
      </div>
      <div id="msg-966" class="collapse collapsable-details">
        <pre>02:30:16.835 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/297b9103-9057-4cfa-5591-5e906661d6e9/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:17.323 response time in milliseconds: 487.52
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:17 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/70dfaa45-8089-4b63-ae0a-8f9844be804d/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-967">
          <a>Doc string</a>
      </div>
      <div id="msg-967" class="collapse collapsable-details">
        <pre>02:30:17.324 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/297b9103-9057-4cfa-5591-5e906661d6e9/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:17.815 response time in milliseconds: 490.09
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:17 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/70dfaa45-8089-4b63-ae0a-8f9844be804d/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-968">
          <a>Doc string</a>
      </div>
      <div id="msg-968" class="collapse collapsable-details">
        <pre>02:30:17.816 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/70dfaa45-8089-4b63-ae0a-8f9844be804d/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.508</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-969">
          <a>Doc string</a>
      </div>
      <div id="msg-969" class="collapse collapsable-details">
        <pre>02:30:17.819 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/70dfaa45-8089-4b63-ae0a-8f9844be804d/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:18.324 response time in milliseconds: 504.55
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:18 GMT
4 &lt; Etag: &quot;211db9e216474b666f1523a757210536-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:17 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A092DA1C1A16
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-970">
          <a>Doc string</a>
      </div>
      <div id="msg-970" class="collapse collapsable-details">
        <pre>02:30:18.331 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-971">
          <a>Doc string</a>
      </div>
      <div id="msg-971" class="collapse collapsable-details">
        <pre>02:30:18.331 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/70dfaa45-8089-4b63-ae0a-8f9844be804d/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-972">
          <a>Doc string</a>
      </div>
      <div id="msg-972" class="collapse collapsable-details">
        <pre>02:30:18.331 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[19] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-973">
          <a>Doc string</a>
      </div>
      <div id="msg-973" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-974">
          <a>Doc string</a>
      </div>
      <div id="msg-974" class="collapse collapsable-details">
        <pre>02:30:18.335 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.985</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-975">
          <a>Doc string</a>
      </div>
      <div id="msg-975" class="collapse collapsable-details">
        <pre>02:30:18.335 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;74c6011e-9871-4f8a-b911-0142eea98ee7&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:20.321 response time in milliseconds: 1984.94
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:20 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/f185e935-4d55-479c-5e71-2d7b495ab2bd/status&quot;}},&quot;downloadRequestId&quot;:&quot;f185e935-4d55-479c-5e71-2d7b495ab2bd&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-976">
          <a>Doc string</a>
      </div>
      <div id="msg-976" class="collapse collapsable-details">
        <pre>02:30:20.321 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-977">
          <a>Doc string</a>
      </div>
      <div id="msg-977" class="collapse collapsable-details">
        <pre>02:30:20.322 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f185e935-4d55-479c-5e71-2d7b495ab2bd/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.494</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-978">
          <a>Doc string</a>
      </div>
      <div id="msg-978" class="collapse collapsable-details">
        <pre>02:30:20.322 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f185e935-4d55-479c-5e71-2d7b495ab2bd/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:20.816 response time in milliseconds: 493.84
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 159
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:20 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/f185e935-4d55-479c-5e71-2d7b495ab2bd/status&quot;}},&quot;progress&quot;:0,&quot;status&quot;:&quot;PENDING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.490</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-979">
          <a>Doc string</a>
      </div>
      <div id="msg-979" class="collapse collapsable-details">
        <pre>02:30:20.817 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/f185e935-4d55-479c-5e71-2d7b495ab2bd/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:21.304 response time in milliseconds: 486.92
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:21 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/bc6055db-a745-4133-b2c5-880212178457/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.011</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-980">
          <a>Doc string</a>
      </div>
      <div id="msg-980" class="collapse collapsable-details">
        <pre>02:30:21.319 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/bc6055db-a745-4133-b2c5-880212178457/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.503</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-981">
          <a>Doc string</a>
      </div>
      <div id="msg-981" class="collapse collapsable-details">
        <pre>02:30:21.325 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/bc6055db-a745-4133-b2c5-880212178457/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:21.825 response time in milliseconds: 498.94
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 6328
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:21 GMT
4 &lt; Etag: &quot;c361afe36647f4225f895de35dc4c88e-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:20 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A093AB4724A1
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-982">
          <a>Doc string</a>
      </div>
      <div id="msg-982" class="collapse collapsable-details">
        <pre>02:30:21.832 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.009</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-983">
          <a>Doc string</a>
      </div>
      <div id="msg-983" class="collapse collapsable-details">
        <pre>02:30:21.841 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/bc6055db-a745-4133-b2c5-880212178457/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-984">
          <a>Doc string</a>
      </div>
      <div id="msg-984" class="collapse collapsable-details">
        <pre>02:30:21.843 [print] size 6328</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[20] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-985">
          <a>Doc string</a>
      </div>
      <div id="msg-985" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-986">
          <a>Doc string</a>
      </div>
      <div id="msg-986" class="collapse collapsable-details">
        <pre>02:30:21.854 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.420</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-987">
          <a>Doc string</a>
      </div>
      <div id="msg-987" class="collapse collapsable-details">
        <pre>02:30:21.855 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;95843b80-f891-4f0d-ac68-6f104d38a0c6&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:24.275 response time in milliseconds: 2419.69
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:24 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/3fca5039-80fc-4f94-5900-6a7d43c1d1f2/status&quot;}},&quot;downloadRequestId&quot;:&quot;3fca5039-80fc-4f94-5900-6a7d43c1d1f2&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-988">
          <a>Doc string</a>
      </div>
      <div id="msg-988" class="collapse collapsable-details">
        <pre>02:30:24.282 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.005</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.009</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-989">
          <a>Doc string</a>
      </div>
      <div id="msg-989" class="collapse collapsable-details">
        <pre>02:30:24.297 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3fca5039-80fc-4f94-5900-6a7d43c1d1f2/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.512</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-990">
          <a>Doc string</a>
      </div>
      <div id="msg-990" class="collapse collapsable-details">
        <pre>02:30:24.302 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3fca5039-80fc-4f94-5900-6a7d43c1d1f2/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:24.804 response time in milliseconds: 501.86
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:24 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/f7a32609-ae9d-49c7-acbc-8c999ba1dfed/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-991">
          <a>Doc string</a>
      </div>
      <div id="msg-991" class="collapse collapsable-details">
        <pre>02:30:24.811 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/3fca5039-80fc-4f94-5900-6a7d43c1d1f2/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:25.310 response time in milliseconds: 498.91
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:25 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/f7a32609-ae9d-49c7-acbc-8c999ba1dfed/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-992">
          <a>Doc string</a>
      </div>
      <div id="msg-992" class="collapse collapsable-details">
        <pre>02:30:25.313 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/f7a32609-ae9d-49c7-acbc-8c999ba1dfed/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.506</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-993">
          <a>Doc string</a>
      </div>
      <div id="msg-993" class="collapse collapsable-details">
        <pre>02:30:25.315 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/f7a32609-ae9d-49c7-acbc-8c999ba1dfed/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:25.821 response time in milliseconds: 505.22
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:25 GMT
4 &lt; Etag: &quot;d53ce8e69bd587e2e44c12541efc14ee-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:24 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A09499051FF2
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-994">
          <a>Doc string</a>
      </div>
      <div id="msg-994" class="collapse collapsable-details">
        <pre>02:30:25.825 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-995">
          <a>Doc string</a>
      </div>
      <div id="msg-995" class="collapse collapsable-details">
        <pre>02:30:25.828 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/f7a32609-ae9d-49c7-acbc-8c999ba1dfed/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-996">
          <a>Doc string</a>
      </div>
      <div id="msg-996" class="collapse collapsable-details">
        <pre>02:30:25.828 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[21] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-997">
          <a>Doc string</a>
      </div>
      <div id="msg-997" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-998">
          <a>Doc string</a>
      </div>
      <div id="msg-998" class="collapse collapsable-details">
        <pre>02:30:25.835 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.313</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-999">
          <a>Doc string</a>
      </div>
      <div id="msg-999" class="collapse collapsable-details">
        <pre>02:30:25.836 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;304c598c-211c-4d4e-86cf-c87c8be1fd60&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:28.148 response time in milliseconds: 2312.32
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:28 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/2d1d13b2-ba73-46d4-74d4-d4e57b7f4147/status&quot;}},&quot;downloadRequestId&quot;:&quot;2d1d13b2-ba73-46d4-74d4-d4e57b7f4147&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1000">
          <a>Doc string</a>
      </div>
      <div id="msg-1000" class="collapse collapsable-details">
        <pre>02:30:28.152 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1001">
          <a>Doc string</a>
      </div>
      <div id="msg-1001" class="collapse collapsable-details">
        <pre>02:30:28.156 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2d1d13b2-ba73-46d4-74d4-d4e57b7f4147/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.547</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1002">
          <a>Doc string</a>
      </div>
      <div id="msg-1002" class="collapse collapsable-details">
        <pre>02:30:28.158 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2d1d13b2-ba73-46d4-74d4-d4e57b7f4147/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:28.704 response time in milliseconds: 545.93
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:28 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/f5c7ed5a-1959-4603-a75d-fb5db4292e4b/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.513</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1003">
          <a>Doc string</a>
      </div>
      <div id="msg-1003" class="collapse collapsable-details">
        <pre>02:30:28.710 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/2d1d13b2-ba73-46d4-74d4-d4e57b7f4147/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:29.216 response time in milliseconds: 505.92
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:29 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/f5c7ed5a-1959-4603-a75d-fb5db4292e4b/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1004">
          <a>Doc string</a>
      </div>
      <div id="msg-1004" class="collapse collapsable-details">
        <pre>02:30:29.220 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/f5c7ed5a-1959-4603-a75d-fb5db4292e4b/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.502</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1005">
          <a>Doc string</a>
      </div>
      <div id="msg-1005" class="collapse collapsable-details">
        <pre>02:30:29.230 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/f5c7ed5a-1959-4603-a75d-fb5db4292e4b/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:29.723 response time in milliseconds: 493.32
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:29 GMT
4 &lt; Etag: &quot;3229a6491fb386be0598c95e37d533f9-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:28 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A09582228F3F
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1006">
          <a>Doc string</a>
      </div>
      <div id="msg-1006" class="collapse collapsable-details">
        <pre>02:30:29.732 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1007">
          <a>Doc string</a>
      </div>
      <div id="msg-1007" class="collapse collapsable-details">
        <pre>02:30:29.734 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/f5c7ed5a-1959-4603-a75d-fb5db4292e4b/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1008">
          <a>Doc string</a>
      </div>
      <div id="msg-1008" class="collapse collapsable-details">
        <pre>02:30:29.735 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[22] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1009">
          <a>Doc string</a>
      </div>
      <div id="msg-1009" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1010">
          <a>Doc string</a>
      </div>
      <div id="msg-1010" class="collapse collapsable-details">
        <pre>02:30:29.745 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.133</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1011">
          <a>Doc string</a>
      </div>
      <div id="msg-1011" class="collapse collapsable-details">
        <pre>02:30:29.747 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;74059578-fae6-4945-9c61-b14d8315506f&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:31.878 response time in milliseconds: 2130.74
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:31 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/bb0153d5-8792-445d-5db2-a55a07995190/status&quot;}},&quot;downloadRequestId&quot;:&quot;bb0153d5-8792-445d-5db2-a55a07995190&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1012">
          <a>Doc string</a>
      </div>
      <div id="msg-1012" class="collapse collapsable-details">
        <pre>02:30:31.882 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1013">
          <a>Doc string</a>
      </div>
      <div id="msg-1013" class="collapse collapsable-details">
        <pre>02:30:31.886 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/bb0153d5-8792-445d-5db2-a55a07995190/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.561</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1014">
          <a>Doc string</a>
      </div>
      <div id="msg-1014" class="collapse collapsable-details">
        <pre>02:30:31.887 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/bb0153d5-8792-445d-5db2-a55a07995190/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:32.447 response time in milliseconds: 560.18
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:32 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d764e5a6-e9dd-45f7-8b87-68270388e670/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1015">
          <a>Doc string</a>
      </div>
      <div id="msg-1015" class="collapse collapsable-details">
        <pre>02:30:32.448 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/bb0153d5-8792-445d-5db2-a55a07995190/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:32.931 response time in milliseconds: 482.50
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:32 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d764e5a6-e9dd-45f7-8b87-68270388e670/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1016">
          <a>Doc string</a>
      </div>
      <div id="msg-1016" class="collapse collapsable-details">
        <pre>02:30:32.935 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/d764e5a6-e9dd-45f7-8b87-68270388e670/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.520</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1017">
          <a>Doc string</a>
      </div>
      <div id="msg-1017" class="collapse collapsable-details">
        <pre>02:30:32.950 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d764e5a6-e9dd-45f7-8b87-68270388e670/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:33.458 response time in milliseconds: 507.65
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 10123
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:33 GMT
4 &lt; Etag: &quot;3a691c0d4aeef68dfdf70331636abb6f-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:32 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A096600F7A30
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1018">
          <a>Doc string</a>
      </div>
      <div id="msg-1018" class="collapse collapsable-details">
        <pre>02:30:33.468 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1019">
          <a>Doc string</a>
      </div>
      <div id="msg-1019" class="collapse collapsable-details">
        <pre>02:30:33.470 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d764e5a6-e9dd-45f7-8b87-68270388e670/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1020">
          <a>Doc string</a>
      </div>
      <div id="msg-1020" class="collapse collapsable-details">
        <pre>02:30:33.472 [print] size 10123</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[23] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1021">
          <a>Doc string</a>
      </div>
      <div id="msg-1021" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1022">
          <a>Doc string</a>
      </div>
      <div id="msg-1022" class="collapse collapsable-details">
        <pre>02:30:33.488 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.806</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1023">
          <a>Doc string</a>
      </div>
      <div id="msg-1023" class="collapse collapsable-details">
        <pre>02:30:33.489 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;7846306d-9db1-47be-bb67-960c8db4901b&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:35.294 response time in milliseconds: 1805.37
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:35 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/75a9e23e-6d02-40cc-793b-acd96eee341d/status&quot;}},&quot;downloadRequestId&quot;:&quot;75a9e23e-6d02-40cc-793b-acd96eee341d&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1024">
          <a>Doc string</a>
      </div>
      <div id="msg-1024" class="collapse collapsable-details">
        <pre>02:30:35.296 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1025">
          <a>Doc string</a>
      </div>
      <div id="msg-1025" class="collapse collapsable-details">
        <pre>02:30:35.296 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/75a9e23e-6d02-40cc-793b-acd96eee341d/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.632</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1026">
          <a>Doc string</a>
      </div>
      <div id="msg-1026" class="collapse collapsable-details">
        <pre>02:30:35.297 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/75a9e23e-6d02-40cc-793b-acd96eee341d/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:35.929 response time in milliseconds: 631.53
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:35 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/32e956e8-f920-4584-8a35-82791489c6c5/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.495</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1027">
          <a>Doc string</a>
      </div>
      <div id="msg-1027" class="collapse collapsable-details">
        <pre>02:30:35.932 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/75a9e23e-6d02-40cc-793b-acd96eee341d/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:36.423 response time in milliseconds: 491.29
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:36 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/32e956e8-f920-4584-8a35-82791489c6c5/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1028">
          <a>Doc string</a>
      </div>
      <div id="msg-1028" class="collapse collapsable-details">
        <pre>02:30:36.425 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/32e956e8-f920-4584-8a35-82791489c6c5/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.508</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1029">
          <a>Doc string</a>
      </div>
      <div id="msg-1029" class="collapse collapsable-details">
        <pre>02:30:36.432 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/32e956e8-f920-4584-8a35-82791489c6c5/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:36.934 response time in milliseconds: 501.65
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 6588
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:36 GMT
4 &lt; Etag: &quot;a7537b8b1b04a51ea40bfc04845bbfce-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:35 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0972FD1CC18
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1030">
          <a>Doc string</a>
      </div>
      <div id="msg-1030" class="collapse collapsable-details">
        <pre>02:30:36.935 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1031">
          <a>Doc string</a>
      </div>
      <div id="msg-1031" class="collapse collapsable-details">
        <pre>02:30:36.936 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/32e956e8-f920-4584-8a35-82791489c6c5/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1032">
          <a>Doc string</a>
      </div>
      <div id="msg-1032" class="collapse collapsable-details">
        <pre>02:30:36.936 [print] size 6588</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[24] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1033">
          <a>Doc string</a>
      </div>
      <div id="msg-1033" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1034">
          <a>Doc string</a>
      </div>
      <div id="msg-1034" class="collapse collapsable-details">
        <pre>02:30:36.942 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">2.158</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1035">
          <a>Doc string</a>
      </div>
      <div id="msg-1035" class="collapse collapsable-details">
        <pre>02:30:36.943 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;ecc65af0-5df2-4c51-997e-424a8ec168f9&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:39.101 response time in milliseconds: 2157.40
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:39 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/68926128-15a0-4862-7338-bfe6fc457a00/status&quot;}},&quot;downloadRequestId&quot;:&quot;68926128-15a0-4862-7338-bfe6fc457a00&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1036">
          <a>Doc string</a>
      </div>
      <div id="msg-1036" class="collapse collapsable-details">
        <pre>02:30:39.102 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1037">
          <a>Doc string</a>
      </div>
      <div id="msg-1037" class="collapse collapsable-details">
        <pre>02:30:39.103 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/68926128-15a0-4862-7338-bfe6fc457a00/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.499</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1038">
          <a>Doc string</a>
      </div>
      <div id="msg-1038" class="collapse collapsable-details">
        <pre>02:30:39.104 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/68926128-15a0-4862-7338-bfe6fc457a00/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:39.603 response time in milliseconds: 499.01
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:39 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/47f85e16-5ffc-4411-8649-0265690359de/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.489</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1039">
          <a>Doc string</a>
      </div>
      <div id="msg-1039" class="collapse collapsable-details">
        <pre>02:30:39.604 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/68926128-15a0-4862-7338-bfe6fc457a00/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:40.088 response time in milliseconds: 483.78
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:40 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/47f85e16-5ffc-4411-8649-0265690359de/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1040">
          <a>Doc string</a>
      </div>
      <div id="msg-1040" class="collapse collapsable-details">
        <pre>02:30:40.093 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/47f85e16-5ffc-4411-8649-0265690359de/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.533</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1041">
          <a>Doc string</a>
      </div>
      <div id="msg-1041" class="collapse collapsable-details">
        <pre>02:30:40.094 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/47f85e16-5ffc-4411-8649-0265690359de/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:40.627 response time in milliseconds: 533.13
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:40 GMT
4 &lt; Etag: &quot;7c67ac6f6ae7573422b2333a6af992c3-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:39 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A0980B3BC141
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1042">
          <a>Doc string</a>
      </div>
      <div id="msg-1042" class="collapse collapsable-details">
        <pre>02:30:40.628 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1043">
          <a>Doc string</a>
      </div>
      <div id="msg-1043" class="collapse collapsable-details">
        <pre>02:30:40.629 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/47f85e16-5ffc-4411-8649-0265690359de/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1044">
          <a>Doc string</a>
      </div>
      <div id="msg-1044" class="collapse collapsable-details">
        <pre>02:30:40.629 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[25] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1045">
          <a>Doc string</a>
      </div>
      <div id="msg-1045" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1046">
          <a>Doc string</a>
      </div>
      <div id="msg-1046" class="collapse collapsable-details">
        <pre>02:30:40.636 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1047">
          <a>Doc string</a>
      </div>
      <div id="msg-1047" class="collapse collapsable-details">
        <pre>02:30:40.637 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;d3f8f0d9-4fe6-47a7-8589-4a735bdf4d17&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:41.128 response time in milliseconds: 490.68
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:41 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/59d9e250-e19a-4131-5f2c-a1ebbf931739/status&quot;}},&quot;downloadRequestId&quot;:&quot;59d9e250-e19a-4131-5f2c-a1ebbf931739&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1048">
          <a>Doc string</a>
      </div>
      <div id="msg-1048" class="collapse collapsable-details">
        <pre>02:30:41.134 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1049">
          <a>Doc string</a>
      </div>
      <div id="msg-1049" class="collapse collapsable-details">
        <pre>02:30:41.136 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/59d9e250-e19a-4131-5f2c-a1ebbf931739/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.486</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1050">
          <a>Doc string</a>
      </div>
      <div id="msg-1050" class="collapse collapsable-details">
        <pre>02:30:41.137 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/59d9e250-e19a-4131-5f2c-a1ebbf931739/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:41.623 response time in milliseconds: 485.79
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:41 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/ef201772-7368-4605-a077-66c0df2c364e/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1051">
          <a>Doc string</a>
      </div>
      <div id="msg-1051" class="collapse collapsable-details">
        <pre>02:30:41.629 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/59d9e250-e19a-4131-5f2c-a1ebbf931739/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:42.114 response time in milliseconds: 485.64
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:42 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/ef201772-7368-4605-a077-66c0df2c364e/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1052">
          <a>Doc string</a>
      </div>
      <div id="msg-1052" class="collapse collapsable-details">
        <pre>02:30:42.121 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/ef201772-7368-4605-a077-66c0df2c364e/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.502</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1053">
          <a>Doc string</a>
      </div>
      <div id="msg-1053" class="collapse collapsable-details">
        <pre>02:30:42.123 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/ef201772-7368-4605-a077-66c0df2c364e/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:42.625 response time in milliseconds: 501.91
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1308
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:42 GMT
4 &lt; Etag: &quot;57e4305049d07017912f81f04d16b8af-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:41 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A09882BE1C51
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.007</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1054">
          <a>Doc string</a>
      </div>
      <div id="msg-1054" class="collapse collapsable-details">
        <pre>02:30:42.634 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1055">
          <a>Doc string</a>
      </div>
      <div id="msg-1055" class="collapse collapsable-details">
        <pre>02:30:42.636 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/ef201772-7368-4605-a077-66c0df2c364e/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1056">
          <a>Doc string</a>
      </div>
      <div id="msg-1056" class="collapse collapsable-details">
        <pre>02:30:42.639 [print] size 1308</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[26] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1057">
          <a>Doc string</a>
      </div>
      <div id="msg-1057" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1058">
          <a>Doc string</a>
      </div>
      <div id="msg-1058" class="collapse collapsable-details">
        <pre>02:30:42.650 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.487</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1059">
          <a>Doc string</a>
      </div>
      <div id="msg-1059" class="collapse collapsable-details">
        <pre>02:30:42.653 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;80d32f9f-5641-4d0a-89bb-616e9c0f890f&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:43.138 response time in milliseconds: 485.01
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:43 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/4b10e981-cd5e-4890-5912-019079a08b0e/status&quot;}},&quot;downloadRequestId&quot;:&quot;4b10e981-cd5e-4890-5912-019079a08b0e&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1060">
          <a>Doc string</a>
      </div>
      <div id="msg-1060" class="collapse collapsable-details">
        <pre>02:30:43.141 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1061">
          <a>Doc string</a>
      </div>
      <div id="msg-1061" class="collapse collapsable-details">
        <pre>02:30:43.146 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/4b10e981-cd5e-4890-5912-019079a08b0e/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.493</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1062">
          <a>Doc string</a>
      </div>
      <div id="msg-1062" class="collapse collapsable-details">
        <pre>02:30:43.147 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/4b10e981-cd5e-4890-5912-019079a08b0e/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:43.639 response time in milliseconds: 492.38
2 &lt; 200
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 159
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:43 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/4b10e981-cd5e-4890-5912-019079a08b0e/status&quot;}},&quot;progress&quot;:0,&quot;status&quot;:&quot;PENDING&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.509</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1063">
          <a>Doc string</a>
      </div>
      <div id="msg-1063" class="collapse collapsable-details">
        <pre>02:30:43.646 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/4b10e981-cd5e-4890-5912-019079a08b0e/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:44.144 response time in milliseconds: 497.63
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:44 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/5bc87a16-0d13-4f57-a0dd-a88d176e5b3a/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1064">
          <a>Doc string</a>
      </div>
      <div id="msg-1064" class="collapse collapsable-details">
        <pre>02:30:44.151 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/5bc87a16-0d13-4f57-a0dd-a88d176e5b3a/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.500</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1065">
          <a>Doc string</a>
      </div>
      <div id="msg-1065" class="collapse collapsable-details">
        <pre>02:30:44.153 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/5bc87a16-0d13-4f57-a0dd-a88d176e5b3a/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:44.653 response time in milliseconds: 499.46
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1312
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:44 GMT
4 &lt; Etag: &quot;9dcb53c033e2979ea3c77347333a13d7-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:43 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A098FC0A3469
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1066">
          <a>Doc string</a>
      </div>
      <div id="msg-1066" class="collapse collapsable-details">
        <pre>02:30:44.658 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1067">
          <a>Doc string</a>
      </div>
      <div id="msg-1067" class="collapse collapsable-details">
        <pre>02:30:44.662 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/5bc87a16-0d13-4f57-a0dd-a88d176e5b3a/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1068">
          <a>Doc string</a>
      </div>
      <div id="msg-1068" class="collapse collapsable-details">
        <pre>02:30:44.664 [print] size 1312</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.010</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[27] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1069">
          <a>Doc string</a>
      </div>
      <div id="msg-1069" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1070">
          <a>Doc string</a>
      </div>
      <div id="msg-1070" class="collapse collapsable-details">
        <pre>02:30:44.687 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.481</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1071">
          <a>Doc string</a>
      </div>
      <div id="msg-1071" class="collapse collapsable-details">
        <pre>02:30:44.691 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;00a2e048-2c11-4a10-a7b1-0f439bcf35e5&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:45.169 response time in milliseconds: 477.79
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:45 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/0f1d6aa8-8c3c-487d-77be-2415bf5fb185/status&quot;}},&quot;downloadRequestId&quot;:&quot;0f1d6aa8-8c3c-487d-77be-2415bf5fb185&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1072">
          <a>Doc string</a>
      </div>
      <div id="msg-1072" class="collapse collapsable-details">
        <pre>02:30:45.172 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1073">
          <a>Doc string</a>
      </div>
      <div id="msg-1073" class="collapse collapsable-details">
        <pre>02:30:45.177 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/0f1d6aa8-8c3c-487d-77be-2415bf5fb185/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.502</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1074">
          <a>Doc string</a>
      </div>
      <div id="msg-1074" class="collapse collapsable-details">
        <pre>02:30:45.177 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/0f1d6aa8-8c3c-487d-77be-2415bf5fb185/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:45.679 response time in milliseconds: 501.02
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:45 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d9cf7a61-f6cb-430b-a0c6-f58564c37035/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.568</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1075">
          <a>Doc string</a>
      </div>
      <div id="msg-1075" class="collapse collapsable-details">
        <pre>02:30:45.680 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/0f1d6aa8-8c3c-487d-77be-2415bf5fb185/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:46.247 response time in milliseconds: 566.98
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:46 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/d9cf7a61-f6cb-430b-a0c6-f58564c37035/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1076">
          <a>Doc string</a>
      </div>
      <div id="msg-1076" class="collapse collapsable-details">
        <pre>02:30:46.248 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/d9cf7a61-f6cb-430b-a0c6-f58564c37035/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.504</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1077">
          <a>Doc string</a>
      </div>
      <div id="msg-1077" class="collapse collapsable-details">
        <pre>02:30:46.249 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d9cf7a61-f6cb-430b-a0c6-f58564c37035/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:46.753 response time in milliseconds: 503.41
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1308
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:46 GMT
4 &lt; Etag: &quot;79450d535bb13bf66cbcb225aad12968-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:45 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A099790CD46A
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1078">
          <a>Doc string</a>
      </div>
      <div id="msg-1078" class="collapse collapsable-details">
        <pre>02:30:46.757 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1079">
          <a>Doc string</a>
      </div>
      <div id="msg-1079" class="collapse collapsable-details">
        <pre>02:30:46.757 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/d9cf7a61-f6cb-430b-a0c6-f58564c37035/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1080">
          <a>Doc string</a>
      </div>
      <div id="msg-1080" class="collapse collapsable-details">
        <pre>02:30:46.758 [print] size 1308</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[28] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1081">
          <a>Doc string</a>
      </div>
      <div id="msg-1081" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1082">
          <a>Doc string</a>
      </div>
      <div id="msg-1082" class="collapse collapsable-details">
        <pre>02:30:46.774 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">0.501</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1083">
          <a>Doc string</a>
      </div>
      <div id="msg-1083" class="collapse collapsable-details">
        <pre>02:30:46.777 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;ee381f94-96f3-41e5-bbd5-4b678eee1db0&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:47.276 response time in milliseconds: 498.28
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:47 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/669abcab-2c9a-45eb-550f-d50937e1b3bc/status&quot;}},&quot;downloadRequestId&quot;:&quot;669abcab-2c9a-45eb-550f-d50937e1b3bc&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1084">
          <a>Doc string</a>
      </div>
      <div id="msg-1084" class="collapse collapsable-details">
        <pre>02:30:47.276 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1085">
          <a>Doc string</a>
      </div>
      <div id="msg-1085" class="collapse collapsable-details">
        <pre>02:30:47.278 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/669abcab-2c9a-45eb-550f-d50937e1b3bc/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.485</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1086">
          <a>Doc string</a>
      </div>
      <div id="msg-1086" class="collapse collapsable-details">
        <pre>02:30:47.279 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/669abcab-2c9a-45eb-550f-d50937e1b3bc/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:47.764 response time in milliseconds: 484.23
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:47 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/efe5548c-916e-4c8f-9b0e-4dd70228ac93/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.491</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1087">
          <a>Doc string</a>
      </div>
      <div id="msg-1087" class="collapse collapsable-details">
        <pre>02:30:47.772 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/669abcab-2c9a-45eb-550f-d50937e1b3bc/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:48.255 response time in milliseconds: 482.77
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:48 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/efe5548c-916e-4c8f-9b0e-4dd70228ac93/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1088">
          <a>Doc string</a>
      </div>
      <div id="msg-1088" class="collapse collapsable-details">
        <pre>02:30:48.256 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/efe5548c-916e-4c8f-9b0e-4dd70228ac93/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.521</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1089">
          <a>Doc string</a>
      </div>
      <div id="msg-1089" class="collapse collapsable-details">
        <pre>02:30:48.257 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/efe5548c-916e-4c8f-9b0e-4dd70228ac93/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:48.778 response time in milliseconds: 520.91
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 1310
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:48 GMT
4 &lt; Etag: &quot;35cd1145429c1a36386b17d7307699c2-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:47 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A099F1E1A837
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1090">
          <a>Doc string</a>
      </div>
      <div id="msg-1090" class="collapse collapsable-details">
        <pre>02:30:48.782 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1091">
          <a>Doc string</a>
      </div>
      <div id="msg-1091" class="collapse collapsable-details">
        <pre>02:30:48.784 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/efe5548c-916e-4c8f-9b0e-4dd70228ac93/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1092">
          <a>Doc string</a>
      </div>
      <div id="msg-1092" class="collapse collapsable-details">
        <pre>02:30:48.786 [print] size 1310</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention"></span>
  <span class="name">[29] download/DeltaCustomargs.feature</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1093">
          <a>Doc string</a>
      </div>
      <div id="msg-1093" class="collapse collapsable-details">
        <pre>{
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}
</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">url apiBaseUrl +'kadastralekaart/api/v4_0/delta/custom'</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def requestparams = __arg</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1094">
          <a>Doc string</a>
      </div>
      <div id="msg-1094" class="collapse collapsable-details">
        <pre>02:30:48.796 [print] {
  &quot;format&quot;: &quot;gml&quot;,
  &quot;geofilter&quot;: &quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,
  &quot;deltaId&quot;: &quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,
  &quot;featuretypes&quot;: [
    &quot;perceel&quot;,
    &quot;kadastralegrens&quot;
  ]
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">request requestparams</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>
  
  <span class="lead-duration duration">1.818</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1095">
          <a>Doc string</a>
      </div>
      <div id="msg-1095" class="collapse collapsable-details">
        <pre>02:30:48.797 request:
1 &gt; POST https://downloads.pdok.nl/kadastralekaart/api/v4_0/delta/custom
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 285
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: downloads.pdok.nl
1 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)
{&quot;format&quot;:&quot;gml&quot;,&quot;geofilter&quot;:&quot;POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))&quot;,&quot;deltaId&quot;:&quot;359a0c94-3317-42ed-b8c7-508f5d13f2c1&quot;,&quot;featuretypes&quot;:[&quot;perceel&quot;,&quot;kadastralegrens&quot;]}

02:30:50.615 response time in milliseconds: 1817.57
1 &lt; 202
1 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
1 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
1 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Max-Age: 1000
1 &lt; Content-Length: 188
1 &lt; Content-Type: application/json
1 &lt; Date: Tue, 15 Jun 2021 02:30:50 GMT
1 &lt; Server: Apache
1 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
1 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;status&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/delta/custom/b42284e4-7a0f-4777-4a84-ed4a90ca09a6/status&quot;}},&quot;downloadRequestId&quot;:&quot;b42284e4-7a0f-4777-4a84-ed4a90ca09a6&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 202</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { downloadRequestId: '#uuid' , _links:'#notnull'}</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadRequestId = response.downloadRequestId</span>
  
  <span class="lead-duration duration">0.003</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def links = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;delta status links:&quot; links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1096">
          <a>Doc string</a>
      </div>
      <div id="msg-1096" class="collapse collapsable-details">
        <pre>02:30:50.620 [print]</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def statusurl = apiBaseUrl + links.status.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print 'statusurl', statusurl</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1097">
          <a>Doc string</a>
      </div>
      <div id="msg-1097" class="collapse collapsable-details">
        <pre>02:30:50.624 [print] statusurl https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/b42284e4-7a0f-4777-4a84-ed4a90ca09a6/status</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.489</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1098">
          <a>Doc string</a>
      </div>
      <div id="msg-1098" class="collapse collapsable-details">
        <pre>02:30:50.625 request:
2 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/b42284e4-7a0f-4777-4a84-ed4a90ca09a6/status
2 &gt; Accept-Encoding: gzip,deflate
2 &gt; Connection: Keep-Alive
2 &gt; Host: downloads.pdok.nl
2 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:51.114 response time in milliseconds: 488.79
2 &lt; 201
2 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
2 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
2 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
2 &lt; Access-Control-Allow-Origin: *
2 &lt; Access-Control-Max-Age: 1000
2 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2 &lt; Content-Length: 167
2 &lt; Content-Type: application/json
2 &lt; Date: Tue, 15 Jun 2021 02:30:51 GMT
2 &lt; Expires: 0
2 &lt; Pragma: no-cache
2 &lt; Server: Apache
2 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
2 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/767608bc-e6d4-487c-8e15-3656013ba1b9/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">retry until responseStatus == 201</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url statusurl</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method GET</span>
  
  <span class="lead-duration duration">0.483</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1099">
          <a>Doc string</a>
      </div>
      <div id="msg-1099" class="collapse collapsable-details">
        <pre>02:30:51.115 request:
3 &gt; GET https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/delta/custom/b42284e4-7a0f-4777-4a84-ed4a90ca09a6/status
3 &gt; Accept-Encoding: gzip,deflate
3 &gt; Connection: Keep-Alive
3 &gt; Host: downloads.pdok.nl
3 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:51.595 response time in milliseconds: 479.43
3 &lt; 201
3 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
3 &lt; Access-Control-Allow-Method: GET,POST,OPTIONS
3 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
3 &lt; Access-Control-Allow-Origin: *
3 &lt; Access-Control-Max-Age: 1000
3 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
3 &lt; Content-Length: 167
3 &lt; Content-Type: application/json
3 &lt; Date: Tue, 15 Jun 2021 02:30:51 GMT
3 &lt; Expires: 0
3 &lt; Pragma: no-cache
3 &lt; Server: Apache
3 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
3 &lt; X-Cnection: close
{&quot;_links&quot;:{&quot;download&quot;:{&quot;href&quot;:&quot;/kadaster/kadastralekaart/download/v4_0/extract/767608bc-e6d4-487c-8e15-3656013ba1b9/extract.zip&quot;}},&quot;progress&quot;:100,&quot;status&quot;:&quot;COMPLETED&quot;}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def downloadlink = response._links</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;downloadlink:&quot;, downloadlink</span>
  
  <span class="lead-duration duration">0.002</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1100">
          <a>Doc string</a>
      </div>
      <div id="msg-1100" class="collapse collapsable-details">
        <pre>02:30:51.601 [print] downloadlink: {
  &quot;download&quot;: {
    &quot;href&quot;: &quot;/kadaster/kadastralekaart/download/v4_0/extract/767608bc-e6d4-487c-8e15-3656013ba1b9/extract.zip&quot;
  }
}</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.001</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method HEAD</span>
  
  <span class="lead-duration duration">0.495</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1101">
          <a>Doc string</a>
      </div>
      <div id="msg-1101" class="collapse collapsable-details">
        <pre>02:30:51.602 request:
4 &gt; HEAD https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/767608bc-e6d4-487c-8e15-3656013ba1b9/extract.zip
4 &gt; Accept-Encoding: gzip,deflate
4 &gt; Connection: Keep-Alive
4 &gt; Host: downloads.pdok.nl
4 &gt; User-Agent: Apache-HttpClient/4.5.11 (Java/1.8.0_151)

02:30:52.097 response time in milliseconds: 494.31
4 &lt; 200
4 &lt; Accept-Ranges: bytes
4 &lt; Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept
4 &lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
4 &lt; Access-Control-Allow-Origin: *
4 &lt; Access-Control-Max-Age: 1000
4 &lt; Content-Disposition: attachment; filename=extract.zip
4 &lt; Content-Length: 22286
4 &lt; Content-Security-Policy: block-all-mixed-content
4 &lt; Content-Type: application/zip
4 &lt; Date: Tue, 15 Jun 2021 02:30:52 GMT
4 &lt; Etag: &quot;a384f36546cc9f157da287db17f878bc-1&quot;
4 &lt; Last-Modified: Tue, 15 Jun 2021 02:30:50 GMT
4 &lt; Server: MinIO
4 &lt; Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]
4 &lt; Vary: Origin
4 &lt; X-Amz-Request-Id: 1688A09AB7C4C012
4 &lt; X-Cnection: close
4 &lt; X-Xss-Protection: 1; mode=block</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Length'][0] == '#notnull'</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">match responseHeaders['Content-Type'][0] == 'application/zip'</span>
  
  <span class="lead-duration duration">0.004</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">def zipsize =  responseHeaders['Content-Length'][0]</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;###&quot;</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1102">
          <a>Doc string</a>
      </div>
      <div id="msg-1102" class="collapse collapsable-details">
        <pre>02:30:52.102 [print] ###</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;location&quot;, apiBaseUrl + downloadlink.download.href</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1103">
          <a>Doc string</a>
      </div>
      <div id="msg-1103" class="collapse collapsable-details">
        <pre>02:30:52.102 [print] location https://downloads.pdok.nl//kadaster/kadastralekaart/download/v4_0/extract/767608bc-e6d4-487c-8e15-3656013ba1b9/extract.zip</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">print &quot;size&quot;, zipsize</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        
  <div class="inner-level">
    <div class="docstring indention">
            <div data-toggle="collapse" class="collapsable-control" data-target="#msg-1104">
          <a>Doc string</a>
      </div>
      <div id="msg-1104" class="collapse collapsable-details">
        <pre>02:30:52.102 [print] size 22286</pre>
      </div>
    </div>
  </div>

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">assert zipsize &gt; 600</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def mydownloads = Java.type('download.DataStorage')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def LocalDateTime = Java.type('java.time.LocalDateTime')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def db = new mydownloads</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
          <div class="step">
        
<div class="brief passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\n    leveringsId:'+ downloadRequestId +'\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\n    Size:'+zipsize+'\n    Time:'+ LocalDateTime.now() +'\n' , 'target/surefire-reports/delta_url.yaml')</span>
  
  <span class="lead-duration duration">0.000</span>

  </div>

        


        
        

        

        
  
      </div>
      </div>
</div>


    

  </div>
</div>

                  </div>

      </div>
    </div>
  </div>
</div>


<div class="container-fluid">
  <div class="row">
    <div class="col-md-10 col-md-offset-10">
      <i class="fa fa-chevron-circle-down fa-2x collapsable-control"
        onClick="javascript:$('#report .collapsable-details').collapse('show')"></i>
      <i class="fa fa-chevron-circle-up fa-2x collapsable-control"
        onClick="javascript:$('#report .collapsable-details').collapse('hide')"></i>
    </div>
  </div>
</div>

<br>

<nav class="navbar navbar-default" id="footer">
  <div class="container-fluid">
    <p class="navbar-text navbar-right">
        <small>generate Cucumber HTML reports via:&nbsp;</small>
        <a class="navbar-link" href="https://github.com/jenkinsci/cucumber-reports-plugin">Jenkins Plugin</a> |
        <a class="navbar-link" href="https://github.com/damianszczepanik/cucumber-reporting">Standalone</a> |
        <a class="navbar-link" href="https://github.com/damianszczepanik/cucumber-sandwich">Sandwich</a> |
        <a class="navbar-link" href="https://github.com/damianszczepanik/maven-cucumber-reporting">Maven</a>
        &nbsp;&nbsp;
    </p>
  </div>
</nav>

</body>
</html>
