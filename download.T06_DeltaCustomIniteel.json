[{"line":2,"elements":[{"line":13,"name":"downoad delta initial locatie buitenhof perceel","description":"","id":"downoad-delta-initial-locatie-buitenhof-perceel","type":"scenario","keyword":"Scenario Outline","steps":[{"name":"def requestparams = {format: \"gml\",featuretypes: [\"perceel\"],  geofilter: 'POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))' }","result":{"duration":53963,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":7,"doc_string":{"content_type":"","value":"02:29:10.353 base url : {\n  \"apiBaseUrl\": \"https:\/\/downloads.pdok.nl\/\"\n}","line":7}},{"name":"print \"Initeel:\", requestparams","result":{"duration":10030799,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":8,"doc_string":{"content_type":"","value":"02:29:10.363 [print] Initeel: {\n  \"format\": \"gml\",\n  \"featuretypes\": [\n    \"perceel\"\n  ],\n  \"geofilter\": \"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"\n}","line":8}},{"name":"def dodelta = call read('DeltaCustomargs.feature') requestparams","result":{"duration":7616275305,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"download\/DeltaCustomargs.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":9,"doc_string":{"content_type":"","value":"{\n  \"format\": \"gml\",\n  \"featuretypes\": [\n    \"perceel\"\n  ],\n  \"geofilter\": \"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"\n}\n","line":9}},{"name":"url apiBaseUrl +'kadastralekaart\/api\/v4_0\/delta\/custom'","result":{"duration":5196016,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":6},{"name":"def requestparams = __arg","result":{"duration":157321,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":8},{"name":"print requestparams","result":{"duration":2183401,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":9,"doc_string":{"content_type":"","value":"02:29:10.392 [print] {\n  \"format\": \"gml\",\n  \"featuretypes\": [\n    \"perceel\"\n  ],\n  \"geofilter\": \"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"\n}","line":9}},{"name":"request requestparams","result":{"duration":12101,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":13},{"name":"method post","result":{"duration":490555847,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":14,"doc_string":{"content_type":"","value":"02:29:10.400 request:\n1 > POST https:\/\/downloads.pdok.nl\/kadastralekaart\/api\/v4_0\/delta\/custom\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 218\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: downloads.pdok.nl\n1 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n{\"format\":\"gml\",\"featuretypes\":[\"perceel\"],\"geofilter\":\"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"}\n\n02:29:10.882 response time in milliseconds: 481.57\n1 < 202\n1 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n1 < Access-Control-Allow-Method: GET,POST,OPTIONS\n1 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n1 < Access-Control-Allow-Origin: *\n1 < Access-Control-Max-Age: 1000\n1 < Content-Length: 188\n1 < Content-Type: application\/json\n1 < Date: Tue, 15 Jun 2021 02:29:10 GMT\n1 < Server: Apache\n1 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n1 < X-Cnection: close\n{\"_links\":{\"status\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/83628cca-3da6-4a79-427f-8534fe52d3c5\/status\"}},\"downloadRequestId\":\"83628cca-3da6-4a79-427f-8534fe52d3c5\"}","line":14}},{"name":"status 202","result":{"duration":7763,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":16},{"name":"match response == { downloadRequestId: '#uuid' , _links:'#notnull'}","result":{"duration":274301,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":17},{"name":"def downloadRequestId = response.downloadRequestId","result":{"duration":2726956,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":18},{"name":"def links = response._links","result":{"duration":1669641,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":19},{"name":"print \"delta status links:\" links","result":{"duration":435307,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":20,"doc_string":{"content_type":"","value":"02:29:10.888 [print]","line":20}},{"name":"def statusurl = apiBaseUrl + links.status.href","result":{"duration":2518127,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":21},{"name":"print 'statusurl', statusurl","result":{"duration":2450867,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":23,"doc_string":{"content_type":"","value":"02:29:10.893 [print] statusurl https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/83628cca-3da6-4a79-427f-8534fe52d3c5\/status","line":23}},{"name":"url statusurl","result":{"duration":8467,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":24},{"name":"method GET","result":{"duration":561298284,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":25,"doc_string":{"content_type":"","value":"02:29:10.895 request:\n2 > GET https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/83628cca-3da6-4a79-427f-8534fe52d3c5\/status\n2 > Accept-Encoding: gzip,deflate\n2 > Connection: Keep-Alive\n2 > Host: downloads.pdok.nl\n2 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:11.454 response time in milliseconds: 559.09\n2 < 200\n2 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n2 < Access-Control-Allow-Method: GET,POST,OPTIONS\n2 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n2 < Access-Control-Allow-Origin: *\n2 < Access-Control-Max-Age: 1000\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Content-Length: 159\n2 < Content-Type: application\/json\n2 < Date: Tue, 15 Jun 2021 02:29:11 GMT\n2 < Expires: 0\n2 < Pragma: no-cache\n2 < Server: Apache\n2 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n2 < X-Cnection: close\n{\"_links\":{\"self\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/83628cca-3da6-4a79-427f-8534fe52d3c5\/status\"}},\"progress\":0,\"status\":\"PENDING\"}","line":25}},{"name":"retry until responseStatus == 201","result":{"duration":12418,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":26},{"name":"url statusurl","result":{"duration":66441,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":28},{"name":"method GET","result":{"duration":5982052001,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":29,"doc_string":{"content_type":"","value":"02:29:11.456 request:\n3 > GET https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/83628cca-3da6-4a79-427f-8534fe52d3c5\/status\n3 > Accept-Encoding: gzip,deflate\n3 > Connection: Keep-Alive\n3 > Host: downloads.pdok.nl\n3 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:11.936 response time in milliseconds: 479.69\n3 < 200\n3 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n3 < Access-Control-Allow-Method: GET,POST,OPTIONS\n3 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n3 < Access-Control-Allow-Origin: *\n3 < Access-Control-Max-Age: 1000\n3 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n3 < Content-Length: 161\n3 < Content-Type: application\/json\n3 < Date: Tue, 15 Jun 2021 02:29:11 GMT\n3 < Expires: 0\n3 < Pragma: no-cache\n3 < Server: Apache\n3 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n3 < X-Cnection: close\n{\"_links\":{\"self\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/83628cca-3da6-4a79-427f-8534fe52d3c5\/status\"}},\"progress\":100,\"status\":\"RUNNING\"}\n\n02:29:11.940 retry condition not satisfied: responseStatus == 201\n02:29:11.940 sleeping before retry #1\n02:29:16.946 request:\n4 > GET https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/83628cca-3da6-4a79-427f-8534fe52d3c5\/status\n4 > Accept-Encoding: gzip,deflate\n4 > Connection: Keep-Alive\n4 > Host: downloads.pdok.nl\n4 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:17.436 response time in milliseconds: 489.50\n4 < 201\n4 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n4 < Access-Control-Allow-Method: GET,POST,OPTIONS\n4 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n4 < Access-Control-Allow-Origin: *\n4 < Access-Control-Max-Age: 1000\n4 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n4 < Content-Length: 167\n4 < Content-Type: application\/json\n4 < Date: Tue, 15 Jun 2021 02:29:17 GMT\n4 < Expires: 0\n4 < Pragma: no-cache\n4 < Server: Apache\n4 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n4 < X-Cnection: close\n{\"_links\":{\"download\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/d3b70f8c-5398-4bfa-ae88-3b9e4e7e7699\/extract.zip\"}},\"progress\":100,\"status\":\"COMPLETED\"}\n\n02:29:17.436 retry condition satisfied","line":29}},{"name":"def downloadlink = response._links","result":{"duration":191574,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":30},{"name":"match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }","result":{"duration":330856,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":31},{"name":"print \"downloadlink:\", downloadlink","result":{"duration":1089446,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":32,"doc_string":{"content_type":"","value":"02:29:17.438 [print] downloadlink: {\n  \"download\": {\n    \"href\": \"\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/d3b70f8c-5398-4bfa-ae88-3b9e4e7e7699\/extract.zip\"\n  }\n}","line":32}},{"name":"url apiBaseUrl + downloadlink.download.href","result":{"duration":381304,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":34},{"name":"method HEAD","result":{"duration":531005385,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":35,"doc_string":{"content_type":"","value":"02:29:17.440 request:\n5 > HEAD https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/d3b70f8c-5398-4bfa-ae88-3b9e4e7e7699\/extract.zip\n5 > Accept-Encoding: gzip,deflate\n5 > Connection: Keep-Alive\n5 > Host: downloads.pdok.nl\n5 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:17.970 response time in milliseconds: 529.40\n5 < 200\n5 < Accept-Ranges: bytes\n5 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n5 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n5 < Access-Control-Allow-Origin: *\n5 < Access-Control-Max-Age: 1000\n5 < Content-Disposition: attachment; filename=extract.zip\n5 < Content-Length: 2106761\n5 < Content-Security-Policy: block-all-mixed-content\n5 < Content-Type: application\/zip\n5 < Date: Tue, 15 Jun 2021 02:29:17 GMT\n5 < Etag: \"d0b9712270fc850702fa98c42721e6f9-1\"\n5 < Last-Modified: Tue, 15 Jun 2021 02:29:12 GMT\n5 < Server: MinIO\n5 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n5 < Vary: Origin\n5 < X-Amz-Request-Id: 1688A084CCF0ACED\n5 < X-Cnection: close\n5 < X-Xss-Protection: 1; mode=block","line":35}},{"name":"status 200","result":{"duration":5995,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":36},{"name":"match responseHeaders['Content-Length'][0] == '#notnull'","result":{"duration":3635303,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":37},{"name":"match responseHeaders['Content-Type'][0] == 'application\/zip'","result":{"duration":427056,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":38},{"name":"def zipsize =  responseHeaders['Content-Length'][0]","result":{"duration":1875505,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":39},{"name":"print \"###\"","result":{"duration":976872,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":40,"doc_string":{"content_type":"","value":"02:29:17.977 [print] ###","line":40}},{"name":"print \"location\", apiBaseUrl + downloadlink.download.href","result":{"duration":870639,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":41,"doc_string":{"content_type":"","value":"02:29:17.979 [print] location https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/d3b70f8c-5398-4bfa-ae88-3b9e4e7e7699\/extract.zip","line":41}},{"name":"print \"size\", zipsize","result":{"duration":305699,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":42,"doc_string":{"content_type":"","value":"02:29:17.979 [print] size 2106761","line":42}},{"name":"assert zipsize > 600","result":{"duration":197871,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":43},{"name":"def mydownloads = Java.type('download.DataStorage')","result":{"duration":313758,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":45},{"name":"def LocalDateTime = Java.type('java.time.LocalDateTime')","result":{"duration":196397,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":46},{"name":"def db = new mydownloads","result":{"duration":164835,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":47},{"name":"eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\\n    leveringsId:'+ downloadRequestId +'\\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\\n    Size:'+zipsize+'\\n    Time:'+ LocalDateTime.now() +'\\n' , 'target\/surefire-reports\/delta_url.yaml')","result":{"duration":662964,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":48}]},{"line":14,"name":"downoad delta initial locatie buitenhof kadastralegrens","description":"","id":"downoad-delta-initial-locatie-buitenhof-kadastralegrens","type":"scenario","keyword":"Scenario Outline","steps":[{"name":"def requestparams = {format: \"gml\",featuretypes: [\"kadastralegrens\"],  geofilter: 'POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))' }","result":{"duration":61640,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":7,"doc_string":{"content_type":"","value":"02:29:10.811 base url : {\n  \"apiBaseUrl\": \"https:\/\/downloads.pdok.nl\/\"\n}","line":7}},{"name":"print \"Initeel:\", requestparams","result":{"duration":1080750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":8,"doc_string":{"content_type":"","value":"02:29:10.813 [print] Initeel: {\n  \"format\": \"gml\",\n  \"featuretypes\": [\n    \"kadastralegrens\"\n  ],\n  \"geofilter\": \"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"\n}","line":8}},{"name":"def dodelta = call read('DeltaCustomargs.feature') requestparams","result":{"duration":7601691177,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"download\/DeltaCustomargs.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":9,"doc_string":{"content_type":"","value":"{\n  \"format\": \"gml\",\n  \"featuretypes\": [\n    \"kadastralegrens\"\n  ],\n  \"geofilter\": \"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"\n}\n","line":9}},{"name":"url apiBaseUrl +'kadastralekaart\/api\/v4_0\/delta\/custom'","result":{"duration":971824,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":6},{"name":"def requestparams = __arg","result":{"duration":125644,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":8},{"name":"print requestparams","result":{"duration":194117,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":9,"doc_string":{"content_type":"","value":"02:29:10.823 [print] {\n  \"format\": \"gml\",\n  \"featuretypes\": [\n    \"kadastralegrens\"\n  ],\n  \"geofilter\": \"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"\n}","line":9}},{"name":"request requestparams","result":{"duration":1864187,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":13},{"name":"method post","result":{"duration":535870904,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":14,"doc_string":{"content_type":"","value":"02:29:10.826 request:\n1 > POST https:\/\/downloads.pdok.nl\/kadastralekaart\/api\/v4_0\/delta\/custom\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 226\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: downloads.pdok.nl\n1 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n{\"format\":\"gml\",\"featuretypes\":[\"kadastralegrens\"],\"geofilter\":\"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"}\n\n02:29:11.360 response time in milliseconds: 534.05\n1 < 202\n1 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n1 < Access-Control-Allow-Method: GET,POST,OPTIONS\n1 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n1 < Access-Control-Allow-Origin: *\n1 < Access-Control-Max-Age: 1000\n1 < Content-Length: 188\n1 < Content-Type: application\/json\n1 < Date: Tue, 15 Jun 2021 02:29:11 GMT\n1 < Server: Apache\n1 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n1 < X-Cnection: [close, close]\n{\"_links\":{\"status\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/53b22f3b-4334-4671-5413-3e2dafe63298\/status\"}},\"downloadRequestId\":\"53b22f3b-4334-4671-5413-3e2dafe63298\"}","line":14}},{"name":"status 202","result":{"duration":6022,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":16},{"name":"match response == { downloadRequestId: '#uuid' , _links:'#notnull'}","result":{"duration":289105,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":17},{"name":"def downloadRequestId = response.downloadRequestId","result":{"duration":704373,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":18},{"name":"def links = response._links","result":{"duration":417493,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":19},{"name":"print \"delta status links:\" links","result":{"duration":840663,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":20,"doc_string":{"content_type":"","value":"02:29:11.363 [print]","line":20}},{"name":"def statusurl = apiBaseUrl + links.status.href","result":{"duration":430011,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":21},{"name":"print 'statusurl', statusurl","result":{"duration":349954,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":23,"doc_string":{"content_type":"","value":"02:29:11.364 [print] statusurl https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/53b22f3b-4334-4671-5413-3e2dafe63298\/status","line":23}},{"name":"url statusurl","result":{"duration":8246,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":24},{"name":"method GET","result":{"duration":520835072,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":25,"doc_string":{"content_type":"","value":"02:29:11.372 request:\n2 > GET https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/53b22f3b-4334-4671-5413-3e2dafe63298\/status\n2 > Accept-Encoding: gzip,deflate\n2 > Connection: Keep-Alive\n2 > Host: downloads.pdok.nl\n2 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:11.884 response time in milliseconds: 511.72\n2 < 200\n2 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n2 < Access-Control-Allow-Method: GET,POST,OPTIONS\n2 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n2 < Access-Control-Allow-Origin: *\n2 < Access-Control-Max-Age: 1000\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Content-Length: 159\n2 < Content-Type: application\/json\n2 < Date: Tue, 15 Jun 2021 02:29:11 GMT\n2 < Expires: 0\n2 < Pragma: no-cache\n2 < Server: Apache\n2 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n2 < X-Cnection: close\n{\"_links\":{\"self\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/53b22f3b-4334-4671-5413-3e2dafe63298\/status\"}},\"progress\":0,\"status\":\"PENDING\"}","line":25}},{"name":"retry until responseStatus == 201","result":{"duration":25363,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":26},{"name":"url statusurl","result":{"duration":9358,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":28},{"name":"method GET","result":{"duration":5992960603,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":29,"doc_string":{"content_type":"","value":"02:29:11.886 request:\n3 > GET https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/53b22f3b-4334-4671-5413-3e2dafe63298\/status\n3 > Accept-Encoding: gzip,deflate\n3 > Connection: Keep-Alive\n3 > Host: downloads.pdok.nl\n3 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:12.381 response time in milliseconds: 494.27\n3 < 200\n3 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n3 < Access-Control-Allow-Method: GET,POST,OPTIONS\n3 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n3 < Access-Control-Allow-Origin: *\n3 < Access-Control-Max-Age: 1000\n3 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n3 < Content-Length: 161\n3 < Content-Type: application\/json\n3 < Date: Tue, 15 Jun 2021 02:29:12 GMT\n3 < Expires: 0\n3 < Pragma: no-cache\n3 < Server: Apache\n3 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n3 < X-Cnection: close\n{\"_links\":{\"self\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/53b22f3b-4334-4671-5413-3e2dafe63298\/status\"}},\"progress\":100,\"status\":\"RUNNING\"}\n\n02:29:12.382 retry condition not satisfied: responseStatus == 201\n02:29:12.382 sleeping before retry #1\n02:29:17.383 request:\n4 > GET https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/53b22f3b-4334-4671-5413-3e2dafe63298\/status\n4 > Accept-Encoding: gzip,deflate\n4 > Connection: Keep-Alive\n4 > Host: downloads.pdok.nl\n4 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:17.877 response time in milliseconds: 494.13\n4 < 201\n4 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n4 < Access-Control-Allow-Method: GET,POST,OPTIONS\n4 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n4 < Access-Control-Allow-Origin: *\n4 < Access-Control-Max-Age: 1000\n4 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n4 < Content-Length: 167\n4 < Content-Type: application\/json\n4 < Date: Tue, 15 Jun 2021 02:29:17 GMT\n4 < Expires: 0\n4 < Pragma: no-cache\n4 < Server: Apache\n4 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n4 < X-Cnection: close\n{\"_links\":{\"download\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/1c152c92-555c-4981-a248-35b63642d09c\/extract.zip\"}},\"progress\":100,\"status\":\"COMPLETED\"}\n\n02:29:17.878 retry condition satisfied","line":29}},{"name":"def downloadlink = response._links","result":{"duration":130780,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":30},{"name":"match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }","result":{"duration":250281,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":31},{"name":"print \"downloadlink:\", downloadlink","result":{"duration":464731,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":32,"doc_string":{"content_type":"","value":"02:29:17.879 [print] downloadlink: {\n  \"download\": {\n    \"href\": \"\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/1c152c92-555c-4981-a248-35b63642d09c\/extract.zip\"\n  }\n}","line":32}},{"name":"url apiBaseUrl + downloadlink.download.href","result":{"duration":225105,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":34},{"name":"method HEAD","result":{"duration":518726695,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":35,"doc_string":{"content_type":"","value":"02:29:17.880 request:\n5 > HEAD https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/1c152c92-555c-4981-a248-35b63642d09c\/extract.zip\n5 > Accept-Encoding: gzip,deflate\n5 > Connection: Keep-Alive\n5 > Host: downloads.pdok.nl\n5 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:18.398 response time in milliseconds: 517.54\n5 < 200\n5 < Accept-Ranges: bytes\n5 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n5 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n5 < Access-Control-Allow-Origin: *\n5 < Access-Control-Max-Age: 1000\n5 < Content-Disposition: attachment; filename=extract.zip\n5 < Content-Length: 3132712\n5 < Content-Security-Policy: block-all-mixed-content\n5 < Content-Type: application\/zip\n5 < Date: Tue, 15 Jun 2021 02:29:18 GMT\n5 < Etag: \"0c075eacce0f4254fc6e72bdad8f03f6-1\"\n5 < Last-Modified: Tue, 15 Jun 2021 02:29:12 GMT\n5 < Server: MinIO\n5 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n5 < Vary: Origin\n5 < X-Amz-Request-Id: 1688A084E554ED67\n5 < X-Cnection: close\n5 < X-Xss-Protection: 1; mode=block","line":35}},{"name":"status 200","result":{"duration":4750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":36},{"name":"match responseHeaders['Content-Length'][0] == '#notnull'","result":{"duration":691141,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":37},{"name":"match responseHeaders['Content-Type'][0] == 'application\/zip'","result":{"duration":882013,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":38},{"name":"def zipsize =  responseHeaders['Content-Length'][0]","result":{"duration":1005168,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":39},{"name":"print \"###\"","result":{"duration":2060297,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":40,"doc_string":{"content_type":"","value":"02:29:18.403 [print] ###","line":40}},{"name":"print \"location\", apiBaseUrl + downloadlink.download.href","result":{"duration":813705,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":41,"doc_string":{"content_type":"","value":"02:29:18.404 [print] location https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/1c152c92-555c-4981-a248-35b63642d09c\/extract.zip","line":41}},{"name":"print \"size\", zipsize","result":{"duration":549698,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":42,"doc_string":{"content_type":"","value":"02:29:18.405 [print] size 3132712","line":42}},{"name":"assert zipsize > 600","result":{"duration":312160,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":43},{"name":"def mydownloads = Java.type('download.DataStorage')","result":{"duration":688036,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":45},{"name":"def LocalDateTime = Java.type('java.time.LocalDateTime')","result":{"duration":381434,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":46},{"name":"def db = new mydownloads","result":{"duration":2852929,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":47},{"name":"eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\\n    leveringsId:'+ downloadRequestId +'\\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\\n    Size:'+zipsize+'\\n    Time:'+ LocalDateTime.now() +'\\n' , 'target\/surefire-reports\/delta_url.yaml')","result":{"duration":7606206,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":48}]},{"line":15,"name":"downoad delta initial locatie buitenhof perceel\",\"kadastralegrens","description":"","id":"downoad-delta-initial-locatie-buitenhof-perceel\",\"kadastralegrens","type":"scenario","keyword":"Scenario Outline","steps":[{"name":"def requestparams = {format: \"gml\",featuretypes: [\"perceel\",\"kadastralegrens\"],  geofilter: 'POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))' }","result":{"duration":147974,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":7,"doc_string":{"content_type":"","value":"02:29:11.621 base url : {\n  \"apiBaseUrl\": \"https:\/\/downloads.pdok.nl\/\"\n}","line":7}},{"name":"print \"Initeel:\", requestparams","result":{"duration":390469,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":8,"doc_string":{"content_type":"","value":"02:29:11.622 [print] Initeel: {\n  \"format\": \"gml\",\n  \"featuretypes\": [\n    \"perceel\",\n    \"kadastralegrens\"\n  ],\n  \"geofilter\": \"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"\n}","line":8}},{"name":"def dodelta = call read('DeltaCustomargs.feature') requestparams","result":{"duration":8906286333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"download\/DeltaCustomargs.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":9,"doc_string":{"content_type":"","value":"{\n  \"format\": \"gml\",\n  \"featuretypes\": [\n    \"perceel\",\n    \"kadastralegrens\"\n  ],\n  \"geofilter\": \"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"\n}\n","line":9}},{"name":"url apiBaseUrl +'kadastralekaart\/api\/v4_0\/delta\/custom'","result":{"duration":1030353,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":6},{"name":"def requestparams = __arg","result":{"duration":133954,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":8},{"name":"print requestparams","result":{"duration":190738,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":9,"doc_string":{"content_type":"","value":"02:29:11.645 [print] {\n  \"format\": \"gml\",\n  \"featuretypes\": [\n    \"perceel\",\n    \"kadastralegrens\"\n  ],\n  \"geofilter\": \"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"\n}","line":9}},{"name":"request requestparams","result":{"duration":12521,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":13},{"name":"method post","result":{"duration":1866238253,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":14,"doc_string":{"content_type":"","value":"02:29:11.653 request:\n1 > POST https:\/\/downloads.pdok.nl\/kadastralekaart\/api\/v4_0\/delta\/custom\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 236\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: downloads.pdok.nl\n1 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n{\"format\":\"gml\",\"featuretypes\":[\"perceel\",\"kadastralegrens\"],\"geofilter\":\"POLYGON((81044.88 455429.52,81634.56000000001 455444.64,81735.36000000002 455199.36,81612.72 454955.76,81070.08 454952.4,80880.24 455192.64,81044.88 455429.52))\"}\n\n02:29:13.511 response time in milliseconds: 1857.33\n1 < 202\n1 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n1 < Access-Control-Allow-Method: GET,POST,OPTIONS\n1 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n1 < Access-Control-Allow-Origin: *\n1 < Access-Control-Max-Age: 1000\n1 < Content-Length: 188\n1 < Content-Type: application\/json\n1 < Date: Tue, 15 Jun 2021 02:29:13 GMT\n1 < Server: Apache\n1 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n1 < X-Cnection: close\n{\"_links\":{\"status\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/fa97e205-f6ea-457e-64df-79c461ee299c\/status\"}},\"downloadRequestId\":\"fa97e205-f6ea-457e-64df-79c461ee299c\"}","line":14}},{"name":"status 202","result":{"duration":4043,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":16},{"name":"match response == { downloadRequestId: '#uuid' , _links:'#notnull'}","result":{"duration":178214,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":17},{"name":"def downloadRequestId = response.downloadRequestId","result":{"duration":338749,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":18},{"name":"def links = response._links","result":{"duration":232913,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":19},{"name":"print \"delta status links:\" links","result":{"duration":386265,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":20,"doc_string":{"content_type":"","value":"02:29:13.512 [print]","line":20}},{"name":"def statusurl = apiBaseUrl + links.status.href","result":{"duration":266524,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":21},{"name":"print 'statusurl', statusurl","result":{"duration":293509,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":23,"doc_string":{"content_type":"","value":"02:29:13.513 [print] statusurl https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/fa97e205-f6ea-457e-64df-79c461ee299c\/status","line":23}},{"name":"url statusurl","result":{"duration":6790,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":24},{"name":"method GET","result":{"duration":510722423,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":25,"doc_string":{"content_type":"","value":"02:29:13.514 request:\n2 > GET https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/fa97e205-f6ea-457e-64df-79c461ee299c\/status\n2 > Accept-Encoding: gzip,deflate\n2 > Connection: Keep-Alive\n2 > Host: downloads.pdok.nl\n2 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:14.024 response time in milliseconds: 509.20\n2 < 200\n2 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n2 < Access-Control-Allow-Method: GET,POST,OPTIONS\n2 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n2 < Access-Control-Allow-Origin: *\n2 < Access-Control-Max-Age: 1000\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Content-Length: 159\n2 < Content-Type: application\/json\n2 < Date: Tue, 15 Jun 2021 02:29:13 GMT\n2 < Expires: 0\n2 < Pragma: no-cache\n2 < Server: Apache\n2 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n2 < X-Cnection: close\n{\"_links\":{\"self\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/fa97e205-f6ea-457e-64df-79c461ee299c\/status\"}},\"progress\":0,\"status\":\"PENDING\"}","line":25}},{"name":"retry until responseStatus == 201","result":{"duration":12362,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":26},{"name":"url statusurl","result":{"duration":8005,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":28},{"name":"method GET","result":{"duration":5980704544,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":29,"doc_string":{"content_type":"","value":"02:29:14.025 request:\n3 > GET https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/fa97e205-f6ea-457e-64df-79c461ee299c\/status\n3 > Accept-Encoding: gzip,deflate\n3 > Connection: Keep-Alive\n3 > Host: downloads.pdok.nl\n3 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:14.513 response time in milliseconds: 487.46\n3 < 200\n3 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n3 < Access-Control-Allow-Method: GET,POST,OPTIONS\n3 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n3 < Access-Control-Allow-Origin: *\n3 < Access-Control-Max-Age: 1000\n3 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n3 < Content-Length: 160\n3 < Content-Type: application\/json\n3 < Date: Tue, 15 Jun 2021 02:29:14 GMT\n3 < Expires: 0\n3 < Pragma: no-cache\n3 < Server: Apache\n3 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n3 < X-Cnection: close\n{\"_links\":{\"self\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/fa97e205-f6ea-457e-64df-79c461ee299c\/status\"}},\"progress\":50,\"status\":\"RUNNING\"}\n\n02:29:14.514 retry condition not satisfied: responseStatus == 201\n02:29:14.514 sleeping before retry #1\n02:29:19.515 request:\n4 > GET https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/delta\/custom\/fa97e205-f6ea-457e-64df-79c461ee299c\/status\n4 > Accept-Encoding: gzip,deflate\n4 > Connection: Keep-Alive\n4 > Host: downloads.pdok.nl\n4 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:20.001 response time in milliseconds: 486.06\n4 < 201\n4 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n4 < Access-Control-Allow-Method: GET,POST,OPTIONS\n4 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n4 < Access-Control-Allow-Origin: *\n4 < Access-Control-Max-Age: 1000\n4 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n4 < Content-Length: 167\n4 < Content-Type: application\/json\n4 < Date: Tue, 15 Jun 2021 02:29:19 GMT\n4 < Expires: 0\n4 < Pragma: no-cache\n4 < Server: Apache\n4 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n4 < X-Cnection: close\n{\"_links\":{\"download\":{\"href\":\"\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/28023775-5ff7-4e90-a042-b364a023b6ff\/extract.zip\"}},\"progress\":100,\"status\":\"COMPLETED\"}\n\n02:29:20.005 retry condition satisfied","line":29}},{"name":"def downloadlink = response._links","result":{"duration":133780,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":30},{"name":"match response == { _links:'#notnull' , progress:100, status:'COMPLETED' }","result":{"duration":157790,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":31},{"name":"print \"downloadlink:\", downloadlink","result":{"duration":345075,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":32,"doc_string":{"content_type":"","value":"02:29:20.005 [print] downloadlink: {\n  \"download\": {\n    \"href\": \"\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/28023775-5ff7-4e90-a042-b364a023b6ff\/extract.zip\"\n  }\n}","line":32}},{"name":"url apiBaseUrl + downloadlink.download.href","result":{"duration":208560,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":34},{"name":"method HEAD","result":{"duration":518449401,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":35,"doc_string":{"content_type":"","value":"02:29:20.006 request:\n5 > HEAD https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/28023775-5ff7-4e90-a042-b364a023b6ff\/extract.zip\n5 > Accept-Encoding: gzip,deflate\n5 > Connection: Keep-Alive\n5 > Host: downloads.pdok.nl\n5 > User-Agent: Apache-HttpClient\/4.5.11 (Java\/1.8.0_151)\n\n02:29:20.524 response time in milliseconds: 517.33\n5 < 200\n5 < Accept-Ranges: bytes\n5 < Access-Control-Allow-Headers: SOAPAction,X-Requested-With,Content-Type,Origin,Authorization,Accept\n5 < Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\n5 < Access-Control-Allow-Origin: *\n5 < Access-Control-Max-Age: 1000\n5 < Content-Disposition: attachment; filename=extract.zip\n5 < Content-Length: 5239468\n5 < Content-Security-Policy: block-all-mixed-content\n5 < Content-Type: application\/zip\n5 < Date: Tue, 15 Jun 2021 02:29:20 GMT\n5 < Etag: \"0fc646a774c55df6c23076e53fad4f75-1\"\n5 < Last-Modified: Tue, 15 Jun 2021 02:29:16 GMT\n5 < Server: MinIO\n5 < Strict-Transport-Security: [max-age=31536000; includeSubDomains; preload, max-age=3600; includeSubDomains; preload]\n5 < Vary: Origin\n5 < X-Amz-Request-Id: 1688A08564EB6FBE\n5 < X-Cnection: close\n5 < X-Xss-Protection: 1; mode=block","line":35}},{"name":"status 200","result":{"duration":4291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":36},{"name":"match responseHeaders['Content-Length'][0] == '#notnull'","result":{"duration":361349,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":37},{"name":"match responseHeaders['Content-Type'][0] == 'application\/zip'","result":{"duration":152747,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":38},{"name":"def zipsize =  responseHeaders['Content-Length'][0]","result":{"duration":123493,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":39},{"name":"print \"###\"","result":{"duration":162655,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":40,"doc_string":{"content_type":"","value":"02:29:20.525 [print] ###","line":40}},{"name":"print \"location\", apiBaseUrl + downloadlink.download.href","result":{"duration":531658,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":41,"doc_string":{"content_type":"","value":"02:29:20.526 [print] location https:\/\/downloads.pdok.nl\/\/kadaster\/kadastralekaart\/download\/v4_0\/extract\/28023775-5ff7-4e90-a042-b364a023b6ff\/extract.zip","line":41}},{"name":"print \"size\", zipsize","result":{"duration":264194,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":42,"doc_string":{"content_type":"","value":"02:29:20.526 [print] size 5239468","line":42}},{"name":"assert zipsize > 600","result":{"duration":549516,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":43},{"name":"def mydownloads = Java.type('download.DataStorage')","result":{"duration":556525,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":45},{"name":"def LocalDateTime = Java.type('java.time.LocalDateTime')","result":{"duration":194713,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":46},{"name":"def db = new mydownloads","result":{"duration":159744,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":47},{"name":"eval db.mywriteln('- Test: DeltaUpdate_' + __loop + ' '+ '\\n    leveringsId:'+ downloadRequestId +'\\n'+'    Url:'+apiBaseUrl + downloadlink.download.href+'\\n    Size:'+zipsize+'\\n    Time:'+ LocalDateTime.now() +'\\n' , 'target\/surefire-reports\/delta_url.yaml')","result":{"duration":596340,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":48}]}],"name":"download\/T06_DeltaCustomIniteel.feature","description":"DKK Api geeft Custom delta initial request\nDit feature test zowel de intiele download voor een specifiek interessegebied","id":"dkk-api-geeft-custom-delta-initial-request","keyword":"Feature","uri":"download\/T06_DeltaCustomIniteel.feature","tags":[{"name":"@SMOKE","line":1}]}]